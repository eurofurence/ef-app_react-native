{"version":3,"sources":["node_modules/moment/locale sync /^/.*$","assets/images/dealer_black.png","assets/images/banner_2022_no_logo.png","src/context/Theme.tsx","src/components/Atoms/Label.tsx","src/components/Atoms/MarkdownContent.tsx","src/components/Containers/Col.tsx","src/components/Containers/Row.tsx","src/components/Atoms/Section.tsx","src/components/Containers/Button.tsx","src/components/Containers/Floater.tsx","src/context/LoadingContext.tsx","src/components/Atoms/Loading/Continuous.tsx","src/components/Atoms/Activity.tsx","src/components/Containers/Header.tsx","src/configuration.tsx","src/store/authorization.service.ts","src/store/authorization.slice.ts","src/store/background.slice.tsx","src/store/eurofurence.cache.ts","src/store/eurofurence.service.ts","src/store/settings.slice.tsx","src/store/timetravel.slice.ts","src/store/index.ts","src/app/AppStyles.ts","src/app/About.tsx","src/hooks/useAppNavigation.tsx","src/store/eurofurence.details.ts","src/store/eurofurence.selectors.ts","src/components/Atoms/Banner.tsx","src/components/Containers/BadgeInvPad.tsx","src/components/Atoms/ImageFill.tsx","src/components/Atoms/Marker.tsx","src/components/Containers/ImageButton.tsx","src/hooks/useNow.tsx","src/app/Dealers/DealerCardContent.tsx","src/app/Dealers/DealerCard.tsx","src/app/Maps/LinkItem.tsx","src/app/Dealers/DealerContent.tsx","src/app/Dealers/DealerScreen.tsx","src/app/Events/EventContent.tsx","src/hooks/useEventReminder.tsx","src/app/Events/EventScreen.tsx","src/app/Events/FeedbackScreen.tsx","src/app/Knowledge/KnowledgeEntryScreen.tsx","src/components/Containers/Card.tsx","src/hoc/withPlatform.tsx","src/components/Synchronization/ImageSynchronizer.tsx","src/components/Synchronization/SynchronizationProvider.tsx","src/app/Knowledge/KnowledgeGroupsScreen.tsx","src/sentryHelpers.tsx","src/app/Maps/MapContent.tsx","src/app/Maps/MapScreen.tsx","src/app/PrivateMessages/PrivateMessageItemScreen.tsx","src/components/Utilities/NoData.tsx","src/app/PrivateMessages/PrivateMessageListScreen.tsx","src/components/Containers/Tab.tsx","src/components/Containers/Tabs.tsx","src/components/Navigators/Common.tsx","src/components/Navigators/TabsNavigator.tsx","src/components/Containers/Page.tsx","src/components/Containers/Pages.tsx","src/components/Navigators/PagesNavigator.tsx","src/app/Dealers/DealerSection.tsx","src/app/Dealers/DealersSectionedListGeneric.tsx","src/app/Dealers/DealersListAllScreen.tsx","src/app/Dealers/DealersListByDayScreen.tsx","src/app/Dealers/DealersTabsScreen.tsx","src/components/Searching/EventsSearchContext.tsx","src/app/Events/EventActionsSheet.tsx","src/hooks/useEventProperties.tsx","src/components/Atoms/Indicator.tsx","src/app/Events/EventCardContent.tsx","src/app/Events/EventCard.tsx","src/app/Events/EventSection.tsx","src/app/Events/EventsSectionedListGeneric.tsx","src/app/Events/EventsListByDayScreen.tsx","src/app/Events/EventsListByRoomScreen.tsx","src/app/Events/EventsListByTrackScreen.tsx","src/app/Events/EventsListGeneric.tsx","src/app/Events/EventsListSearchResultsScreen.tsx","src/app/Events/EventsSearchScreen.tsx","src/app/Events/PersonalScheduleList.tsx","src/app/Events/EventsTabsScreen.tsx","src/app/Announcements/AnnouncementItem.tsx","src/app/Announcements/AnnouncementList.tsx","src/app/Events/CurrentEventsList.tsx","src/app/Events/TodayScheduleList.tsx","src/app/Events/UpcomingEventsList.tsx","src/app/Home/CountdownHeader.tsx","src/app/Home/DeviceSpecificWarnings.tsx","src/app/Home/LanguageWarnings.tsx","src/app/Home/HomeScreen.tsx","src/components/Containers/Pager.tsx","src/app/MainMenu/PagerLogin.tsx","src/components/Containers/Grid.tsx","src/app/PrivateMessages/PrivateMessageLinker.tsx","src/app/MainMenu/PagerPrimary.tsx","src/app/MainMenu/MainMenu.tsx","src/hooks/useFursuitGames.tsx","src/hooks/useAdditionalServices.tsx","src/app/ScreenAreas.tsx","src/app/Settings/CacheStats.tsx","src/app/Settings/DevButtons.tsx","src/app/Settings/RemoteMessages.tsx","src/app/Settings/ScheduledNotifications.tsx","src/app/Settings/TimeTravel.tsx","src/i18n/index.ts","src/app/Settings/UserSettings.tsx","src/app/Settings/SettingsScreen.tsx","src/app/ScreenStart.tsx","src/components/Managers/AnalyticsManager.tsx","src/components/Managers/BackgroundSyncManager.tsx","src/types/NotificationTrigger.tsx","src/components/Managers/NotificationReceivedManager.tsx","src/components/Managers/NotificationRespondedManager.tsx","src/components/Managers/TokenManager.tsx","src/context/NavigationProvider.tsx","src/hooks/useNavigationStatePersistence.ts","src/hooks/useAnalytics.tsx","src/App.tsx","src/components/Utilities/AppErrorContent.tsx","src/components/Utilities/AppErrorBoundary.tsx","src/components/Managers/BackgroundSyncGenerator.tsx","src/components/Managers/NotificationChannel.tsx","src/components/Managers/NotificationHandler.tsx","src/index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","useThemeType","useColorScheme","themes","light","primary","secondary","background","surface","inverted","text","important","invText","invImportant","warning","notification","darken","lighten","soften","white","superSponsor","superSponsorText","sponsor","sponsorText","marker","dark","useTheme","type","useMemo","Label","style","variant","color","icon","ml","mt","mr","mb","children","props","theme","resType","types","regular","resVariant","variants","marginColor","result","marginLeft","marginTop","marginRight","marginBottom","iconSize","StyleSheet","flatten","fontSize","Text","name","textAlignVertical","size","create","lead","fontWeight","h1","h2","h3","h4","h5","h6","caption","minor","strong","para","lineHeight","del","textDecorationLine","em","fontStyle","u","narrow","bold","striked","underlined","middle","textAlign","shadow","textShadowColor","textShadowRadius","textShadowOffset","width","height","MarkdownContent","styleContainer","paddingTop","paddingBottom","markdownStyles","block","flexWrap","flexDirection","blockQuote","borderLeftWidth","borderLeftColor","backgroundColor","paddingLeft","hr","alignSelf","marginVertical","linkWrapper","link","list","listItem","justifyContent","alignItems","listItemContent","flexShrink","listItemBullet","borderRadius","listItemNumber","imageWrapper","flex","image","minWidth","Col","rest","start","View","center","stretch","end","spaced","Row","wrap","Section","React","memo","title","subtitle","titleColor","subtitleColor","titleVariant","subtitleVariant","iconColor","styles","container","placeholder","containerFill","ellipsizeMode","Button","outline","iconRight","onPress","onLongPress","disabled","base","containerOutline","fill","TouchableOpacity","padding","pad","borderColor","borderWidth","outlineText","Floater","containerStyle","contentStyle","arranger","content","paddingHorizontal","maxWidth","LoadingContext","createContext","indicateLoading","console","error","indicateDone","isLoading","LoadingContextProvider","useState","active","setActive","useCallback","prevState","includes","concat","filter","other","Boolean","length","context","Provider","value","Continuous","at","useSharedValue","useEffect","withRepeat","withDelay","withTiming","duration","easing","Easing","in","cubic","colorStyle","dynamicStyle","useAnimatedStyle","left","bar","overflow","position","top","bottom","Activity","useContext","Header","navigation","useNavigation","numberOfLines","back","goBack","activity","borderBottomWidth","right","conName","packageData","convention","conAbbr","abbreviation","conId","identifier","appBase","apiBase","authorizationService","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","prepareHeaders","headers","token","getState","authorization","set","tagTypes","endpoints","builder","postToken","mutation","query","args","url","method","body","RegNo","Username","Password","invalidatesTags","getWhoAmI","providesTags","postDeviceRegistration","DeviceId","Topics","createSyncRequest","postSubscribeToTopic","arg","Topic","postUnsubscribeFromTopic","sendPrivateMessage","usePostTokenMutation","usePostDeviceRegistrationMutation","useGetWhoAmIQuery","useCreateSyncRequestMutation","useSendPrivateMessageMutation","usePostSubscribeToTopicMutation","authorizationSlice","usePostUnsubscribeFromTopicMutation","createSlice","initialState","isLoggedIn","isExpired","reducers","logout","state","undefined","username","tokenValidUntil","extraReducers","addMatcher","matchFulfilled","payload","Token","TokenValidUntil","uid","Uid","actions","backgroundSlice","notifications","fcmMessages","addNotification","action","push","removeNotification","it","recordId","logFCMMessage","_","chain","orderBy","dateReceived","eventsAdapter","createEntityAdapter","selectId","model","Id","sortComparer","a","b","moment","StartDateTimeUtc","subtract","valueOf","eventDaysAdapter","Date","localeCompare","eventRoomsAdapter","Name","eventTracksAdapter","knowledgeGroupsAdapter","Order","knowledgeEntriesAdapter","imagesAdapter","dealersAdapter","announcementsAdapter","ValidUntilDateTimeUtc","mapsAdapter","lastSynchronised","toISOString","events","getInitialState","eventDays","eventRooms","eventTracks","knowledgeGroups","knowledgeEntries","maps","dealers","announcements","images","syncEntities","adapter","delta","RemoveAllEntitiesBeforeInsert","removeAll","ChangedEntities","upsertMany","DeletedEntities","removeMany","eurofurenceCache","applySync","CurrentDateTimeUtc","State","Events","EventConferenceDays","EventConferenceRooms","EventConferenceTracks","KnowledgeGroups","KnowledgeEntries","Dealers","Images","Announcements","Maps","resetCache","startCacheSync","tagsFromList","tagsFromItem","eurofurenceService","keepUnusedDataFor","extractRehydrationInfo","REHYDRATE","getAnnouncements","getAnnouncementsById","getEvents","getEventById","getDealers","getDealerById","getEventDays","getEventDayById","getEventTracks","getEventTrackById","getEventRooms","getEventRoomById","getMaps","getMapById","getKnowledgeGroups","getKnowledgeGroupById","getKnowledgeEntries","getKnowledgeEntryById","getImages","getCommunications","transformResponse","CreatedDateTimeUtc","markCommunicationRead","responseHandler","response","ok","submitEventFeedback","EventId","eventId","Rating","rating","Message","message","useGetCommunicationsQuery","useGetAnnouncementsQuery","useGetEventsQuery","useGetEventByIdQuery","useGetDealersQuery","useGetImagesQuery","useGetEventDaysQuery","useGetEventDayByIdQuery","useGetEventTracksQuery","useGetEventTrackByIdQuery","useGetEventRoomsQuery","useGetEventRoomByIdQuery","useMarkCommunicationReadMutation","useSubmitEventFeedbackMutation","settingsSlice","analytics","enabled","prompted","showDevMenu","setAnalytics","toggleDevMenu","newValue","amount","visible","Constants","debugMode","timeTravelSlice","travelForward","travelBackward","travelToDate","now","startOf","target","diff","resetTravel","enableTimeTravel","showTimeTravel","getTimeInterval","unit","asMilliseconds","ONE_MINUTE","ONE_HOUR","combineReducers","reducer","persistedReducer","persistReducer","key","version","storage","AsyncStorage","whitelist","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","PAUSE","PERSIST","PURGE","REGISTER","ignoredPaths","warnAfter","Platform","OS","logger","persistor","persistStore","useAppDispatch","useDispatch","useAppSelector","useSelector","appStyles","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","abs","trailer","Credit","uri","role","Image","source","AboutScreen","t","useTranslation","safe","useSafeAreaInsets","showHelpButtons","ScrollView","stickyHeaderIndices","stickyHeaderHiddenOnScroll","nativeApplicationVersion","nativeBuildVersion","Linking","openURL","useAppNavigation","screen","useAppRoute","routeName","useRoute","internalCreateImageUrl","input","keyStr","output","chr1","NaN","chr2","chr3","enc1","enc2","enc3","enc4","i","charCodeAt","isNaN","charAt","join","base64encode","ContentHashSha1","internalCategorizeTime","hours","internalTagsToIcon","tags","internalTagsToBadges","badges","internalSponsorOnly","internalMaskRequired","internalAttendanceDayNames","dealer","AttendsOnThursday","AttendsOnFriday","AttendsOnSaturday","internalAttendanceDays","days","eventDaysSelectors","selectAll","day","applyMapEntryDetails","transformEntitySelector","from","transform","selectBound","item","selectTotal","selectIds","createSelector","ids","selectEntities","entities","bound","mapValues","all","selectById","eventRoomsSelectors","getSelectors","eventTracksSelectors","knowledgeGroupsSelectors","knowledgeEntriesSelectors","imagesSelectors","FullUrl","eventsSelector","PartOfDay","Poster","PosterImageId","Banner","BannerImageId","Badges","Tags","Glyph","SuperSponsorOnly","SponsorOnly","MaskRequired","ConferenceRoom","ConferenceRoomId","ConferenceDay","ConferenceDayId","ConferenceTrack","ConferenceTrackId","announcementsSelectors","mapsSelectors","ImageId","Entries","entry","dealersSelectors","AttendanceDayNames","AttendanceDays","Artist","ArtistImageId","ArtistThumbnail","ArtistThumbnailImageId","ArtPreview","ArtPreviewImageId","FullName","DisplayName","AttendeeNickname","selectCountdownTitle","firstDay","first","lastDay","last","currentDay","find","isSame","isBefore","humanize","isAfter","selectFavoriteEvents","event","selectUpcomingFavoriteEvents","EndDateTimeUtc","selectCurrentEvents","isBetween","filterCurrentEvents","selectEventsByRoom","itemId","tracks","rooms","selectEventsByTrack","selectEventsByDay","selectUpcomingEvents","startMoment","endMoment","filterUpcomingEvents","selectActiveAnnouncements","ValidFromDateTimeUtc","filterActiveAnnouncements","selectDealersByDayName","selectBrowseableMaps","IsBrowseable","selectValidLinksByTarget","flatMap","Links","Target","selectKnowledgeItems","groups","entries","group","KnowledgeGroupId","selectKnowledgeItemsSections","items","data","selectIsSynchronized","selectImagesById","imageIds","aspect","aspectRatio","Width","Height","resizeMode","BadgeInvPad","badgeColor","textColor","textType","textVariant","marginHorizontal","styleContent","paddingVertical","initialSize","ImageFill","setSize","arrangerStyle","scale","Math","max","absoluteFillObject","imageStyle","translateX","x","translateY","y","absoluteFill","onLayout","nativeEvent","layout","Marker","markerColor","markerType","markerSize","ImageExButton","noMarker","styleBackground","minHeight","useNow","timetravel","getNow","add","DealerCardContent","avatar","present","merchandise","offDays","backgroundStyle","stylePre","pre","avatarCircle","main","tag","imageOverlay","DealerCard","require","format","Merchandise","DealerLinkItem","navigate","WebExternalLinkItem","MapEntryLinkItem","entryId","linkId","indexOf","EventConferenceRoomLinkItem","LinkItem","match","FragmentType","with","otherwise","DealerContent","parentPad","mapLink","markNotAttending","avatarImage","RegistrationNumber","ShortDescription","IsAfterDark","Categories","button","TelegramHandle","TwitterHandle","X","Y","TapRadius","AboutTheArtText","posterLine","ArtPreviewCaption","AboutTheArtistText","margin","aboutLine","DealerScreen","route","params","EventContent","dispatch","notificationEntry","createReminder","scheduleDate","dateCreated","dateScheduled","Notifications","Title","trigger","date","toDate","channelId","removeReminder","toggleReminder","isFavorited","useEventReminder","track","room","shareEvent","Share","share","SubTitle","defaultType","Abstract","flexGrow","rowLeft","rowRight","IsAcceptingFeedback","PanelHosts","finish","Description","EventScreen","feedbackForm","z","object","preprocess","parseInt","string","parse","number","min","optional","FeedbackScreen","submitFeedback","feedbackResult","useForm","resolver","zodResolver","defaultValues","control","handleSubmit","submit","isSuccess","eventTitle","rules","required","render","field","fieldState","onChange","minRating","enableHalfStar","star","starSize","TextInput","onChangeText","multiline","isError","borderBottomColor","KnowledgeEntryScreen","ImageIds","Card","withPlatform","Component","platforms","PlatformImageSynchronizer","isCaching","setIsCaching","prefetchedImages","setPrefetchedImages","imageUrls","cachedImages","queryCache","nonCachedImages","Promise","prefetch","then","c","fetchImages","catch","SynchronizationContext","synchronize","noop","clear","SynchronizationProvider","lastFetch","count","setCount","fetch","r","json","clearCache","Vibration","vibrate","providerValues","useSynchronizer","isSynchronizing","KnowledgeListEntry","card","KnowledgeGroupsScreen","synchronizer","SectionList","onRefresh","refreshing","ListHeaderComponent","sections","stickySectionHeadersEnabled","keyExtractor","index","renderItem","renderSectionHeader","section","renderSectionFooter","footer","entryButton","PlatformSentry","Native","Browser","captureEvent","captureException","captureNotificationException","useSentryProfiler","useProfiler","distSq","hx","hy","MapContent","refHandle","useRef","refZoom","refSheet","results","setResults","onTransform","clearTimeout","current","setTimeout","targetWidth","originalWidth","targetHeight","originalHeight","offsetX","offsetY","zoom","zoomLevel","x1","x2","y1","y2","centerX","centerY","ix","clamp","iy","circleTouches","collapse","_getZoomableViewEventObject","diffX","diffY","moveBy","styleMarker","display","minZoom","maxZoom","ref","contentWidth","contentHeight","zoomStep","initialZoom","bindToBorders","snapPoints","initialNumToRender","maxToRenderPerBatch","contentContainerStyle","MapScreen","PrivateMessageItemScreen","markRead","ReadDateTimeUtc","debug","Subject","NoData","maxHeight","PrivateMessageListScreen","refetchOnFocus","refetch","isFetching","sectionedData","partition","unread","read","readSections","groupBy","AuthorName","author","trim","messages","unreadSections","isEmpty","ListEmptyComponent","startCase","status","time","Tab","indicate","fillNotify","indicatorArea","indicatorLocator","indicatorContent","TabsContext","close","open","closeImmediately","isOpen","Tabs","forwardRef","tabs","textMore","textLess","indicateMore","onOpen","onClose","styleDismiss","fillBackground","bordersDarken","setHeight","setIsOpen","offset","dynamicDismiss","opacity","dynamicContainer","out","finished","runOnJS","useImperativeHandle","gesture","Gesture","Pan","onBegin","cancelAnimation","onUpdate","translationY","onEnd","threshold","targetIsOpen","targetValue","dismiss","tab","root","borderTopWidth","navigateTab","nameOrIndex","routes","emit","canPreventDefault","defaultPrevented","TabActions","jumpTo","createTabNavigator","createNavigatorFactory","more","tabsStyle","initialRouteName","screenOptions","useNavigationBuilder","TabRouter","descriptors","NavigationContent","options","Page","highlight","colorContent","containerStatic","containerGrow","styleItem","border","Pages","pages","indicatorIndex","indicatorHeight","styleIndicator","styleDarken","totalWidth","setTotalWidth","anchors","setAnchors","updateAnchors","copy","slice","dynamicIndicator","lower","floor","upper","ceil","anchorLower","anchorUpper","inf","scaleX","scrollView","scrollTo","anchor","horizontal","showsHorizontalScrollIndicator","indicator","page","createPagesNavigator","pagesStyle","detach","panSlack","setWidth","viewing","setViewing","arrangerWidth","useAnimatedReaction","round","translation","activeOffsetX","translationX","shift","shouldSkipChild","DealerSection","DealersSectionedListGeneric","leader","dealersGroups","navigateTo","scrollEnabled","ListFooterComponent","DealersListAllScreen","substring","toUpperCase","DealersListByDayScreen","toLowerCase","DealersTabsScreenNavigator","DealersTabsScreen","thu","fri","sat","thuDate","friDate","satDate","isThu","isFri","isSat","Navigator","Screen","component","EventsSearchContext","search","setSearch","EventsSearchProvider","handle","searchActual","useEventsSearchContext","EventActionsSheet","eventRecord","sheetRef","snapToIndex","enablePanDownToClose","useIsEventDone","Indicator","withSequence","EventCardContent","glyph","poster","happening","done","styleBadgeFrame","colorBadge","colorGlyph","glyphContainer","mainPoster","ImageBackground","tagArea2","tagAreaInner","mainText","badgeContainer","badgeFrame","rotate","subtitleArea","tagArea","paddingRight","alignContent","EventCard","useEventIsHappening","useEventIsDone","Duration","runtime","asMinutes","asHours","ShortName","EventSection","EventsSectionedListGeneric","eventsGroups","cardType","selectedEvent","setSelectedEvent","EventsListByDayScreen","eventsByDay","upcoming","passed","stillUpcomingSections","partOfDay","passedSections","EventsListByRoomScreen","isEventDone","eventsByRoom","thru","EventsListByTrackScreen","eventsByTrack","EventsListGeneric","FlatList","EventsListSearchResultsScreen","onClear","EventsSearchScreen","isFocused","useIsFocused","Keyboard","onDay","getParent","setParams","filterType","onRoom","onTrack","roundedStyle","searchArea","searchField","categories","rounded","rowCenter","PersonalScheduleList","past","upcomingSections","EventsTabsScreenNavigator","EventsTabsScreen","formatDay","hasSearchResults","actualType","currentDayId","initialId","AnnouncementItem","announcement","Area","Author","Content","AnnouncementList","CurrentEventList","TodayScheduleList","UpcomingEventsList","CountdownHeader","DeviceSpecificWarnings","scheduledNotifications","cacheImages","pushNotifications","Device","LanguageWarnings","notice","HomeScreen","refreshControl","RefreshControl","Pager","isRight","setIsRight","toLeft","toRight","toLeftImmediately","toRightImmediately","equal","loginSchema","regno","positive","password","LoginForm","keyPrefix","errors","formState","login","onBlur","marginAfter","placeholderTextColor","autoCapitalize","toString","autoComplete","textContentType","keyboardType","selectTextOnFocus","secureTextEntry","contextMenuHidden","marginBefore","PagerLogin","Grid","cols","childrenArray","Array","isArray","chunk","row","distributed","PrivateMessageLinker","onOpenMessages","prevOpen","selectFromResult","PagerPrimary","onMessages","onLogin","onInfo","onCatchEmAll","onServices","onAbout","onSettings","onMap","loggedIn","MainMenu","pager","openFursuitGames","alert","useFursuitGames","openAdditionalServices","useAdditionalServices","on","loginBack","info","catchEmAll","services","settings","about","AreasNavigator","ScreenAreas","CacheStats","sync","cache","testID","DevButtons","createSync","syncResult","sendMessage","messageResult","me","onSendMessage","RecipientUid","onLogout","log","RemoteMessages","JSON","stringify","PlatformScheduledNotifications","setNotifications","isDevice","getAllScheduledNotificationsAsync","n","TimeTravel","weekBefore","weekAfter","setMomentLocale","language","locale","P","exhaustive","Localization","partial","languages","i18next","use","initReactI18next","async","init","detect","callback","fallback","split","persisted","getItem","cacheUserLanguage","lng","setItem","fallbackLng","initImmediate","defaultNS","resources","en","nl","de","pl","da","react","useSuspense","parseMissingKeyHandler","warn","LoginSettings","auth","capitalize","UserSettings","i18n","analyticsEnabled","Alert","delayLongPress","Checkbox","selectedValue","prompt","onValueChange","changeLanguage","Item","label","SettingItem","SettingsScreen","ScreenStartNavigator","createStackNavigator","ScreenStart","themeType","StatusBar","headerShown","cardStyle","AnalyticsManager","user","Analytics","setUser","setTag","manifest","android","versionCode","PlatformBackgroundSyncManager","changed","AppState","addEventListener","appState","removeItem","remove","isTriggerWithNotification","remoteMessage","scheduleNotificationFromTrigger","scheduleNotificationAsync","messageId","PlatformNotificationReceivedManager","receive","addNotificationReceivedListener","request","isTriggerWithData","cid","CID","Event","removeNotificationSubscription","PlatformNotificationRespondedManager","useLastNotificationResponse","dateResponded","relatedId","RelatedId","TOPICS","prepareToken","initial","granted","canAskAgain","retrieveToken","PlatformTokenManager","authToken","registerDevice","subscribeToTopic","topic","sentryRoutingInstrumentation","ReactNavigationInstrumentation","NavigationProvider","persistenceKey","isReady","setIsReady","setInitialState","onStateChange","getInitialURL","initialUrl","savedStateString","finally","useNavigationStatePersistence","logEvent","properties","useAnalytics","logAnalytics","screen_name","linking","areasLinking","screens","Home","Favorites","Results","Search","fromEntries","All","Thu","Fri","Sat","prefixes","config","Areas","Dealer","KnowledgeEntry","Settings","Map","About","linkingFrom","NavigationContainer","onReady","registerNavigationContainer","App","AppErrorContent","componentStack","AppErrorBoundary","hasError","errorInfo","this","PureComponent","defineTask","executionInfo","registerTaskAsync","setNotificationChannelAsync","importance","MIN","lightColor","HIGH","DEFAULT","setNotificationHandler","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","handleSuccess","handleError","Sentry","dsn","enableInExpoDevelopment","tracesSampleRate","integrations","ReactNativeTracing","traceFetch","enableAppStartTracking","enableNativeFramesTracking","traceXHR","enableStallTracking","tracingOrigins","routingInstrumentation","WrappedIndex","registerRootComponent"],"mappings":"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","file":"static/js/app.1afed096.chunk.js","sourcesContent":["var map = {\n\t\"./af\": 366,\n\t\"./af.js\": 366,\n\t\"./ar\": 367,\n\t\"./ar-dz\": 368,\n\t\"./ar-dz.js\": 368,\n\t\"./ar-kw\": 369,\n\t\"./ar-kw.js\": 369,\n\t\"./ar-ly\": 370,\n\t\"./ar-ly.js\": 370,\n\t\"./ar-ma\": 371,\n\t\"./ar-ma.js\": 371,\n\t\"./ar-sa\": 372,\n\t\"./ar-sa.js\": 372,\n\t\"./ar-tn\": 373,\n\t\"./ar-tn.js\": 373,\n\t\"./ar.js\": 367,\n\t\"./az\": 374,\n\t\"./az.js\": 374,\n\t\"./be\": 375,\n\t\"./be.js\": 375,\n\t\"./bg\": 376,\n\t\"./bg.js\": 376,\n\t\"./bm\": 377,\n\t\"./bm.js\": 377,\n\t\"./bn\": 378,\n\t\"./bn-bd\": 379,\n\t\"./bn-bd.js\": 379,\n\t\"./bn.js\": 378,\n\t\"./bo\": 380,\n\t\"./bo.js\": 380,\n\t\"./br\": 381,\n\t\"./br.js\": 381,\n\t\"./bs\": 382,\n\t\"./bs.js\": 382,\n\t\"./ca\": 383,\n\t\"./ca.js\": 383,\n\t\"./cs\": 384,\n\t\"./cs.js\": 384,\n\t\"./cv\": 385,\n\t\"./cv.js\": 385,\n\t\"./cy\": 386,\n\t\"./cy.js\": 386,\n\t\"./da\": 301,\n\t\"./da.js\": 301,\n\t\"./de\": 302,\n\t\"./de-at\": 387,\n\t\"./de-at.js\": 387,\n\t\"./de-ch\": 388,\n\t\"./de-ch.js\": 388,\n\t\"./de.js\": 302,\n\t\"./dv\": 389,\n\t\"./dv.js\": 389,\n\t\"./el\": 390,\n\t\"./el.js\": 390,\n\t\"./en-au\": 391,\n\t\"./en-au.js\": 391,\n\t\"./en-ca\": 392,\n\t\"./en-ca.js\": 392,\n\t\"./en-gb\": 303,\n\t\"./en-gb.js\": 303,\n\t\"./en-ie\": 393,\n\t\"./en-ie.js\": 393,\n\t\"./en-il\": 394,\n\t\"./en-il.js\": 394,\n\t\"./en-in\": 395,\n\t\"./en-in.js\": 395,\n\t\"./en-nz\": 396,\n\t\"./en-nz.js\": 396,\n\t\"./en-sg\": 397,\n\t\"./en-sg.js\": 397,\n\t\"./eo\": 398,\n\t\"./eo.js\": 398,\n\t\"./es\": 399,\n\t\"./es-do\": 400,\n\t\"./es-do.js\": 400,\n\t\"./es-mx\": 401,\n\t\"./es-mx.js\": 401,\n\t\"./es-us\": 402,\n\t\"./es-us.js\": 402,\n\t\"./es.js\": 399,\n\t\"./et\": 403,\n\t\"./et.js\": 403,\n\t\"./eu\": 404,\n\t\"./eu.js\": 404,\n\t\"./fa\": 405,\n\t\"./fa.js\": 405,\n\t\"./fi\": 406,\n\t\"./fi.js\": 406,\n\t\"./fil\": 407,\n\t\"./fil.js\": 407,\n\t\"./fo\": 408,\n\t\"./fo.js\": 408,\n\t\"./fr\": 409,\n\t\"./fr-ca\": 410,\n\t\"./fr-ca.js\": 410,\n\t\"./fr-ch\": 411,\n\t\"./fr-ch.js\": 411,\n\t\"./fr.js\": 409,\n\t\"./fy\": 412,\n\t\"./fy.js\": 412,\n\t\"./ga\": 413,\n\t\"./ga.js\": 413,\n\t\"./gd\": 414,\n\t\"./gd.js\": 414,\n\t\"./gl\": 415,\n\t\"./gl.js\": 415,\n\t\"./gom-deva\": 416,\n\t\"./gom-deva.js\": 416,\n\t\"./gom-latn\": 417,\n\t\"./gom-latn.js\": 417,\n\t\"./gu\": 418,\n\t\"./gu.js\": 418,\n\t\"./he\": 419,\n\t\"./he.js\": 419,\n\t\"./hi\": 420,\n\t\"./hi.js\": 420,\n\t\"./hr\": 421,\n\t\"./hr.js\": 421,\n\t\"./hu\": 422,\n\t\"./hu.js\": 422,\n\t\"./hy-am\": 423,\n\t\"./hy-am.js\": 423,\n\t\"./id\": 424,\n\t\"./id.js\": 424,\n\t\"./is\": 425,\n\t\"./is.js\": 425,\n\t\"./it\": 304,\n\t\"./it-ch\": 426,\n\t\"./it-ch.js\": 426,\n\t\"./it.js\": 304,\n\t\"./ja\": 427,\n\t\"./ja.js\": 427,\n\t\"./jv\": 428,\n\t\"./jv.js\": 428,\n\t\"./ka\": 429,\n\t\"./ka.js\": 429,\n\t\"./kk\": 430,\n\t\"./kk.js\": 430,\n\t\"./km\": 431,\n\t\"./km.js\": 431,\n\t\"./kn\": 432,\n\t\"./kn.js\": 432,\n\t\"./ko\": 433,\n\t\"./ko.js\": 433,\n\t\"./ku\": 434,\n\t\"./ku.js\": 434,\n\t\"./ky\": 435,\n\t\"./ky.js\": 435,\n\t\"./lb\": 436,\n\t\"./lb.js\": 436,\n\t\"./lo\": 437,\n\t\"./lo.js\": 437,\n\t\"./lt\": 438,\n\t\"./lt.js\": 438,\n\t\"./lv\": 439,\n\t\"./lv.js\": 439,\n\t\"./me\": 440,\n\t\"./me.js\": 440,\n\t\"./mi\": 441,\n\t\"./mi.js\": 441,\n\t\"./mk\": 442,\n\t\"./mk.js\": 442,\n\t\"./ml\": 443,\n\t\"./ml.js\": 443,\n\t\"./mn\": 444,\n\t\"./mn.js\": 444,\n\t\"./mr\": 445,\n\t\"./mr.js\": 445,\n\t\"./ms\": 446,\n\t\"./ms-my\": 447,\n\t\"./ms-my.js\": 447,\n\t\"./ms.js\": 446,\n\t\"./mt\": 448,\n\t\"./mt.js\": 448,\n\t\"./my\": 449,\n\t\"./my.js\": 449,\n\t\"./nb\": 450,\n\t\"./nb.js\": 450,\n\t\"./ne\": 451,\n\t\"./ne.js\": 451,\n\t\"./nl\": 305,\n\t\"./nl-be\": 452,\n\t\"./nl-be.js\": 452,\n\t\"./nl.js\": 305,\n\t\"./nn\": 453,\n\t\"./nn.js\": 453,\n\t\"./oc-lnc\": 454,\n\t\"./oc-lnc.js\": 454,\n\t\"./pa-in\": 455,\n\t\"./pa-in.js\": 455,\n\t\"./pl\": 306,\n\t\"./pl.js\": 306,\n\t\"./pt\": 456,\n\t\"./pt-br\": 457,\n\t\"./pt-br.js\": 457,\n\t\"./pt.js\": 456,\n\t\"./ro\": 458,\n\t\"./ro.js\": 458,\n\t\"./ru\": 459,\n\t\"./ru.js\": 459,\n\t\"./sd\": 460,\n\t\"./sd.js\": 460,\n\t\"./se\": 461,\n\t\"./se.js\": 461,\n\t\"./si\": 462,\n\t\"./si.js\": 462,\n\t\"./sk\": 463,\n\t\"./sk.js\": 463,\n\t\"./sl\": 464,\n\t\"./sl.js\": 464,\n\t\"./sq\": 465,\n\t\"./sq.js\": 465,\n\t\"./sr\": 466,\n\t\"./sr-cyrl\": 467,\n\t\"./sr-cyrl.js\": 467,\n\t\"./sr.js\": 466,\n\t\"./ss\": 468,\n\t\"./ss.js\": 468,\n\t\"./sv\": 469,\n\t\"./sv.js\": 469,\n\t\"./sw\": 470,\n\t\"./sw.js\": 470,\n\t\"./ta\": 471,\n\t\"./ta.js\": 471,\n\t\"./te\": 472,\n\t\"./te.js\": 472,\n\t\"./tet\": 473,\n\t\"./tet.js\": 473,\n\t\"./tg\": 474,\n\t\"./tg.js\": 474,\n\t\"./th\": 475,\n\t\"./th.js\": 475,\n\t\"./tk\": 476,\n\t\"./tk.js\": 476,\n\t\"./tl-ph\": 477,\n\t\"./tl-ph.js\": 477,\n\t\"./tlh\": 478,\n\t\"./tlh.js\": 478,\n\t\"./tr\": 479,\n\t\"./tr.js\": 479,\n\t\"./tzl\": 480,\n\t\"./tzl.js\": 480,\n\t\"./tzm\": 481,\n\t\"./tzm-latn\": 482,\n\t\"./tzm-latn.js\": 482,\n\t\"./tzm.js\": 481,\n\t\"./ug-cn\": 483,\n\t\"./ug-cn.js\": 483,\n\t\"./uk\": 484,\n\t\"./uk.js\": 484,\n\t\"./ur\": 485,\n\t\"./ur.js\": 485,\n\t\"./uz\": 486,\n\t\"./uz-latn\": 487,\n\t\"./uz-latn.js\": 487,\n\t\"./uz.js\": 486,\n\t\"./vi\": 488,\n\t\"./vi.js\": 488,\n\t\"./x-pseudo\": 489,\n\t\"./x-pseudo.js\": 489,\n\t\"./yo\": 490,\n\t\"./yo.js\": 490,\n\t\"./zh-cn\": 491,\n\t\"./zh-cn.js\": 491,\n\t\"./zh-hk\": 492,\n\t\"./zh-hk.js\": 492,\n\t\"./zh-mo\": 493,\n\t\"./zh-mo.js\": 493,\n\t\"./zh-tw\": 494,\n\t\"./zh-tw.js\": 494\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 699;","module.exports = __webpack_public_path__ + \"static/media/dealer_black.1869cb12.png\";","module.exports = __webpack_public_path__ + \"static/media/banner_2022_no_logo.1d7b9551.png\";","import { useMemo } from \"react\";\r\nimport { useColorScheme, ViewStyle } from \"react-native\";\r\n\r\nexport type Theme = Record<string, string> & {\r\n    primary: string;\r\n    secondary: string;\r\n    background: string;\r\n    surface: string;\r\n    inverted: string;\r\n    text: string;\r\n    important: string;\r\n    invText: string;\r\n    invImportant: string;\r\n    warning: string;\r\n    notification: string;\r\n    darken: string;\r\n    lighten: string;\r\n    soften: string;\r\n    white: string;\r\n    superSponsor: string;\r\n    superSponsorText: string;\r\n    sponsor: string;\r\n    sponsorText: string;\r\n    marker: string;\r\n};\r\n\r\n// Resolve from system selection. Later, menu entry done.\r\nexport const useThemeType = (): \"light\" | \"dark\" => useColorScheme() ?? \"light\";\r\n\r\n/**\r\n * All theme definitions.\r\n */\r\nconst themes = {\r\n    light: {\r\n        primary: \"#006459\",\r\n        secondary: \"#3421bc\",\r\n        background: \"#f7f7f7\",\r\n        surface: \"#f0f0f0\",\r\n        inverted: \"#040014\",\r\n        text: \"#323034\",\r\n        important: \"#000000\",\r\n        invText: \"#fff7f0\",\r\n        invImportant: \"#ffffff\",\r\n        warning: \"#ee5e22\",\r\n        notification: \"#d91c52\",\r\n        darken: \"#04001440\",\r\n        lighten: \"#f7f7f7a0\",\r\n        soften: \"#04001440\",\r\n        white: \"#ffffff\",\r\n        superSponsor: \"#5300ff\",\r\n        superSponsorText: \"#fff7f0\",\r\n        sponsor: \"#ffd700\",\r\n        sponsorText: \"#323034\",\r\n        marker: \"#ff2f66\",\r\n    },\r\n    dark: {\r\n        primary: \"#37726d\",\r\n        secondary: \"#4631cc\",\r\n        background: \"#252525\",\r\n        surface: \"#2d2d2d\",\r\n        inverted: \"#b0b0b0\",\r\n        text: \"#e0dedb\",\r\n        important: \"#f1ede8\",\r\n        invText: \"#131313\",\r\n        invImportant: \"#000000\",\r\n        warning: \"#ee5e22\",\r\n        notification: \"#d91c52\",\r\n        darken: \"#04001440\",\r\n        lighten: \"#f7f7f7a0\",\r\n        soften: \"#f7f7f7a0\",\r\n        white: \"#ffffff\",\r\n        superSponsor: \"#5300ff\",\r\n        superSponsorText: \"#fff7f0\",\r\n        sponsor: \"#ffd700\",\r\n        sponsorText: \"#323034\",\r\n        marker: \"#ff2f66\",\r\n    },\r\n};\r\n\r\nexport const useTheme = (): Theme => {\r\n    // Use the selected theme type and resolve the values.\r\n    const type = useThemeType();\r\n    return useMemo(() => themes[type], [type]);\r\n};\r\n\r\nexport const useThemeColor = (color: keyof Theme) => useTheme()[color];\r\n\r\nexport const useThemeBackground = (color: keyof Theme) => {\r\n    const backgroundColor = useThemeColor(color);\r\n    return useMemo<ViewStyle>(() => ({ backgroundColor }), [backgroundColor]);\r\n};\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { ColorValue, StyleProp, StyleSheet, Text, TextProps, TextStyle } from \"react-native\";\r\n\r\nimport { Theme, useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\n\r\n/**\r\n * Props to label.\r\n */\r\nexport type LabelProps = TextProps & {\r\n    /**\r\n     * The type, one of some predefined primary style values.\r\n     */\r\n    type?: keyof typeof types;\r\n\r\n    /**\r\n     * The variant, one of some predefined secondary style values, overriding type.\r\n     */\r\n    variant?: keyof typeof variants;\r\n    /**\r\n     * The color name, a value from the theme.\r\n     */\r\n    color?: keyof Theme | ColorValue;\r\n\r\n    /**\r\n     * The icon to be displayed next to the label.\r\n     */\r\n    icon?: IconNames;\r\n\r\n    /**\r\n     * Margin left.\r\n     */\r\n    ml?: number;\r\n\r\n    /**\r\n     * Margin top.\r\n     */\r\n    mt?: number;\r\n\r\n    /**\r\n     * Margin right.\r\n     */\r\n    mr?: number;\r\n\r\n    /**\r\n     * Margin bottom.\r\n     */\r\n    mb?: number;\r\n};\r\n\r\nexport const Label: FC<LabelProps> = ({ style, type, variant, color = \"text\", icon, ml, mt, mr, mb, children, ...props }) => {\r\n    // Get theme for resolution.\r\n    const theme = useTheme();\r\n\r\n    // Create computed part.\r\n    const resType = useMemo(() => (type ? types[type] : types.regular), [type]);\r\n    const resVariant = useMemo(() => (variant ? variants[variant] : variants.regular), [variant]);\r\n    const marginColor = useMemo(() => {\r\n        // Get color value from theme, otherwise use as is.\r\n        const colorValue = typeof color === \"string\" && color in theme ? theme[color] : color;\r\n        const result: StyleProp<TextStyle> = { color: colorValue };\r\n        if (typeof ml === \"number\") result.marginLeft = ml;\r\n        if (typeof mt === \"number\") result.marginTop = mt;\r\n        if (typeof mr === \"number\") result.marginRight = mr;\r\n        if (typeof mb === \"number\") result.marginBottom = mb;\r\n        return result;\r\n    }, [ml, mt, mr, mb, theme, color]);\r\n\r\n    const iconStyle: StyleProp<TextStyle> = { marginRight: 8, textAlignVertical: \"bottom\" };\r\n    const iconSize = StyleSheet.flatten(resType).fontSize * 2;\r\n\r\n    // Return styled text.\r\n    return (\r\n        <Text style={[resType, resVariant, marginColor, style]} {...props}>\r\n            {!icon ? null : <Icon name={icon} style={iconStyle} size={iconSize} />}\r\n            {children}\r\n        </Text>\r\n    );\r\n};\r\n\r\nconst types = StyleSheet.create({\r\n    lead: {\r\n        fontWeight: \"100\",\r\n        fontSize: 20,\r\n    },\r\n    h1: {\r\n        fontWeight: \"300\",\r\n        fontSize: 30,\r\n    },\r\n    h2: {\r\n        fontSize: 24,\r\n    },\r\n    h3: {\r\n        fontSize: 20,\r\n    },\r\n    h4: {\r\n        fontSize: 17,\r\n        fontWeight: \"bold\",\r\n    },\r\n    h5: {\r\n        fontSize: 15,\r\n        fontWeight: \"bold\",\r\n    },\r\n    h6: {\r\n        fontSize: 14,\r\n        fontWeight: \"bold\",\r\n    },\r\n    caption: {\r\n        fontSize: 14,\r\n        fontWeight: \"600\",\r\n    },\r\n    regular: {\r\n        fontSize: 14,\r\n    },\r\n    minor: {\r\n        fontSize: 10,\r\n    },\r\n    strong: {\r\n        fontSize: 14,\r\n        fontWeight: \"900\",\r\n    },\r\n    para: {\r\n        fontSize: 14,\r\n        lineHeight: 24,\r\n    },\r\n    del: {\r\n        fontSize: 14,\r\n        textDecorationLine: \"line-through\",\r\n    },\r\n    em: {\r\n        fontSize: 14,\r\n        fontStyle: \"italic\",\r\n    },\r\n    u: {\r\n        fontSize: 14,\r\n        textDecorationLine: \"underline\",\r\n    },\r\n});\r\n\r\nconst variants = StyleSheet.create({\r\n    regular: {},\r\n    narrow: {\r\n        fontWeight: \"300\",\r\n    },\r\n    bold: {\r\n        fontWeight: \"900\",\r\n    },\r\n    striked: {\r\n        textDecorationLine: \"underline\",\r\n    },\r\n    underlined: {\r\n        textDecorationLine: \"underline\",\r\n    },\r\n    middle: {\r\n        textAlign: \"center\",\r\n        textAlignVertical: \"center\",\r\n    },\r\n    shadow: {\r\n        textShadowColor: \"#000000\",\r\n        textShadowRadius: 2,\r\n        textShadowOffset: { width: 0.5, height: 1 },\r\n    },\r\n});\r\n","import { FC, useMemo } from \"react\";\r\nimport { StyleProp, TextStyle } from \"react-native\";\r\n// @ts-expect-error untyped module\r\nimport Markdown from \"react-native-easy-markdown\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { LabelProps } from \"./Label\";\r\n\r\nexport type MarkdownContentProps = {\r\n    defaultType?: LabelProps[\"type\"];\r\n\r\n    /**\r\n     * Margin left.\r\n     */\r\n    ml?: number;\r\n\r\n    /**\r\n     * Margin top.\r\n     */\r\n    mt?: number;\r\n\r\n    /**\r\n     * Margin right.\r\n     */\r\n    mr?: number;\r\n\r\n    /**\r\n     * Margin bottom.\r\n     */\r\n    mb?: number;\r\n};\r\n\r\nexport const MarkdownContent: FC<MarkdownContentProps> = ({ ml, mt, mr, mb, children }) => {\r\n    // Compute outer container margins.\r\n    const styleContainer = useMemo<StyleProp<TextStyle>>(() => {\r\n        const result: StyleProp<TextStyle> = {};\r\n        if (typeof ml === \"number\") result.marginLeft = ml;\r\n        if (typeof mt === \"number\") result.paddingTop = mt;\r\n        if (typeof mr === \"number\") result.marginRight = mr;\r\n        if (typeof mb === \"number\") result.paddingBottom = mb;\r\n        return result;\r\n    }, [ml, mt, mr, mb]);\r\n\r\n    // Compute markdown styles.\r\n    const theme = useTheme();\r\n    const markdownStyles = useMemo(\r\n        () => ({\r\n            block: {\r\n                paddingBottom: 10,\r\n                flexWrap: \"wrap\",\r\n                flexDirection: \"row\",\r\n            },\r\n            blockQuote: {\r\n                borderLeftWidth: 5,\r\n                borderLeftColor: theme.secondary,\r\n                backgroundColor: theme.darken,\r\n                paddingLeft: 10,\r\n            },\r\n            h1: {\r\n                fontWeight: \"300\",\r\n                fontSize: 30,\r\n                color: theme.important,\r\n                paddingTop: 20,\r\n                paddingBottom: 8,\r\n            },\r\n            h2: {\r\n                fontSize: 24,\r\n                color: theme.important,\r\n                paddingTop: 16,\r\n                paddingBottom: 8,\r\n            },\r\n            h3: {\r\n                fontSize: 20,\r\n                color: theme.important,\r\n                paddingTop: 16,\r\n                paddingBottom: 8,\r\n            },\r\n            h4: {\r\n                fontSize: 17,\r\n                fontWeight: \"bold\",\r\n                color: theme.important,\r\n                paddingTop: 16,\r\n                paddingBottom: 8,\r\n            },\r\n            h5: {\r\n                fontSize: 15,\r\n                fontWeight: \"bold\",\r\n                color: theme.important,\r\n                paddingTop: 12,\r\n                paddingBottom: 6,\r\n            },\r\n            h6: {\r\n                fontSize: 15,\r\n                fontWeight: \"bold\",\r\n                color: theme.important,\r\n                paddingTop: 12,\r\n                paddingBottom: 6,\r\n            },\r\n            hr: {\r\n                alignSelf: \"stretch\",\r\n                height: 1,\r\n                backgroundColor: theme.text,\r\n                marginVertical: 8,\r\n            },\r\n            code: {\r\n                backgroundColor: theme.notification,\r\n                color: \"orange\",\r\n            },\r\n            text: {\r\n                alignSelf: \"flex-start\",\r\n                color: theme.text,\r\n                lineHeight: 24,\r\n            },\r\n            strong: {\r\n                fontWeight: \"bold\",\r\n                color: theme.text,\r\n            },\r\n            em: {\r\n                fontStyle: \"italic\",\r\n                color: theme.text,\r\n            },\r\n            del: {\r\n                textDecorationLine: \"line-through\",\r\n                color: theme.text,\r\n            },\r\n            u: {\r\n                textDecorationLine: \"underline\",\r\n                color: theme.text,\r\n            },\r\n            linkWrapper: {\r\n                alignSelf: \"flex-start\",\r\n            },\r\n            link: {\r\n                textDecorationLine: \"underline\",\r\n                alignSelf: \"flex-start\",\r\n                color: theme.important,\r\n            },\r\n            list: {\r\n                paddingBottom: 20,\r\n            },\r\n            listItem: {\r\n                flexDirection: \"row\",\r\n                justifyContent: \"flex-start\",\r\n                alignItems: \"center\",\r\n                marginVertical: 5,\r\n            },\r\n            listItemContent: {\r\n                flexDirection: \"row\",\r\n                flexShrink: 1,\r\n                justifyContent: \"flex-start\",\r\n                alignItems: \"flex-start\",\r\n            },\r\n            listItemBullet: {\r\n                width: 4,\r\n                height: 4,\r\n                backgroundColor: theme.important,\r\n                borderRadius: 2,\r\n                marginRight: 10,\r\n            },\r\n            listItemNumber: {\r\n                marginRight: 10,\r\n            },\r\n            imageWrapper: {\r\n                flex: 1,\r\n                flexDirection: \"row\",\r\n                justifyContent: \"flex-start\",\r\n            },\r\n            image: {\r\n                flex: 1,\r\n                minWidth: 200,\r\n                height: 200,\r\n            },\r\n        }),\r\n        [theme]\r\n    );\r\n\r\n    return (\r\n        <Markdown style={styleContainer} markdownStyles={markdownStyles}>\r\n            {children}\r\n        </Markdown>\r\n    );\r\n};\r\n","import { FC, useMemo } from \"react\";\r\nimport { StyleSheet, View, ViewProps } from \"react-native\";\r\n\r\n/**\r\n * Arguments to the column.\r\n */\r\nexport type ColProps = ViewProps & {\r\n    /**\r\n     * The type, one of some predefined primary style values.\r\n     */\r\n    type?: keyof typeof types;\r\n\r\n    /**\r\n     * The variant, one of some predefined secondary style values, overriding type.\r\n     */\r\n    variant?: keyof typeof variants;\r\n};\r\n\r\nexport const Col: FC<ColProps> = ({ style, type, variant, children, ...rest }) => {\r\n    // Resolve styles.\r\n    const resType = useMemo(() => (type ? types[type] : types.regular), [type]);\r\n    const resVariant = useMemo(() => (variant ? variants[variant] : variants.start), [variant]);\r\n    return (\r\n        <View style={[resType, resVariant, style]} {...rest}>\r\n            {children}\r\n        </View>\r\n    );\r\n};\r\n\r\nconst types = StyleSheet.create({\r\n    regular: {\r\n        flexDirection: \"column\",\r\n        alignItems: \"flex-start\",\r\n    },\r\n    center: {\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n    },\r\n    stretch: {\r\n        flexDirection: \"column\",\r\n        alignItems: \"stretch\",\r\n    },\r\n});\r\n\r\nconst variants = StyleSheet.create({\r\n    start: {\r\n        justifyContent: \"flex-start\",\r\n    },\r\n    end: {\r\n        justifyContent: \"flex-end\",\r\n    },\r\n    spaced: {\r\n        justifyContent: \"space-between\",\r\n    },\r\n});\r\n","import { FC, useMemo } from \"react\";\r\nimport { StyleSheet, View, ViewProps } from \"react-native\";\r\n\r\n/**\r\n * Arguments to the row.\r\n */\r\nexport type RowProps = ViewProps & {\r\n    /**\r\n     * The type, one of some predefined primary style values.\r\n     */\r\n    type?: keyof typeof types;\r\n\r\n    /**\r\n     * The variant, one of some predefined secondary style values, overriding type.\r\n     */\r\n    variant?: keyof typeof variants;\r\n};\r\n\r\nexport const Row: FC<RowProps> = ({ style, type, variant, children, ...rest }) => {\r\n    // Resolve styles.\r\n    const resType = useMemo(() => (type ? types[type] : types.regular), [type]);\r\n    const resVariant = useMemo(() => (variant ? variants[variant] : variants.start), [variant]);\r\n    return (\r\n        <View style={[resType, resVariant, style]} {...rest}>\r\n            {children}\r\n        </View>\r\n    );\r\n};\r\n\r\nconst types = StyleSheet.create({\r\n    regular: {\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n    },\r\n    center: {\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n    },\r\n    stretch: {\r\n        flexDirection: \"row\",\r\n        alignItems: \"stretch\",\r\n    },\r\n});\r\n\r\nconst variants = StyleSheet.create({\r\n    wrap: {\r\n        flexWrap: \"wrap\",\r\n    },\r\n    start: {\r\n        justifyContent: \"flex-start\",\r\n    },\r\n    end: {\r\n        justifyContent: \"flex-end\",\r\n    },\r\n    spaced: {\r\n        justifyContent: \"space-between\",\r\n    },\r\n    center: {\r\n        justifyContent: \"center\",\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport React, { FC, useMemo } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Theme, useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Col } from \"../Containers/Col\";\r\nimport { Row } from \"../Containers/Row\";\r\nimport { Label, LabelProps } from \"./Label\";\r\n\r\nconst iconSize = 32; // Matches H1 font size.\r\n\r\n/**\r\n * Props to section.\r\n */\r\nexport type SectionProps = {\r\n    /**\r\n     * The style to pass to the root column.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * The icon, if one should be displayed.\r\n     */\r\n    icon?: IconNames;\r\n\r\n    /**\r\n     * The primary text.\r\n     */\r\n    title: string;\r\n\r\n    /**\r\n     * The subtitle, displayed after the text.\r\n     */\r\n    subtitle?: string;\r\n\r\n    titleColor?: keyof Theme;\r\n    subtitleColor?: keyof Theme;\r\n    titleVariant?: LabelProps[\"variant\"];\r\n    subtitleVariant?: LabelProps[\"variant\"];\r\n};\r\n\r\nexport const Section: FC<SectionProps> = React.memo(({ style, icon = \"bookmark\", title, subtitle, titleColor, subtitleColor, titleVariant, subtitleVariant }) => {\r\n    const theme = useTheme();\r\n    const iconColor = useMemo(() => theme[titleColor ?? \"important\"], [theme, titleColor]);\r\n    return (\r\n        <Col style={[styles.container, style]}>\r\n            <Row type=\"center\">\r\n                {!icon ? <View style={styles.placeholder} /> : <Icon color={iconColor} style={styles.icon} name={icon} size={iconSize} />}\r\n                <Label style={styles.containerFill} type=\"h1\" variant={titleVariant} color={titleColor ?? \"important\"} ellipsizeMode=\"tail\">\r\n                    {title}\r\n                </Label>\r\n            </Row>\r\n\r\n            {!subtitle ? null : (\r\n                <Row type=\"center\">\r\n                    <View style={styles.placeholder} />\r\n                    <Label style={styles.containerFill} type=\"h3\" variant={subtitleVariant} color={subtitleColor ?? \"text\"} ellipsizeMode=\"tail\">\r\n                        {subtitle}\r\n                    </Label>\r\n                </Row>\r\n            )}\r\n        </Col>\r\n    );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        marginTop: 30,\r\n        marginBottom: 15,\r\n    },\r\n    placeholder: {\r\n        width: iconSize,\r\n        height: iconSize,\r\n        marginRight: 8,\r\n    },\r\n    icon: {\r\n        marginRight: 8,\r\n    },\r\n    containerFill: {\r\n        flex: 1,\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport * as React from \"react\";\r\nimport { FC, ReactNode, useMemo } from \"react\";\r\nimport { StyleProp, StyleSheet, TouchableOpacity, View, ViewStyle } from \"react-native\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Label } from \"../Atoms/Label\";\r\n\r\nconst iconSize = 20;\r\nconst pad = 8;\r\nconst border = 2;\r\n\r\n/**\r\n * Arguments to the button.\r\n */\r\nexport type ButtonProps = {\r\n    /**\r\n     * The style button.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * True if outline button instead of filled button.\r\n     */\r\n    outline?: boolean;\r\n\r\n    /**\r\n     * If given, displayed as the button's icon.\r\n     */\r\n    icon?: IconNames;\r\n\r\n    /**\r\n     * If given, displayed as the button's icon, this is displayed on the right side.\r\n     */\r\n    iconRight?: IconNames;\r\n\r\n    /**\r\n     * The text of the button.\r\n     */\r\n    children?: ReactNode;\r\n\r\n    /**\r\n     * If given, invoked on button press.\r\n     */\r\n    onPress?: () => void;\r\n\r\n    onLongPress?: () => void;\r\n\r\n    disabled?: boolean;\r\n};\r\n\r\nexport const Button: FC<ButtonProps> = ({ style, outline, icon, iconRight, children, onPress, onLongPress, disabled }) => {\r\n    // Computed styles.\r\n    const theme = useTheme();\r\n    const base = useMemo(() => (outline ? styles.containerOutline : styles.containerFill), [outline]);\r\n    const fill = useMemo(() => ({ backgroundColor: outline ? theme.background : theme.inverted }), [outline, theme]);\r\n\r\n    return (\r\n        <TouchableOpacity style={[styles.container, base, fill, style]} onPress={onPress} onLongPress={onLongPress} disabled={disabled}>\r\n            {!icon ? <View style={styles.placeholder} /> : <Icon name={icon} size={iconSize} color={outline ? theme.important : theme.invImportant} />}\r\n\r\n            <Label style={styles.text} color={outline ? \"important\" : \"invImportant\"}>\r\n                {children}\r\n            </Label>\r\n\r\n            {!iconRight ? <View style={styles.placeholder} /> : <Icon name={iconRight} size={iconSize} color={outline ? theme.important : theme.invImportant} />}\r\n        </TouchableOpacity>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        borderRadius: 16,\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    containerFill: {\r\n        padding: pad,\r\n        backgroundColor: \"black\",\r\n    },\r\n    containerOutline: {\r\n        padding: pad - border,\r\n        borderColor: \"black\",\r\n        borderWidth: border,\r\n    },\r\n    placeholder: {\r\n        width: iconSize,\r\n        height: iconSize,\r\n    },\r\n    text: {\r\n        textAlign: \"center\",\r\n        textAlignVertical: \"center\",\r\n    },\r\n    outlineText: {\r\n        textAlign: \"center\",\r\n        textAlignVertical: \"center\",\r\n    },\r\n});\r\n","import { FC } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nexport const padFloater = 20;\r\n\r\n/**\r\n * Props to the Floater.\r\n */\r\nexport type FloaterProps = {\r\n    /**\r\n     * Style of the container view.\r\n     */\r\n    containerStyle?: StyleProp<ViewStyle>;\r\n    /**\r\n     * Style of the content view.\r\n     */\r\n    contentStyle?: StyleProp<ViewStyle>;\r\n};\r\n\r\n/**\r\n * A scrolling content with a child that has a maximum width.\r\n * @constructor\r\n */\r\nexport const Floater: FC<FloaterProps> = ({ containerStyle, contentStyle, children }) => {\r\n    return (\r\n        <View style={[styles.container, containerStyle]}>\r\n            <View style={styles.arranger}>\r\n                <View style={[styles.content, contentStyle]}>{children}</View>\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        paddingHorizontal: padFloater,\r\n    },\r\n    arranger: {\r\n        flex: 1,\r\n        flexDirection: \"row\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"stretch\",\r\n    },\r\n    content: {\r\n        flex: 1,\r\n        alignSelf: \"stretch\",\r\n        maxWidth: 600,\r\n    },\r\n});\r\n","import { useIsFocused } from \"@react-navigation/core\";\r\nimport { createContext, FC, useCallback, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\n/**\r\n * Type for the context.\r\n */\r\nexport type LoadingContextType = {\r\n    /**\r\n     * Indicates this ID is now loading.\r\n     * @param id\r\n     */\r\n    indicateLoading(id: string): void;\r\n\r\n    /**\r\n     * Indicates this ID is now done.\r\n     * @param id\r\n     */\r\n    indicateDone(id: string): void;\r\n\r\n    /**\r\n     * True if the context is loading.\r\n     */\r\n    isLoading: boolean;\r\n};\r\n\r\n/**\r\n * A global loading tracker.\r\n */\r\nexport const LoadingContext = createContext<LoadingContextType>({\r\n    indicateLoading: () => console.error(\"No loading context configured.\"),\r\n    indicateDone: () => console.error(\"No loading context configured.\"),\r\n    isLoading: false,\r\n});\r\n\r\n/**\r\n * Provides a loading tracker.\r\n * @param children The children to provide for.\r\n * @constructor\r\n */\r\nexport const LoadingContextProvider: FC = ({ children }) => {\r\n    // Array of active IDs.\r\n    const [active, setActive] = useState<string[]>([]);\r\n\r\n    // Add ID if not present.\r\n    const indicateLoading = useCallback((id: string) => {\r\n        setActive((prevState) => (prevState.includes(id) ? prevState : prevState.concat(id)));\r\n    }, []);\r\n\r\n    // Remove ID if present.\r\n    const indicateDone = useCallback((id: string) => {\r\n        setActive((prevState) => prevState.filter((other) => other !== id));\r\n    }, []);\r\n\r\n    // True if not empty.\r\n    const isLoading = Boolean(active.length);\r\n\r\n    // Convert to a context object.\r\n    const context = useMemo(() => ({ indicateLoading, indicateDone, isLoading }), [indicateLoading, indicateDone, isLoading]);\r\n\r\n    return <LoadingContext.Provider value={context}>{children}</LoadingContext.Provider>;\r\n};\r\n\r\nexport const useIsLoading = () => useContext(LoadingContext).isLoading;\r\n\r\nexport const useSignalLoading = (value: boolean, inBackground: boolean = false) => {\r\n    const [id] = useState(() => Math.random().toString());\r\n    const context = useContext(LoadingContext);\r\n    const focused = useIsFocused();\r\n\r\n    useEffect(() => {\r\n        if ((inBackground || focused) && value) {\r\n            context.indicateLoading(id);\r\n            return () => context.indicateDone(id);\r\n        } else {\r\n            context.indicateDone(id);\r\n        }\r\n    }, [id, context, value, inBackground, focused]);\r\n};\r\n","import { FC, useEffect, useMemo } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport Animated, { Easing, useAnimatedStyle, useSharedValue, withDelay, withRepeat, withTiming } from \"react-native-reanimated\";\r\n\r\nimport { useTheme } from \"../../../context/Theme\";\r\n\r\n/**\r\n * Props for the continuous indicator.\r\n */\r\nexport type ContinuousProps = {\r\n    /**\r\n     * Style passed to root.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * True if the progress indicator should be displayed.\r\n     */\r\n    active?: boolean;\r\n};\r\n\r\nexport const Continuous: FC<ContinuousProps> = ({ style, active = true }) => {\r\n    // Use theme for colors.\r\n    const theme = useTheme();\r\n\r\n    // Shared at value.\r\n    const at = useSharedValue(0);\r\n\r\n    // Set animation in reaction to active.\r\n    useEffect(() => {\r\n        if (active) {\r\n            // Active, set to zero and animate.\r\n            at.value = 0;\r\n            at.value = withRepeat(withDelay(600, withTiming(1, { duration: 900, easing: Easing.in(Easing.cubic) })), -1);\r\n        } else {\r\n            // Inactive set to out of bounds.\r\n            at.value = -1;\r\n        }\r\n    }, [at, active]);\r\n\r\n    // Convert theme into style.\r\n    const colorStyle = useMemo(() => ({ backgroundColor: theme.secondary }), [theme]);\r\n\r\n    // Compute dynamic style animating the bar.\r\n    const dynamicStyle = useAnimatedStyle(\r\n        () => ({\r\n            left: `${(1 - at.value) * 140 - 20}%`,\r\n            width: \"20%\",\r\n        }),\r\n        [at]\r\n    );\r\n\r\n    return (\r\n        <View style={[styles.container, style]}>\r\n            <Animated.View style={[styles.bar, colorStyle, dynamicStyle]} />\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        overflow: \"hidden\",\r\n        alignSelf: \"stretch\",\r\n        height: 2,\r\n    },\r\n    bar: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        bottom: 0,\r\n    },\r\n});\r\n","import { FC } from \"react\";\r\nimport { StyleProp, ViewStyle } from \"react-native\";\r\n\r\nimport { useIsLoading } from \"../../context/LoadingContext\";\r\nimport { Continuous } from \"./Loading/Continuous\";\r\n\r\n/**\r\n * Props for the activity indicator.\r\n */\r\nexport type ActivityProps = {\r\n    /**\r\n     * Style passed to root.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n};\r\n\r\nexport const Activity: FC<ActivityProps> = ({ style }) => {\r\n    // Use the context's loading state. See LoadingContext.\r\n    const isLoading = useIsLoading();\r\n\r\n    // Indicate on the context's state.\r\n    return <Continuous style={style} active={isLoading} />;\r\n};\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { useNavigation } from \"@react-navigation/core\";\r\nimport React, { FC, useMemo } from \"react\";\r\nimport { StyleSheet, TouchableOpacity, View, ViewProps } from \"react-native\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { Activity } from \"../Atoms/Activity\";\r\nimport { Label } from \"../Atoms/Label\";\r\nimport { Row } from \"./Row\";\r\n\r\nconst iconSize = 32;\r\n\r\nexport type HeaderProps = ViewProps;\r\n\r\nexport const Header: FC<HeaderProps> = ({ style, children }) => {\r\n    const theme = useTheme();\r\n\r\n    const containerStyle = useMemo(() => ({ backgroundColor: theme.background, borderColor: theme.darken }), [theme]);\r\n\r\n    const navigation = useNavigation();\r\n\r\n    return (\r\n        <Row style={[styles.container, containerStyle, style]} type=\"center\" variant=\"spaced\">\r\n            <Icon name=\"chevron-left\" size={iconSize} color={theme.text} />\r\n\r\n            <Label style={styles.text} type=\"lead\" ellipsizeMode=\"tail\" numberOfLines={1}>\r\n                {children}\r\n            </Label>\r\n\r\n            <View style={styles.placeholder} />\r\n\r\n            <TouchableOpacity style={styles.back} onPress={() => navigation.goBack()} />\r\n\r\n            <Activity style={styles.activity} />\r\n        </Row>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        borderBottomWidth: 1,\r\n        paddingTop: 15,\r\n        paddingHorizontal: 15,\r\n        paddingBottom: 15,\r\n    },\r\n    text: {\r\n        flex: 1,\r\n    },\r\n    placeholder: {\r\n        width: iconSize,\r\n        height: iconSize,\r\n    },\r\n    back: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        bottom: 0,\r\n        width: \"30%\",\r\n    },\r\n    activity: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    },\r\n});\r\n","import packageData from \"../package.json\";\r\n\r\n/**\r\n * The name of the convention.\r\n */\r\nexport const conName = packageData.convention.name;\r\n\r\n/**\r\n * The abbreviation for the convention name.\r\n */\r\nexport const conAbbr = packageData.convention.abbreviation;\r\n\r\n/**\r\n * Convention identifier.\r\n */\r\nexport const conId = packageData.convention.identifier;\r\n\r\n/**\r\n * App base, non-API URLs are relative to this.\r\n */\r\nexport const appBase = packageData.convention.appBase;\r\n\r\n/**\r\n * API base, API methods are under this URL.\r\n */\r\nexport const apiBase = packageData.convention.apiBase;\r\n","import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\r\n\r\nimport { apiBase } from \"../configuration\";\r\nimport { Query } from \"../types\";\r\nimport { TokenRegSysRequest, TokenRegSysResponse, TokenWhoAmIResponse } from \"./authorization.types\";\r\nimport { RecordId, RecordMetadata } from \"./eurofurence.types\";\r\n\r\ntype NewPrivateMessage = {\r\n    RecipientUid: string;\r\n    AuthorName: string;\r\n    Subject: string;\r\n    Message: string;\r\n};\r\n\r\nexport const authorizationService = createApi({\r\n    reducerPath: \"authorizationService\",\r\n    baseQuery: fetchBaseQuery({\r\n        baseUrl: apiBase,\r\n        prepareHeaders: (headers, { getState }) => {\r\n            const token: string | undefined = (getState() as any).authorization?.token;\r\n\r\n            if (token) {\r\n                headers.set(\"Authorization\", `Bearer ${token}`);\r\n            }\r\n\r\n            return headers;\r\n        },\r\n    }),\r\n    tagTypes: [\"User\"],\r\n    endpoints: (builder) => ({\r\n        postToken: builder.mutation<TokenRegSysResponse, TokenRegSysRequest>({\r\n            query: (args) => ({\r\n                url: \"/Tokens/RegSys\",\r\n                method: \"POST\",\r\n                body: {\r\n                    RegNo: args.RegNo,\r\n                    Username: args.Username,\r\n                    Password: args.Password,\r\n                },\r\n            }),\r\n            invalidatesTags: [\"User\"],\r\n        }),\r\n        getWhoAmI: builder.query<TokenWhoAmIResponse, void>({\r\n            query: () => ({\r\n                url: \"/Tokens/WhoAmI\",\r\n            }),\r\n            providesTags: [\"User\"],\r\n        }),\r\n        postDeviceRegistration: builder.mutation<void, { DeviceId: string; Topics: string[] }>({\r\n            query: (args) => ({\r\n                url: \"/PushNotifications/FcmDeviceRegistration\",\r\n                method: \"POST\",\r\n                body: {\r\n                    DeviceId: args.DeviceId,\r\n                    Topics: args.Topics,\r\n                },\r\n            }),\r\n        }),\r\n        createSyncRequest: builder.mutation({\r\n            query: () => ({\r\n                url: \"/PushNotifications/SyncRequest\",\r\n                method: \"POST\",\r\n            }),\r\n        }),\r\n        postSubscribeToTopic: builder.mutation<void, { DeviceId: string; Topic: string }>({\r\n            query: (arg) => ({\r\n                url: `/PushNotifications/Topics/${arg.Topic}/${arg.DeviceId}`,\r\n                method: \"PUT\",\r\n            }),\r\n        }),\r\n        postUnsubscribeFromTopic: builder.mutation<void, { DeviceId: string; Topic: string }>({\r\n            query: (arg) => ({\r\n                url: `/PushNotifications/Topics/${arg.Topic}/${arg.DeviceId}`,\r\n                method: \"DELETE\",\r\n            }),\r\n        }),\r\n        sendPrivateMessage: builder.mutation<string, NewPrivateMessage>({\r\n            query: (args) => ({\r\n                url: \"/Communication/PrivateMessages\",\r\n                method: \"POST\",\r\n                body: args,\r\n            }),\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const selectById =\r\n    <T extends RecordMetadata>(id: RecordId) =>\r\n    (\r\n        query: Query<T[]>\r\n    ): Query<T[]> & {\r\n        record: T | undefined;\r\n    } => ({\r\n        ...query,\r\n        record: query.data?.find((record: RecordMetadata) => record.Id === id),\r\n    });\r\n\r\nexport const filterByIds =\r\n    <T extends RecordMetadata>(ids: RecordId[]) =>\r\n    (\r\n        query: Query<T[]>\r\n    ): Query<T[]> & {\r\n        records: T[];\r\n    } => ({\r\n        ...query,\r\n        records: query.data?.filter((it: RecordMetadata) => it.Id in ids) ?? [],\r\n    });\r\n\r\nexport const {\r\n    usePostTokenMutation,\r\n    useGetWhoAmIQuery,\r\n    usePostDeviceRegistrationMutation,\r\n    useCreateSyncRequestMutation,\r\n    useSendPrivateMessageMutation,\r\n    usePostSubscribeToTopicMutation,\r\n    usePostUnsubscribeFromTopicMutation,\r\n} = authorizationService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport { authorizationService } from \"./authorization.service\";\r\nimport { TokenRegSysResponse } from \"./authorization.types\";\r\n\r\ntype AuthorizationState = {\r\n    token?: string;\r\n    username?: string;\r\n    uid?: string;\r\n    tokenValidUntil?: string;\r\n    isLoggedIn: boolean;\r\n    isExpired: boolean;\r\n};\r\n\r\nconst initialState = {\r\n    isLoggedIn: false,\r\n    isExpired: false,\r\n} as AuthorizationState;\r\nexport const authorizationSlice = createSlice({\r\n    name: \"authorization\",\r\n    initialState,\r\n    reducers: {\r\n        logout: (state) => {\r\n            state.token = undefined;\r\n            state.username = undefined;\r\n            state.tokenValidUntil = undefined;\r\n            state.isLoggedIn = false;\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder.addMatcher(authorizationService.endpoints.postToken.matchFulfilled, (state, { payload }: { payload: TokenRegSysResponse }) => {\r\n            state.token = payload.Token;\r\n            state.username = payload.Username;\r\n            state.tokenValidUntil = payload.TokenValidUntil;\r\n            state.uid = payload.Uid;\r\n            state.isLoggedIn = true;\r\n            state.isExpired = false;\r\n        });\r\n    },\r\n});\r\n\r\nexport const { logout } = authorizationSlice.actions;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\n\r\nimport { RecordId } from \"./eurofurence.types\";\r\n\r\nexport type Notification = {\r\n    recordId: RecordId;\r\n    type: \"EventReminder\";\r\n    dateScheduled: string;\r\n    dateCreated: string;\r\n};\r\n\r\nexport type FCMMessage = {\r\n    dateReceived: string;\r\n    content: object;\r\n    trigger: object;\r\n    identifier: string;\r\n};\r\ntype NotificationState = {\r\n    notifications: Notification[];\r\n    fcmMessages: FCMMessage[];\r\n};\r\n\r\nconst initialState: NotificationState = {\r\n    notifications: [],\r\n    fcmMessages: [],\r\n};\r\n\r\nexport const backgroundSlice = createSlice({\r\n    name: \"background\",\r\n    initialState,\r\n    reducers: {\r\n        addNotification: (state, action: PayloadAction<Notification>) => {\r\n            state.notifications.push(action.payload);\r\n        },\r\n        removeNotification: (state, action: PayloadAction<RecordId>) => {\r\n            state.notifications = state.notifications.filter((it) => it.recordId !== action.payload);\r\n        },\r\n        logFCMMessage: (state, action: PayloadAction<FCMMessage>) => {\r\n            state.fcmMessages = _.chain(state.fcmMessages)\r\n                .concat(action.payload)\r\n                .orderBy((it) => it.dateReceived, \"desc\")\r\n                .value();\r\n        },\r\n    },\r\n});\r\n\r\nexport const { addNotification, removeNotification, logFCMMessage } = backgroundSlice.actions;\r\n","import { createEntityAdapter, createSlice, EntityAdapter, EntityState, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n    AnnouncementRecord,\r\n    DealerRecord,\r\n    EventDayRecord,\r\n    EventRecord,\r\n    EventRoomRecord,\r\n    EventTrackRecord,\r\n    ImageRecord,\r\n    KnowledgeEntryRecord,\r\n    KnowledgeGroupRecord,\r\n    MapRecord,\r\n} from \"./eurofurence.types\";\r\n\r\ntype EntitySyncState<T = unknown> = {\r\n    StorageLastChangeDateTimeUtc: string;\r\n    StorageDeltaStartChagneDAteTimeUtc: string;\r\n    RemoveAllEntitiesBeforeInsert: string;\r\n    ChangedEntities?: T[];\r\n    DeletedEntities?: string[];\r\n};\r\n\r\ntype SyncResponse = {\r\n    ConventionIdentifier: string;\r\n    Since?: string;\r\n    CurrentDateTimeUtc: string;\r\n    State: string;\r\n    Events: EntitySyncState<EventRecord>;\r\n    EventConferenceDays: EntitySyncState<EventDayRecord>;\r\n    EventConferenceRooms: EntitySyncState<EventRoomRecord>;\r\n    EventConferenceTracks: EntitySyncState<EventTrackRecord>;\r\n    KnowledgeGroups: EntitySyncState<KnowledgeGroupRecord>;\r\n    KnowledgeEntries: EntitySyncState<KnowledgeEntryRecord>;\r\n    Images: EntitySyncState<ImageRecord>;\r\n    Dealers: EntitySyncState<DealerRecord>;\r\n    Announcements: EntitySyncState<AnnouncementRecord>;\r\n    Maps: EntitySyncState<MapRecord>;\r\n};\r\n\r\nexport const eventsAdapter = createEntityAdapter<EventRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => moment(a.StartDateTimeUtc).subtract(b.StartDateTimeUtc).valueOf(),\r\n});\r\n\r\nexport const eventDaysAdapter = createEntityAdapter<EventDayRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => a.Date.localeCompare(b.Date),\r\n});\r\n\r\nexport const eventRoomsAdapter = createEntityAdapter<EventRoomRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => (a.Name && b.Name ? a.Name.localeCompare(b.Name) : 0),\r\n});\r\n\r\nexport const eventTracksAdapter = createEntityAdapter<EventTrackRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => (a.Name && b.Name ? a.Name.localeCompare(b.Name) : 0),\r\n});\r\n\r\nexport const knowledgeGroupsAdapter = createEntityAdapter<KnowledgeGroupRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => a.Order - b.Order,\r\n});\r\n\r\nexport const knowledgeEntriesAdapter = createEntityAdapter<KnowledgeEntryRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => a.Order - b.Order,\r\n});\r\n\r\nexport const imagesAdapter = createEntityAdapter<ImageRecord>({\r\n    selectId: (model) => model.Id,\r\n});\r\n\r\nexport const dealersAdapter = createEntityAdapter<DealerRecord>({\r\n    selectId: (model) => model.Id,\r\n});\r\n\r\nexport const announcementsAdapter = createEntityAdapter<AnnouncementRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => a.ValidUntilDateTimeUtc.localeCompare(b.ValidUntilDateTimeUtc),\r\n});\r\n\r\nexport const mapsAdapter = createEntityAdapter<MapRecord>({\r\n    selectId: (model) => model.Id,\r\n    sortComparer: (a, b) => a.Order - b.Order,\r\n});\r\n\r\ntype EurofurenceCacheState = {\r\n    lastSynchronised: string;\r\n    state: \"uninitialized\" | \"preview\" | \"refreshing\" | string;\r\n    events: EntityState<EventRecord>;\r\n    eventDays: EntityState<EventDayRecord>;\r\n    eventRooms: EntityState<EventRoomRecord>;\r\n    eventTracks: EntityState<EventRoomRecord>;\r\n    knowledgeGroups: EntityState<KnowledgeGroupRecord>;\r\n    knowledgeEntries: EntityState<KnowledgeEntryRecord>;\r\n    images: EntityState<ImageRecord>;\r\n    dealers: EntityState<DealerRecord>;\r\n    announcements: EntityState<AnnouncementRecord>;\r\n    maps: EntityState<MapRecord>;\r\n};\r\n\r\nconst initialState: EurofurenceCacheState = {\r\n    lastSynchronised: moment(0).toISOString(),\r\n    state: \"uninitialized\",\r\n    events: eventsAdapter.getInitialState(),\r\n    eventDays: eventDaysAdapter.getInitialState(),\r\n    eventRooms: eventRoomsAdapter.getInitialState(),\r\n    eventTracks: eventTracksAdapter.getInitialState(),\r\n    knowledgeGroups: knowledgeGroupsAdapter.getInitialState(),\r\n    knowledgeEntries: knowledgeEntriesAdapter.getInitialState(),\r\n    maps: mapsAdapter.getInitialState(),\r\n    dealers: dealersAdapter.getInitialState(),\r\n    announcements: announcementsAdapter.getInitialState(),\r\n    images: imagesAdapter.getInitialState(),\r\n};\r\n\r\nconst syncEntities = <T>(state: EntityState<T>, adapter: EntityAdapter<T>, delta: EntitySyncState<T>) => {\r\n    if (delta.RemoveAllEntitiesBeforeInsert) {\r\n        adapter.removeAll(state);\r\n    }\r\n\r\n    if (delta.ChangedEntities) {\r\n        adapter.upsertMany(state, delta.ChangedEntities);\r\n    }\r\n\r\n    if (delta.DeletedEntities) {\r\n        adapter.removeMany(state, delta.DeletedEntities);\r\n    }\r\n};\r\n\r\nexport const eurofurenceCache = createSlice({\r\n    name: \"eurofurenceCache\",\r\n    initialState,\r\n    reducers: {\r\n        applySync: (state, action: PayloadAction<SyncResponse>) => {\r\n            state.lastSynchronised = action.payload.CurrentDateTimeUtc;\r\n            state.state = action.payload.State;\r\n\r\n            syncEntities(state.events, eventsAdapter, action.payload.Events);\r\n            syncEntities(state.eventDays, eventDaysAdapter, action.payload.EventConferenceDays);\r\n            syncEntities(state.eventRooms, eventRoomsAdapter, action.payload.EventConferenceRooms);\r\n            syncEntities(state.eventTracks, eventTracksAdapter, action.payload.EventConferenceTracks);\r\n            syncEntities(state.knowledgeGroups, knowledgeGroupsAdapter, action.payload.KnowledgeGroups);\r\n            syncEntities(state.knowledgeEntries, knowledgeEntriesAdapter, action.payload.KnowledgeEntries);\r\n            syncEntities(state.dealers, dealersAdapter, action.payload.Dealers);\r\n            syncEntities(state.images, imagesAdapter, action.payload.Images);\r\n            syncEntities(state.announcements, announcementsAdapter, action.payload.Announcements);\r\n            syncEntities(state.maps, mapsAdapter, action.payload.Maps);\r\n        },\r\n        resetCache: () => {\r\n            return initialState;\r\n        },\r\n        startCacheSync: (state) => {\r\n            state.state = \"refreshing\";\r\n        },\r\n    },\r\n});\r\n\r\nexport const { applySync, resetCache, startCacheSync } = eurofurenceCache.actions;\r\n","import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\r\nimport _ from \"lodash\";\r\nimport { REHYDRATE } from \"redux-persist\";\r\n\r\nimport { apiBase } from \"../configuration\";\r\nimport {\r\n    AnnouncementRecord,\r\n    CommunicationRecord,\r\n    DealerRecord,\r\n    EventDayRecord,\r\n    EventRecord,\r\n    EventRoomRecord,\r\n    EventTrackRecord,\r\n    ImageRecord,\r\n    KnowledgeEntryRecord,\r\n    KnowledgeGroupRecord,\r\n    MapRecord,\r\n    RecordId,\r\n    RecordMetadata,\r\n} from \"./eurofurence.types\";\r\n\r\nconst tagsFromList =\r\n    <TagType extends string>(type: TagType) =>\r\n    <ResultType extends RecordMetadata[]>(result: ResultType | undefined) =>\r\n        result ? result.map((it) => ({ type, id: it.Id })) : [type];\r\nconst tagsFromItem =\r\n    <TagType extends string>(type: TagType) =>\r\n    <ResultType extends RecordMetadata>(result: ResultType | undefined) =>\r\n        result ? [{ type, id: result.Id }] : [type];\r\n\r\nexport const eurofurenceService = createApi({\r\n    reducerPath: \"eurofurenceService\",\r\n    baseQuery: fetchBaseQuery({\r\n        baseUrl: apiBase,\r\n        prepareHeaders: (headers, { getState }) => {\r\n            const token: string | undefined = (getState() as any).authorization?.token;\r\n\r\n            if (token) {\r\n                headers.set(\"Authorization\", `Bearer ${token}`);\r\n            }\r\n\r\n            return headers;\r\n        },\r\n    }),\r\n    tagTypes: [\"Announcement\", \"Event\", \"Dealer\", \"EventDay\", \"EventTrack\", \"EventRoom\", \"Map\", \"KnowledgeGroup\", \"KnowledgeEntry\", \"Image\", \"Communication\"],\r\n    keepUnusedDataFor: 0,\r\n    extractRehydrationInfo(action, { reducerPath }) {\r\n        if (action.type === REHYDRATE && action.payload) {\r\n            return action.payload[reducerPath];\r\n        }\r\n    },\r\n    endpoints: (builder) => ({\r\n        getAnnouncements: builder.query<AnnouncementRecord[], void>({\r\n            query: () => ({ url: \"/Announcements\" }),\r\n            providesTags: tagsFromList(\"Announcement\"),\r\n        }),\r\n        getAnnouncementsById: builder.query<AnnouncementRecord, RecordId>({\r\n            query: (args) => ({ url: `/Announcements/${args}` }),\r\n            providesTags: tagsFromItem(\"Announcement\"),\r\n        }),\r\n        getEvents: builder.query<EventRecord[], void>({\r\n            query: () => ({ url: \"/Events\" }),\r\n            providesTags: tagsFromList(\"Event\"),\r\n        }),\r\n        getEventById: builder.query<EventRecord, RecordId>({\r\n            query: (args) => ({ url: `/Events/${args}` }),\r\n            providesTags: tagsFromItem(\"Event\"),\r\n        }),\r\n        getDealers: builder.query<DealerRecord[], void>({\r\n            query: () => ({ url: \"/Dealers\" }),\r\n            providesTags: tagsFromList(\"Dealer\"),\r\n        }),\r\n        getDealerById: builder.query<DealerRecord, RecordId>({\r\n            query: (args) => ({ url: `/Dealers/${args}` }),\r\n            providesTags: tagsFromItem(\"Dealer\"),\r\n        }),\r\n        getEventDays: builder.query<EventDayRecord[], void>({\r\n            query: () => ({ url: \"/EventConferenceDays\" }),\r\n            providesTags: tagsFromList(\"EventDay\"),\r\n        }),\r\n        getEventDayById: builder.query<EventDayRecord, RecordId>({\r\n            query: (args) => ({ url: `/EventConferenceDays/${args}` }),\r\n            providesTags: tagsFromItem(\"EventDay\"),\r\n        }),\r\n        getEventTracks: builder.query<EventTrackRecord[], void>({\r\n            query: () => ({ url: \"/EventConferenceTracks\" }),\r\n            providesTags: tagsFromList(\"EventTrack\"),\r\n        }),\r\n        getEventTrackById: builder.query<EventTrackRecord, RecordId>({\r\n            query: (args) => ({ url: `/EventConferenceTracks/${args}` }),\r\n            providesTags: tagsFromItem(\"EventTrack\"),\r\n        }),\r\n        getEventRooms: builder.query<EventRoomRecord[], void>({\r\n            query: () => ({ url: \"/EventConferenceRooms\" }),\r\n            providesTags: tagsFromList(\"EventRoom\"),\r\n        }),\r\n        getEventRoomById: builder.query<EventRoomRecord, RecordId>({\r\n            query: (args) => ({ url: `/EventConferenceRooms/${args}` }),\r\n            providesTags: tagsFromItem(\"EventRoom\"),\r\n        }),\r\n        getMaps: builder.query<MapRecord[], void>({\r\n            query: () => ({ url: \"/Maps\" }),\r\n            providesTags: tagsFromList(\"Map\"),\r\n        }),\r\n        getMapById: builder.query<MapRecord, RecordId>({\r\n            query: (args) => ({ url: `/Maps/${args}` }),\r\n            providesTags: tagsFromItem(\"Map\"),\r\n        }),\r\n        getKnowledgeGroups: builder.query<KnowledgeGroupRecord[], void>({\r\n            query: () => ({ url: \"/KnowledgeGroups\" }),\r\n            providesTags: tagsFromList(\"KnowledgeGroup\"),\r\n        }),\r\n        getKnowledgeGroupById: builder.query<KnowledgeGroupRecord, RecordId>({\r\n            query: (args) => ({ url: `/KnowledgeGroups/${args}` }),\r\n            providesTags: tagsFromItem(\"KnowledgeGroup\"),\r\n        }),\r\n        getKnowledgeEntries: builder.query<KnowledgeEntryRecord[], void>({\r\n            query: () => ({ url: \"/KnowledgeEntries\" }),\r\n            providesTags: tagsFromList(\"KnowledgeEntry\"),\r\n        }),\r\n        getKnowledgeEntryById: builder.query<KnowledgeEntryRecord, RecordId>({\r\n            query: (args) => ({ url: `/KnowledgeEntries/${args}` }),\r\n            providesTags: tagsFromItem(\"KnowledgeEntry\"),\r\n        }),\r\n        getImages: builder.query<ImageRecord[], void>({\r\n            query: () => ({ url: `/Images` }),\r\n            providesTags: tagsFromList(\"Image\"),\r\n        }),\r\n        getCommunications: builder.query<CommunicationRecord[], void>({\r\n            query: () => \"/Communication/PrivateMessages\",\r\n            providesTags: tagsFromList(\"Communication\"),\r\n            transformResponse: (result: CommunicationRecord[]) => _.orderBy(result, (it) => it.CreatedDateTimeUtc, \"desc\"),\r\n        }),\r\n        markCommunicationRead: builder.mutation<boolean, RecordId>({\r\n            query: (arg) => ({\r\n                url: `/Communication/PrivateMessages/${arg}/Read`,\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"text/json\",\r\n                },\r\n                body: \"true\",\r\n                responseHandler: async (response: Response) => response.ok,\r\n            }),\r\n            invalidatesTags: (result, error, arg) => (result ? [{ type: \"Communication\", id: arg }] : []),\r\n        }),\r\n        submitEventFeedback: builder.mutation<void, { eventId: RecordId; rating: number; message?: string }>({\r\n            query: (args) => ({\r\n                url: \"/EventFeedback\",\r\n                method: \"POST\",\r\n                body: {\r\n                    EventId: args.eventId,\r\n                    Rating: args.rating,\r\n                    Message: args.message,\r\n                },\r\n            }),\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const {\r\n    useGetAnnouncementsQuery,\r\n    useGetEventsQuery,\r\n    useGetEventByIdQuery,\r\n    useGetDealersQuery,\r\n    useGetImagesQuery,\r\n    useGetEventDaysQuery,\r\n    useGetEventDayByIdQuery,\r\n    useGetEventTracksQuery,\r\n    useGetEventTrackByIdQuery,\r\n    useGetEventRoomsQuery,\r\n    useGetEventRoomByIdQuery,\r\n    useGetCommunicationsQuery,\r\n    useMarkCommunicationReadMutation,\r\n    useSubmitEventFeedbackMutation,\r\n} = eurofurenceService;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ntype SettingsSliceState = {\r\n    analytics: {\r\n        enabled: boolean;\r\n        prompted: boolean;\r\n    };\r\n    showDevMenu?: boolean;\r\n};\r\n\r\nexport const settingsSlice = createSlice({\r\n    name: \"settingsSlice\",\r\n    initialState: {\r\n        analytics: {\r\n            enabled: false,\r\n            prompted: false,\r\n        },\r\n        showDevMenu: false,\r\n    } as SettingsSliceState,\r\n    reducers: {\r\n        setAnalytics: (state, action: PayloadAction<boolean>) => {\r\n            state.analytics.enabled = action.payload;\r\n            state.analytics.prompted = true;\r\n        },\r\n        showDevMenu: (state, action: PayloadAction<boolean>) => {\r\n            state.showDevMenu = action.payload;\r\n        },\r\n        toggleDevMenu: (state, action: PayloadAction<boolean | undefined>) => {\r\n            const newValue = action.payload !== undefined ? action.payload : !state.showDevMenu ?? true;\r\n\r\n            state.showDevMenu = newValue;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { setAnalytics, showDevMenu, toggleDevMenu } = settingsSlice.actions;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport Constants from \"expo-constants\";\r\nimport moment from \"moment\";\r\n\r\ninterface TimeTravelState {\r\n    amount: number;\r\n    enabled: boolean;\r\n    visible: boolean;\r\n}\r\n\r\nconst initialState: TimeTravelState = {\r\n    amount: 0,\r\n    enabled: false,\r\n    visible: Constants.debugMode,\r\n};\r\n\r\nexport const timeTravelSlice = createSlice({\r\n    name: \"timetravel\",\r\n    initialState,\r\n    reducers: {\r\n        travelForward: (state, action: PayloadAction<number>) => {\r\n            state.amount += action.payload;\r\n        },\r\n        travelBackward: (state, action: PayloadAction<number>) => {\r\n            state.amount -= action.payload;\r\n        },\r\n        travelToDate: (state, action: PayloadAction<string>) => {\r\n            const now = moment().startOf(\"day\");\r\n            const target = moment(action.payload).startOf(\"day\");\r\n            state.amount = target.diff(now, \"milliseconds\");\r\n        },\r\n        resetTravel: (state) => {\r\n            state.amount = 0;\r\n        },\r\n        enableTimeTravel: (state, action: PayloadAction<boolean>) => {\r\n            state.enabled = action.payload;\r\n        },\r\n        showTimeTravel: (state, action: PayloadAction<boolean>) => {\r\n            state.visible = action.payload;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { travelForward, travelBackward, travelToDate, resetTravel, enableTimeTravel, showTimeTravel } = timeTravelSlice.actions;\r\n\r\nconst getTimeInterval = (unit: moment.unitOfTime.DurationConstructor) => moment.duration(1, unit).asMilliseconds();\r\nexport const ONE_MINUTE = getTimeInterval(\"minute\");\r\nexport const ONE_HOUR = getTimeInterval(\"hour\");\r\nexport const ONE_DAY = getTimeInterval(\"day\");\r\nexport const ONE_WEEK = getTimeInterval(\"week\");\r\nexport const ONE_MONTH = getTimeInterval(\"month\");\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { combineReducers, configureStore } from \"@reduxjs/toolkit\";\r\nimport { Platform } from \"react-native\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport logger from \"redux-logger\";\r\nimport { FLUSH, PAUSE, PERSIST, persistReducer, persistStore, PURGE, REGISTER, REHYDRATE } from \"redux-persist\";\r\n\r\nimport { authorizationService } from \"./authorization.service\";\r\nimport { authorizationSlice } from \"./authorization.slice\";\r\nimport { backgroundSlice } from \"./background.slice\";\r\nimport { eurofurenceCache } from \"./eurofurence.cache\";\r\nimport { eurofurenceService } from \"./eurofurence.service\";\r\nimport { settingsSlice } from \"./settings.slice\";\r\nimport { timeTravelSlice } from \"./timetravel.slice\";\r\n\r\nexport const reducers = combineReducers({\r\n    [backgroundSlice.name]: backgroundSlice.reducer,\r\n    [timeTravelSlice.name]: timeTravelSlice.reducer,\r\n    [authorizationSlice.name]: authorizationSlice.reducer,\r\n    [eurofurenceCache.name]: eurofurenceCache.reducer,\r\n    [eurofurenceService.reducerPath]: eurofurenceService.reducer,\r\n    [authorizationService.reducerPath]: authorizationService.reducer,\r\n    [settingsSlice.name]: settingsSlice.reducer,\r\n});\r\n\r\nconst persistedReducer = persistReducer(\r\n    {\r\n        key: \"root\",\r\n        version: 2,\r\n        storage: AsyncStorage,\r\n        whitelist: [timeTravelSlice.name, eurofurenceService.reducerPath, backgroundSlice.name, authorizationSlice.name, eurofurenceCache.name, settingsSlice.name],\r\n    },\r\n    reducers\r\n);\r\n\r\nexport const store = configureStore({\r\n    reducer: persistedReducer,\r\n    middleware: (getDefaultMiddleware) => {\r\n        const middleware = getDefaultMiddleware({\r\n            serializableCheck: {\r\n                ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n                ignoredPaths: [eurofurenceCache.name, eurofurenceService.reducerPath],\r\n                warnAfter: 200,\r\n            },\r\n        }).concat(eurofurenceService.middleware, authorizationService.middleware);\r\n\r\n        if (Platform.OS === \"web\") {\r\n            middleware.concat(logger);\r\n        }\r\n\r\n        return middleware;\r\n    },\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n\r\n// Types for the Store\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\n// Typed versions of common hooks\r\nexport const useAppDispatch: () => AppDispatch = useDispatch;\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { StyleSheet } from \"react-native\";\r\n\r\nexport const appStyles = StyleSheet.create({\r\n    /**\r\n     * Verified shadow to be used across iOS and Android devices.\r\n     */\r\n    shadow: {\r\n        shadowColor: \"#000\",\r\n        shadowOffset: { width: 0, height: 2 },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 3.84,\r\n        elevation: 5,\r\n    },\r\n\r\n    /**\r\n     * Absolute positioning only, use in conjuction with insets.\r\n     */\r\n    abs: {\r\n        position: \"absolute\",\r\n    },\r\n\r\n    /**\r\n     * Adds sufficient trailer space as padding.\r\n     */\r\n    trailer: {\r\n        paddingBottom: 100,\r\n    },\r\n});\r\n","import { nativeApplicationVersion, nativeBuildVersion } from \"expo-application\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Image, Linking, ScrollView } from \"react-native\";\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Label } from \"../components/Atoms/Label\";\r\nimport { MarkdownContent } from \"../components/Atoms/MarkdownContent\";\r\nimport { Section } from \"../components/Atoms/Section\";\r\nimport { Button } from \"../components/Containers/Button\";\r\nimport { Col } from \"../components/Containers/Col\";\r\nimport { Floater } from \"../components/Containers/Floater\";\r\nimport { Header } from \"../components/Containers/Header\";\r\nimport { Row } from \"../components/Containers/Row\";\r\nimport { useAppSelector } from \"../store\";\r\nimport { appStyles } from \"./AppStyles\";\r\n\r\nconst extraThanksMarkdown = `\r\n# Tooling\r\n\r\nWe use React-Native and Expo to make this experience possible.\r\n\r\nFirebase provides us with cloud messaging and analytics.\r\n\r\nAnd Sentry helps us out with exception tracing.\r\n\r\n# People\r\n\r\n## Program Management\r\n\r\n- Zefiro\r\n\r\n## Other Special People\r\n\r\n- Akulatraxas\r\n- Aragon Tigerseye\r\n- Atkelar\r\n- Cairyn\r\n- Carenath Stormwind\r\n- Jul\r\n- Liam\r\n- NordicFuzzCon (Catch'em all)\r\n- Pattarchus\r\n- Snow-wolf\r\n- StreifiGreif\r\n- Xil\r\n- IceTiger\r\n\r\n## English Translations\r\n\r\n- Luchs\r\n- Pazuzu\r\n- Requinard\r\n\r\n## German Translations\r\n\r\n- Luchs\r\n- Pazuzu\r\n- Requinard\r\n\r\n## Dutch Translations\r\n\r\n- Pazuzu\r\n- Requinard\r\n\r\n## Italian Translations\r\n\r\n- Siepnir\r\n\r\n## Polish Translations\r\n\r\n- Lemurr\r\n\r\n## Danish Translations\r\n\r\n- Wovaka\r\n\r\n# Disclaimer\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.`;\r\n\r\nexport const Credit: FC<{ uri: string; name: string; role: string; onPress?: () => void }> = ({ uri, name, role, onPress }) => (\r\n    <TouchableOpacity disabled={onPress === undefined} onPress={onPress}>\r\n        <Row type={\"center\"} style={{ marginVertical: 5 }}>\r\n            <Image\r\n                source={{ uri, height: 60, width: 60 }}\r\n                style={{\r\n                    borderRadius: 100,\r\n                }}\r\n            />\r\n\r\n            <Col style={{ flex: 1, marginLeft: 10 }}>\r\n                <Label type={\"h2\"}>{name}</Label>\r\n                <Label>\r\n                    {role}\r\n                    {}\r\n                </Label>\r\n            </Col>\r\n        </Row>\r\n    </TouchableOpacity>\r\n);\r\n\r\nexport const AboutScreen = () => {\r\n    const { t } = useTranslation(\"About\");\r\n    const safe = useSafeAreaInsets();\r\n    const showHelpButtons = useAppSelector((state) => state.settingsSlice.showDevMenu ?? false);\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]} stickyHeaderIndices={[0]} stickyHeaderHiddenOnScroll>\r\n            <Header>{t(\"header\")}</Header>\r\n            <Floater contentStyle={appStyles.trailer}>\r\n                <Section title={t(\"app_details.title\")} subtitle={`${nativeApplicationVersion} - ${nativeBuildVersion}`} icon={\"cellphone\"} />\r\n\r\n                {!showHelpButtons && (\r\n                    <>\r\n                        <Button style={{ marginVertical: 10 }} onPress={() => Linking.openURL(\"https://t.me/+lAYTadnRKdY2NDBk\")} icon={\"help\"}>\r\n                            {t(\"app_details.get_help\")}\r\n                        </Button>\r\n                        <Button style={{ marginVertical: 10 }} onPress={() => Linking.openURL(\"https://github.com/eurofurence/ef-app_react-native/issues\")} icon={\"bug\"}>\r\n                            {t(\"app_details.report_bug\")}\r\n                        </Button>\r\n                    </>\r\n                )}\r\n\r\n                <Section title={t(\"developed_by\")} icon={\"code-json\"} />\r\n                <Credit uri={\"https://avatars.githubusercontent.com/u/13329381\"} name={\"Luchs\"} role={\"Project management and getting us to move our butts in gear\"} />\r\n                <Credit uri={\"https://avatars.githubusercontent.com/u/5929561\"} name={\"Pazuzu\"} role={\"React Development and UI design\"} />\r\n                <Credit uri={\"https://avatars.githubusercontent.com/u/5537850\"} name={\"Requinard\"} role={\"React Development and app mechanics\"} />\r\n                <Credit uri={\"https://avatars.githubusercontent.com/u/12624320\"} name={\"Shez\"} role={\"iOS Development\"} />\r\n                <Credit uri={\"https://avatars.githubusercontent.com/u/3359222\"} name={\"Fenrikur\"} role={\"iOS Development\"} />\r\n                <MarkdownContent>{extraThanksMarkdown}</MarkdownContent>\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import { useNavigation } from \"@react-navigation/core\";\r\nimport { useRoute } from \"@react-navigation/native\";\r\nimport { StackNavigationProp } from \"@react-navigation/stack\";\r\n\r\nimport { ScreenAreasParamsList } from \"../app/ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../app/ScreenStart\";\r\n\r\ntype AllRoutes = ScreenStartParamsList & ScreenAreasParamsList;\r\n\r\ntype ParamListMap<T> = {\r\n    [RouteName in keyof T]: T;\r\n};\r\n\r\n/**\r\n * Combine all the routes into a single map from Route Name to the ParamsList it maps to\r\n */\r\ntype RouteMap = ParamListMap<ScreenAreasParamsList> & ParamListMap<ScreenStartParamsList>;\r\n\r\n// @ts-expect-error something is off about screens but it does seem to work\r\nexport const useAppNavigation = <ScreenName extends keyof RouteMap, Screen = RouteMap[ScreenName]>(screen: ScreenName) => useNavigation<StackNavigationProp<Screen, ScreenName>>();\r\n\r\ntype TypedRoute<RouteName, Params> = {\r\n    params: Params;\r\n    key: string;\r\n    name: RouteName;\r\n    path?: string;\r\n};\r\n\r\nexport const useAppRoute = <RouteName extends keyof AllRoutes>(routeName: RouteName): TypedRoute<RouteName, AllRoutes[RouteName]> => useRoute();\r\n","import moment, { MomentInput } from \"moment\";\r\n\r\nimport { apiBase } from \"../configuration\";\r\nimport { IconNames } from \"../types/IconNames\";\r\nimport { eventDaysSelectors, eventRoomsSelectors, eventTracksSelectors, imagesSelectors } from \"./eurofurence.selectors\";\r\nimport {\r\n    AnnouncementDetails,\r\n    AnnouncementRecord,\r\n    AttendanceDay,\r\n    DealerDetails,\r\n    DealerRecord,\r\n    EventDayDetails,\r\n    EventDayRecord,\r\n    EventDetails,\r\n    EventRecord,\r\n    EventRoomDetails,\r\n    EventRoomRecord,\r\n    EventTrackDetails,\r\n    EventTrackRecord,\r\n    ImageDetails,\r\n    ImageRecord,\r\n    KnowledgeEntryDetails,\r\n    KnowledgeEntryRecord,\r\n    KnowledgeGroupDetails,\r\n    KnowledgeGroupRecord,\r\n    MapDetails,\r\n    MapEntryDetails,\r\n    MapEntryRecord,\r\n    MapRecord,\r\n} from \"./eurofurence.types\";\r\nimport { RootState } from \"./index\";\r\n\r\nconst base64encode = (input: string) => {\r\n    const keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n    const output = [];\r\n    let chr1 = NaN;\r\n    let chr2 = NaN;\r\n    let chr3 = NaN;\r\n    let enc1 = NaN;\r\n    let enc2 = NaN;\r\n    let enc3 = NaN;\r\n    let enc4 = NaN;\r\n    let i = 0;\r\n\r\n    do {\r\n        chr1 = input.charCodeAt(i++);\r\n        chr2 = input.charCodeAt(i++);\r\n        chr3 = input.charCodeAt(i++);\r\n\r\n        enc1 = chr1 >> 2;\r\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n        enc4 = chr3 & 63;\r\n\r\n        if (isNaN(chr2)) {\r\n            enc3 = 64;\r\n            enc4 = 64;\r\n        } else if (isNaN(chr3)) {\r\n            enc4 = 64;\r\n        }\r\n\r\n        output.push(keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4));\r\n        chr1 = NaN;\r\n        chr2 = NaN;\r\n        chr3 = NaN;\r\n        enc1 = NaN;\r\n        enc2 = NaN;\r\n        enc3 = NaN;\r\n        enc4 = NaN;\r\n    } while (i < input.length);\r\n\r\n    return output.join(\"\");\r\n};\r\n\r\n/**\r\n * Do not use directly.\r\n * @param source\r\n */\r\nconst internalCreateImageUrl = (source: ImageRecord): string => `${apiBase}/Images/${source.Id}/Content/with-hash:${base64encode(source.ContentHashSha1)}`;\r\n\r\nconst internalCategorizeTime = (input: MomentInput) => {\r\n    const hours = moment(input).hours();\r\n    if (6 <= hours && hours < 13) return \"morning\";\r\n    if (13 <= hours && hours < 17) return \"afternoon\";\r\n    if (17 <= hours && hours < 21) return \"evening\";\r\n    return \"night\";\r\n};\r\n\r\nconst internalTagsToIcon = (tags?: string[]): IconNames | undefined => {\r\n    if (!tags) return;\r\n    if (tags.includes(\"supersponsors_only\")) return \"star-circle\";\r\n    if (tags.includes(\"sponsors_only\")) return \"star\";\r\n    if (tags.includes(\"kage\")) return \"bug\";\r\n    if (tags.includes(\"art_show\")) return \"image-frame\";\r\n    if (tags.includes(\"dealers_den\")) return \"shopping\";\r\n    if (tags.includes(\"main_stage\")) return \"bank\";\r\n    if (tags.includes(\"photoshoot\")) return \"camera\";\r\n};\r\n\r\nconst internalTagsToBadges = (tags?: string[]): IconNames[] | undefined => {\r\n    if (!tags) return [];\r\n\r\n    const badges: IconNames[] = [];\r\n    if (tags.includes(\"mask_required\")) badges.push(\"face-mask\");\r\n    return badges;\r\n};\r\n\r\nconst internalSuperSponsorOnly = (tags?: string[]) => Boolean(tags?.includes(\"supersponsors_only\"));\r\n\r\nconst internalSponsorOnly = (tags?: string[]) => Boolean(tags?.includes(\"sponsors_only\"));\r\n\r\nconst internalMaskRequired = (tags?: string[]) => Boolean(tags?.includes(\"mask_required\"));\r\n\r\nconst internalAttendanceDayNames = (dealer: DealerRecord) => {\r\n    const result: AttendanceDay[] = [];\r\n    if (dealer.AttendsOnThursday) result.push(\"thu\");\r\n    if (dealer.AttendsOnFriday) result.push(\"fri\");\r\n    if (dealer.AttendsOnSaturday) result.push(\"sat\");\r\n    return result;\r\n};\r\n\r\nconst internalAttendanceDays = (state: RootState, dealer: DealerRecord) => {\r\n    const days = eventDaysSelectors.selectAll(state);\r\n    const result: EventDayDetails[] = [];\r\n    for (const day of days) {\r\n        // Sun:0, Mon:1 , Tue:2, Wed:3, Thu:4, Fri:5, Sat:6.\r\n        if (dealer.AttendsOnThursday && day && moment(day.Date).day() === 4) result.push(day);\r\n        if (dealer.AttendsOnFriday && day && moment(day.Date).day() === 5) result.push(day);\r\n        if (dealer.AttendsOnSaturday && day && moment(day.Date).day() === 6) result.push(day);\r\n    }\r\n    return result;\r\n};\r\n\r\nexport const applyAnnouncementDetails = (state: RootState, source: AnnouncementRecord): AnnouncementDetails => source;\r\n\r\nexport const applyEventDetails = (state: RootState, source: EventRecord): EventDetails => ({\r\n    ...source,\r\n    PartOfDay: internalCategorizeTime(source.StartDateTimeUtc),\r\n    Poster: !source.PosterImageId ? undefined : imagesSelectors.selectById(state, source.PosterImageId),\r\n    Banner: !source.BannerImageId ? undefined : imagesSelectors.selectById(state, source.BannerImageId),\r\n    Badges: internalTagsToBadges(source.Tags),\r\n    Glyph: internalTagsToIcon(source.Tags),\r\n    SuperSponsorOnly: internalSuperSponsorOnly(source.Tags),\r\n    SponsorOnly: internalSponsorOnly(source.Tags),\r\n    MaskRequired: internalMaskRequired(source.Tags),\r\n    ConferenceRoom: !source.ConferenceRoomId ? undefined : eventRoomsSelectors.selectById(state, source.ConferenceRoomId),\r\n    ConferenceDay: !source.ConferenceDayId ? undefined : eventDaysSelectors.selectById(state, source.ConferenceDayId),\r\n    ConferenceTrack: !source.ConferenceTrackId ? undefined : eventTracksSelectors.selectById(state, source.ConferenceTrackId),\r\n});\r\n\r\nexport const applyDealerDetails = (state: RootState, source: DealerRecord): DealerDetails => ({\r\n    ...source,\r\n    AttendanceDayNames: internalAttendanceDayNames(source),\r\n    AttendanceDays: internalAttendanceDays(state, source),\r\n    Artist: !source.ArtistImageId ? undefined : imagesSelectors.selectById(state, source.ArtistImageId),\r\n    ArtistThumbnail: !source.ArtistThumbnailImageId ? undefined : imagesSelectors.selectById(state, source.ArtistThumbnailImageId),\r\n    ArtPreview: !source.ArtPreviewImageId ? undefined : imagesSelectors.selectById(state, source.ArtPreviewImageId),\r\n    FullName: source.DisplayName || source.AttendeeNickname,\r\n});\r\n\r\nexport const applyEventDayDetails = (state: RootState, source: EventDayRecord): EventDayDetails => source;\r\n\r\nexport const applyEventTrackDetails = (state: RootState, source: EventTrackRecord): EventTrackDetails => source;\r\n\r\nexport const applyEventRoomDetails = (state: RootState, source: EventRoomRecord): EventRoomDetails => source;\r\n\r\nexport const applyMapDetails = (state: RootState, source: MapRecord): MapDetails => ({\r\n    ...source,\r\n    Image: imagesSelectors.selectById(state, source.ImageId),\r\n    Entries: source.Entries.map((entry) => applyMapEntryDetails(state, entry)),\r\n});\r\n\r\nexport const applyMapEntryDetails = (state: RootState, source: MapEntryRecord): MapEntryDetails => source;\r\n\r\nexport const applyKnowledgeGroupDetails = (state: RootState, source: KnowledgeGroupRecord): KnowledgeGroupDetails => source;\r\n\r\nexport const applyKnowledgeEntryDetails = (state: RootState, source: KnowledgeEntryRecord): KnowledgeEntryDetails => source;\r\n\r\nexport const applyImageDetails = (state: RootState, source: ImageRecord): ImageDetails => ({\r\n    ...source,\r\n    FullUrl: internalCreateImageUrl(source),\r\n});\r\n","import { createSelector } from \"@reduxjs/toolkit\";\r\nimport { EntityId, EntitySelectors } from \"@reduxjs/toolkit/src/entities/models\";\r\nimport { TFunction } from \"i18next\";\r\nimport _, { chain, Dictionary as LodashDictionary, map, mapValues } from \"lodash\";\r\nimport moment, { Moment } from \"moment\";\r\nimport { SectionListData } from \"react-native\";\r\n\r\nimport { conName } from \"../configuration\";\r\nimport {\r\n    announcementsAdapter,\r\n    dealersAdapter,\r\n    eventDaysAdapter,\r\n    eventRoomsAdapter,\r\n    eventsAdapter,\r\n    eventTracksAdapter,\r\n    imagesAdapter,\r\n    knowledgeEntriesAdapter,\r\n    knowledgeGroupsAdapter,\r\n    mapsAdapter,\r\n} from \"./eurofurence.cache\";\r\nimport {\r\n    applyAnnouncementDetails,\r\n    applyDealerDetails,\r\n    applyEventDayDetails,\r\n    applyEventDetails,\r\n    applyEventRoomDetails,\r\n    applyEventTrackDetails,\r\n    applyImageDetails,\r\n    applyKnowledgeEntryDetails,\r\n    applyKnowledgeGroupDetails,\r\n    applyMapDetails,\r\n} from \"./eurofurence.details\";\r\nimport {\r\n    AnnouncementDetails,\r\n    AttendanceDay,\r\n    EventDayRecord,\r\n    EventDetails,\r\n    ImageDetails,\r\n    KnowledgeEntryRecord,\r\n    KnowledgeGroupRecord,\r\n    LinkFragment,\r\n    MapDetails,\r\n    MapEntryRecord,\r\n    RecordId,\r\n} from \"./eurofurence.types\";\r\nimport { RootState } from \"./index\";\r\n\r\ntype RecordSelectors<T> = EntitySelectors<T, RootState> & {\r\n    selectIds: (state: RootState) => RecordId[];\r\n};\r\n\r\n/**\r\n * Creates a new set of selectors from the passed entity selectors and the given apply function.\r\n * @param from The source selectors.\r\n * @param transform The transform function.\r\n */\r\nconst transformEntitySelector = <T, TResult>(from: EntitySelectors<T, RootState>, transform: (state: RootState, source: T) => TResult): RecordSelectors<TResult> => {\r\n    // Returns a bound transformation function.\r\n    const selectBound = (state: RootState) => (item: T) => transform(state, item);\r\n\r\n    // Redefined selectors.\r\n    const selectTotal = from.selectTotal;\r\n    const selectIds = createSelector([from.selectIds], (ids) => ids.filter((id: EntityId): id is RecordId => typeof id === \"string\"));\r\n    const selectEntities = createSelector([from.selectEntities, selectBound], (entities, bound) => mapValues(entities as LodashDictionary<T>, bound));\r\n    const selectAll = createSelector([from.selectAll, selectBound], (all, bound) => map(all, bound));\r\n    const selectById = createSelector([from.selectById, selectBound], (item, bound) => (item === undefined ? undefined : bound(item)));\r\n\r\n    // Returns combined object of them all.\r\n    return {\r\n        selectTotal,\r\n        selectIds,\r\n        selectEntities,\r\n        selectAll,\r\n        selectById,\r\n    };\r\n};\r\n\r\nexport const eventRoomsSelectors = transformEntitySelector(\r\n    eventRoomsAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.eventRooms),\r\n    applyEventRoomDetails\r\n);\r\nexport const eventTracksSelectors = transformEntitySelector(\r\n    eventTracksAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.eventTracks),\r\n    applyEventTrackDetails\r\n);\r\nexport const knowledgeGroupsSelectors = transformEntitySelector(\r\n    knowledgeGroupsAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.knowledgeGroups),\r\n    applyKnowledgeGroupDetails\r\n);\r\nexport const knowledgeEntriesSelectors = transformEntitySelector(\r\n    knowledgeEntriesAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.knowledgeEntries),\r\n    applyKnowledgeEntryDetails\r\n);\r\nexport const imagesSelectors = transformEntitySelector(\r\n    imagesAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.images),\r\n    applyImageDetails\r\n);\r\nexport const eventDaysSelectors = transformEntitySelector(\r\n    eventDaysAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.eventDays),\r\n    applyEventDayDetails\r\n);\r\nexport const eventsSelector = transformEntitySelector(\r\n    eventsAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.events),\r\n    applyEventDetails\r\n);\r\nexport const announcementsSelectors = transformEntitySelector(\r\n    announcementsAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.announcements),\r\n    applyAnnouncementDetails\r\n);\r\nexport const mapsSelectors = transformEntitySelector(\r\n    mapsAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.maps),\r\n    applyMapDetails\r\n);\r\nexport const dealersSelectors = transformEntitySelector(\r\n    dealersAdapter.getSelectors<RootState>((state) => state.eurofurenceCache.dealers),\r\n    applyDealerDetails\r\n);\r\n\r\nexport const selectCountdownTitle = createSelector([eventDaysSelectors.selectAll, (days, now: Moment) => now, (days, now: Moment, t: TFunction) => t], (days, now, t): string => {\r\n    const firstDay: EventDayRecord | undefined = _.chain(days)\r\n        .orderBy((it) => it.Date, \"asc\")\r\n        .first()\r\n        .value();\r\n    const lastDay: EventDayRecord | undefined = _.chain(days)\r\n        .orderBy((it) => it.Date, \"desc\")\r\n        .last()\r\n        .value();\r\n    const currentDay: EventDayRecord | undefined = days.find((it) => now.isSame(it.Date, \"day\"));\r\n\r\n    if (currentDay) {\r\n        return currentDay.Name;\r\n    } else if (firstDay && now.isBefore(firstDay.Date, \"day\")) {\r\n        const diff = moment.duration(now.diff(firstDay.Date)).humanize();\r\n        return t(\"before_event\", { conName, diff });\r\n    } else if (lastDay && now.isAfter(lastDay.Date, \"day\")) {\r\n        return t(\"after_event\");\r\n    } else {\r\n        return \"\";\r\n    }\r\n});\r\n\r\nexport const selectFavoriteEvents = createSelector([eventsSelector.selectAll, (state: RootState) => state.background.notifications], (events, notifications): EventDetails[] =>\r\n    _.chain(notifications)\r\n        .filter((it) => it.type === \"EventReminder\")\r\n        .map((it): EventDetails | undefined => events.find((event) => event.Id === it.recordId))\r\n        .filter((it): it is EventDetails => it !== undefined)\r\n        .orderBy((it) => it.StartDateTimeUtc, \"asc\")\r\n        .value()\r\n);\r\n\r\nexport const selectUpcomingFavoriteEvents = createSelector([selectFavoriteEvents, (state, now: Moment) => now], (events, now) =>\r\n    events.filter((it) => now.isSame(it.StartDateTimeUtc, \"day\")).filter((it) => now.isBefore(it.EndDateTimeUtc))\r\n);\r\n\r\nexport const filterCurrentEvents = <T extends Pick<EventDetails, \"StartDateTimeUtc\" | \"EndDateTimeUtc\">>(events: T[], now: Moment) =>\r\n    events.filter((it) => {\r\n        return now.isBetween(it.StartDateTimeUtc, it.EndDateTimeUtc);\r\n    });\r\nexport const selectCurrentEvents = createSelector([eventsSelector.selectAll, (events, now: Moment) => now], (events, now) => filterCurrentEvents(events, now));\r\n\r\nexport const selectEventsByRoom = createSelector(\r\n    [eventsSelector.selectAll, eventDaysSelectors.selectEntities, eventTracksSelectors.selectEntities, eventRoomsSelectors.selectEntities, (state, itemId: RecordId) => itemId],\r\n    (events, days, tracks, rooms, itemId) => events.filter((it) => it?.ConferenceRoomId === itemId)\r\n);\r\nexport const selectEventsByTrack = createSelector(\r\n    [eventsSelector.selectAll, eventDaysSelectors.selectEntities, eventTracksSelectors.selectEntities, eventRoomsSelectors.selectEntities, (state, itemId: RecordId) => itemId],\r\n    (events, days, tracks, rooms, itemId) => events.filter((it) => it?.ConferenceTrackId === itemId)\r\n);\r\nexport const selectEventsByDay = createSelector(\r\n    [eventsSelector.selectAll, eventDaysSelectors.selectEntities, eventTracksSelectors.selectEntities, eventRoomsSelectors.selectEntities, (state, itemId: RecordId) => itemId],\r\n    (events, days, tracks, rooms, itemId) => events.filter((it) => it?.ConferenceDayId === itemId)\r\n);\r\n\r\nexport const filterUpcomingEvents = <T extends Pick<EventDetails, \"StartDateTimeUtc\">>(events: T[], now: Moment) =>\r\n    events.filter((it) => {\r\n        const startMoment = moment(it.StartDateTimeUtc, true).subtract(30, \"minutes\");\r\n        const endMoment = moment(it.StartDateTimeUtc, true);\r\n        return now.isBetween(startMoment, endMoment);\r\n    });\r\nexport const selectUpcomingEvents = createSelector([eventsSelector.selectAll, (state, now: Moment) => now], (events, now) => filterUpcomingEvents(events, now));\r\n\r\nexport const filterActiveAnnouncements = <T extends Pick<AnnouncementDetails, \"ValidUntilDateTimeUtc\" | \"ValidFromDateTimeUtc\">>(announcements: T[], now: Moment) =>\r\n    announcements.filter((it) => now.isBetween(it.ValidFromDateTimeUtc, it.ValidUntilDateTimeUtc, \"minute\"));\r\nexport const selectActiveAnnouncements = createSelector([announcementsSelectors.selectAll, (state, now: Moment) => now], (announcements, now) =>\r\n    filterActiveAnnouncements(announcements, now)\r\n);\r\n\r\nexport const selectDealersByDayName = createSelector([dealersSelectors.selectAll, eventDaysSelectors.selectEntities, (state, day: AttendanceDay) => day], (dealers, days, day) =>\r\n    dealers.filter((it) => {\r\n        if (day === \"thu\") return it.AttendsOnThursday;\r\n        if (day === \"fri\") return it.AttendsOnFriday;\r\n        if (day === \"sat\") return it.AttendsOnSaturday;\r\n        return false;\r\n    })\r\n);\r\n\r\nexport const filterBrowseableMaps = <T extends Pick<MapDetails, \"IsBrowseable\">>(maps: T[]) => maps.filter((it) => it.IsBrowseable);\r\nexport const selectBrowseableMaps = createSelector(mapsSelectors.selectAll, (state) => filterBrowseableMaps(state));\r\n\r\nexport const selectValidLinksByTarget = createSelector(\r\n    [mapsSelectors.selectAll, (state, target: RecordId) => target],\r\n    (maps, target): { map: MapDetails; entry: MapEntryRecord; link: LinkFragment }[] =>\r\n        chain(maps)\r\n            .flatMap((map) => map.Entries.map((entry) => ({ map, entry })))\r\n            .flatMap(({ map, entry }) => entry.Links.map((link) => ({ map, entry, link })))\r\n            .filter(({ link }) => target === link.Target)\r\n            .value()\r\n);\r\n\r\n/**\r\n * Selects all knowledge items in a sorted manner that is ready for a section list.\r\n */\r\nexport const selectKnowledgeItems = createSelector(\r\n    [knowledgeGroupsSelectors.selectAll, knowledgeEntriesSelectors.selectAll],\r\n    (groups, entries): (KnowledgeGroupRecord & { entries: KnowledgeEntryRecord[] })[] => {\r\n        return _.chain(groups)\r\n            .orderBy((it) => it.Order)\r\n            .map((group) => ({\r\n                ...group,\r\n                entries: _.chain(entries)\r\n                    .filter((entry) => entry.KnowledgeGroupId === group.Id)\r\n                    .orderBy((it) => it.Order)\r\n                    .value(),\r\n            }))\r\n            .value();\r\n    }\r\n);\r\n\r\nexport const selectKnowledgeItemsSections = createSelector(selectKnowledgeItems, (items): SectionListData<KnowledgeEntryRecord, KnowledgeGroupRecord>[] =>\r\n    items.map((it) => ({\r\n        ...it,\r\n        data: it.entries,\r\n    }))\r\n);\r\n\r\nexport const selectIsSynchronized = createSelector(\r\n    (state: RootState) => state.eurofurenceCache.state,\r\n    (state) => state === \"refreshing\"\r\n);\r\n\r\nexport const selectImagesById = createSelector([imagesSelectors.selectEntities, (state, imageIds: RecordId[]) => imageIds], (images, imageIds): ImageDetails[] =>\r\n    imageIds.map((it) => images[it]).filter((it): it is ImageDetails => it !== undefined)\r\n);\r\n","import * as React from \"react\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { Image, ImageStyle, StyleProp, StyleSheet } from \"react-native\";\r\n\r\nimport { ImageDetails } from \"../../store/eurofurence.types\";\r\n\r\nexport type BannerProps = {\r\n    /**\r\n     * The style button.\r\n     */\r\n    style?: StyleProp<ImageStyle>;\r\n\r\n    /**\r\n     * The source image object.\r\n     */\r\n    image?: ImageDetails;\r\n};\r\n\r\nexport const Banner: FC<BannerProps> = ({ style, image }) => {\r\n    // Do not render if nothing given.\r\n    if (!image) return null;\r\n\r\n    const aspect = useMemo<ImageStyle>(() => (!image ? {} : { aspectRatio: image.Width / image.Height }), [image]);\r\n\r\n    return <Image style={[styles.image, aspect, style]} resizeMode={undefined} source={{ uri: image.FullUrl }} />;\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    image: {\r\n        width: \"100%\",\r\n        height: undefined,\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport React, { FC, useMemo } from \"react\";\r\nimport { ColorValue, StyleSheet, TextProps, View, ViewProps, ViewStyle } from \"react-native\";\r\n\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Label, LabelProps } from \"../Atoms/Label\";\r\nimport { Row } from \"./Row\";\r\n\r\nconst iconSize = 32; // Matches H1 font size.\r\n\r\nexport type BadgeInvPadProps = ViewProps & {\r\n    padding: number;\r\n    badgeColor: ColorValue;\r\n    textColor: ColorValue;\r\n    textType?: LabelProps[\"type\"];\r\n    textVariant?: LabelProps[\"variant\"];\r\n    icon?: IconNames;\r\n    children: TextProps[\"children\"];\r\n};\r\n\r\nexport const BadgeInvPad: FC<BadgeInvPadProps> = ({ padding, badgeColor, textColor, textType = \"h3\", textVariant = \"middle\", icon, children }) => {\r\n    const styleContainer = useMemo<ViewStyle>(() => ({ marginHorizontal: -padding, backgroundColor: badgeColor }), [padding, badgeColor]);\r\n    const styleContent = useMemo<ViewStyle>(() => ({ paddingVertical: 10, paddingHorizontal: padding }), [padding]);\r\n\r\n    return (\r\n        <View style={styleContainer}>\r\n            <Row style={[styles.content, styleContent]}>\r\n                {!icon ? null : <Icon name={icon} size={iconSize} color={textColor} />}\r\n                <Label style={styles.text} color={textColor} ml={10} type={textType} variant={textVariant}>\r\n                    {children}\r\n                </Label>\r\n            </Row>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    content: {\r\n        paddingVertical: 10,\r\n    },\r\n    text: {\r\n        flex: 1,\r\n    },\r\n});\r\n","import * as React from \"react\";\r\nimport { FC, useMemo, useState } from \"react\";\r\nimport { Image, ImageStyle, StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { ImageDetails } from \"../../store/eurofurence.types\";\r\n\r\nconst initialSize = { width: 400, height: 300 };\r\n\r\nexport type ImageFillTarget = {\r\n    x: number;\r\n    y: number;\r\n    size: number;\r\n};\r\n\r\nexport type ImageFillProps = {\r\n    /**\r\n     * The style button.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * The source image object.\r\n     */\r\n    image?: ImageDetails;\r\n\r\n    /**\r\n     * The targeted point and the dimension to make visible.\r\n     */\r\n    target?: ImageFillTarget;\r\n};\r\n\r\nexport const ImageFill: FC<ImageFillProps> = ({ style, image, target }) => {\r\n    const [size, setSize] = useState<{ width: number; height: number }>(initialSize);\r\n\r\n    const arrangerStyle = useMemo<ViewStyle>(() => {\r\n        if (!target) return StyleSheet.absoluteFillObject;\r\n\r\n        const scale = Math.max(size.width, size.height) / target.size;\r\n\r\n        return {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            transform: [{ scale }],\r\n        };\r\n    }, [target]);\r\n\r\n    const imageStyle = useMemo<ImageStyle>(() => {\r\n        if (!image) return {};\r\n\r\n        // Unscaled if no section given.\r\n        if (!target) {\r\n            return {\r\n                position: \"absolute\",\r\n                left: 0,\r\n                top: 0,\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                resizeMode: \"cover\",\r\n            };\r\n        }\r\n\r\n        // Section, scale and translate around center.\r\n        return {\r\n            position: \"absolute\",\r\n            left: 0,\r\n            top: 0,\r\n            width: image.Width,\r\n            height: image.Height,\r\n            transform: [{ translateX: size.width / 2 - target.x }, { translateY: size.height / 2 - target.y }],\r\n        };\r\n    }, [size, image, target]);\r\n\r\n    // Do not render if nothing given.\r\n    if (!image) return null;\r\n\r\n    return (\r\n        <View style={[StyleSheet.absoluteFill, style]} onLayout={(e) => setSize(e.nativeEvent.layout)}>\r\n            <View style={arrangerStyle}>\r\n                <Image style={imageStyle} resizeMode={undefined} source={{ uri: image.FullUrl }} />\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport * as React from \"react\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { ColorValue, StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Theme, useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\n\r\nexport type MarkerProps = {\r\n    style?: StyleProp<ViewStyle>;\r\n    markerColor?: keyof Theme | ColorValue;\r\n    markerType?: IconNames;\r\n    markerSize?: number;\r\n};\r\n\r\nexport const Marker: FC<MarkerProps> = ({ style, markerColor = \"marker\", markerType = \"map-marker\", markerSize = 40 }) => {\r\n    const theme = useTheme();\r\n    const color = useMemo(() => (typeof markerColor === \"string\" && markerColor in theme ? theme[markerColor] : markerColor), [theme, markerColor]);\r\n\r\n    return (\r\n        <View style={[styles.container, style]}>\r\n            <View style={styles.content}>\r\n                <Icon style={styles.shadow} name={markerType} color={theme.darken} size={markerSize} />\r\n                <Icon style={styles.marker} name={markerType} color={color} size={markerSize} />\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        position: \"absolute\",\r\n        width: 0,\r\n        height: 0,\r\n        alignItems: \"center\",\r\n    },\r\n    content: {\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n    },\r\n    marker: {},\r\n    shadow: {\r\n        position: \"absolute\",\r\n        transform: [{ translateX: 2 }, { translateY: 2 }],\r\n    },\r\n});\r\n","import * as React from \"react\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { ColorValue, StyleProp, StyleSheet, TouchableOpacity, ViewStyle } from \"react-native\";\r\n\r\nimport { Theme, useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { ImageFill, ImageFillProps } from \"../Atoms/ImageFill\";\r\nimport { Marker } from \"../Atoms/Marker\";\r\n\r\n/**\r\n * Arguments to the button.\r\n */\r\nexport type ImageButtonProps = {\r\n    /**\r\n     * The style button.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * The source image object.\r\n     */\r\n    image: ImageFillProps[\"image\"];\r\n\r\n    /**\r\n     * The targeted point and the dimension to make visible.\r\n     */\r\n    target: ImageFillProps[\"target\"];\r\n\r\n    /**\r\n     * True if no indicator should be displayed.\r\n     */\r\n    noMarker?: boolean;\r\n    markerColor?: keyof Theme | ColorValue;\r\n    markerType?: IconNames;\r\n    markerSize?: number;\r\n\r\n    /**\r\n     * If given, invoked on button press.\r\n     */\r\n    onPress?: () => void;\r\n\r\n    /**\r\n     * If given, invoked on long press.\r\n     */\r\n    onLongPress?: () => void;\r\n};\r\n\r\nexport const ImageExButton: FC<ImageButtonProps> = ({ style, image, target, noMarker = false, markerColor, markerType, markerSize, onPress, onLongPress }) => {\r\n    const theme = useTheme();\r\n\r\n    const styleBackground = useMemo<ViewStyle>(() => ({ backgroundColor: theme.inverted }), [theme]);\r\n\r\n    return (\r\n        <TouchableOpacity style={[styles.container, styleBackground, style]} onPress={onPress} onLongPress={onLongPress}>\r\n            <ImageFill image={image} target={target} />\r\n            {noMarker ? null : <Marker style={styles.marker} markerColor={markerColor} markerType={markerType} markerSize={markerSize} />}\r\n        </TouchableOpacity>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        minHeight: 160,\r\n        borderRadius: 16,\r\n        overflow: \"hidden\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    marker: {\r\n        left: \"50%\",\r\n        top: \"50%\",\r\n    },\r\n});\r\n","import moment, { Moment } from \"moment\";\r\nimport { useCallback, useMemo } from \"react\";\r\n\r\nimport { useAppSelector } from \"../store\";\r\n\r\n/**\r\n * Get the current date, which includes time travelling.\r\n */\r\nexport const useNow = (): [Moment, () => Moment] => {\r\n    const amount = useAppSelector((state) => (state.timetravel.enabled ? state.timetravel.amount : 0));\r\n\r\n    const getNow = useCallback(() => moment().add(amount, \"millisecond\"), [amount]);\r\n    const now = useMemo(() => getNow(), [getNow]);\r\n\r\n    return [now, getNow];\r\n};\r\n","import React, { FC, memo, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Image, ImageSourcePropType, StyleSheet, TouchableOpacity, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { appStyles } from \"../AppStyles\";\r\n\r\nexport type DealerCardContentProps = {\r\n    avatar?: ImageSourcePropType;\r\n    name: string;\r\n    present: boolean;\r\n    merchandise?: string;\r\n    offDays?: string;\r\n    onPress?: () => void;\r\n    onLongPress?: () => void;\r\n};\r\n\r\nexport const DealerCardContent: FC<DealerCardContentProps> = memo(({ avatar, name, present, merchandise, offDays, onPress, onLongPress }) => {\r\n    const { t } = useTranslation(\"Dealers\");\r\n    const theme = useTheme();\r\n    const backgroundStyle = useMemo<ViewStyle>(() => ({ backgroundColor: theme.background }), [theme]);\r\n    const stylePre = useMemo<ViewStyle>(() => ({ backgroundColor: present ? theme.primary : theme.darken }), [present, theme]);\r\n\r\n    return (\r\n        <TouchableOpacity style={[styles.container, appStyles.shadow, backgroundStyle]} onPress={onPress} onLongPress={onLongPress}>\r\n            {!avatar ? null : (\r\n                <View style={[styles.pre, stylePre]}>\r\n                    <Image style={styles.avatarCircle} source={avatar} resizeMode=\"contain\" />\r\n                </View>\r\n            )}\r\n\r\n            <View style={styles.main}>\r\n                <Label type=\"h3\">{name}</Label>\r\n\r\n                {!merchandise ? null : (\r\n                    <Label type=\"h4\" variant=\"narrow\" ellipsizeMode=\"tail\" numberOfLines={2}>\r\n                        {merchandise}\r\n                    </Label>\r\n                )}\r\n\r\n                {!offDays ? null : (\r\n                    <Label style={styles.tag} type=\"regular\" ellipsizeMode=\"head\" numberOfLines={1}>\r\n                        {t(\"not_attending_on\", { offDays })}\r\n                    </Label>\r\n                )}\r\n            </View>\r\n        </TouchableOpacity>\r\n    );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        minHeight: 80,\r\n        marginVertical: 15,\r\n        borderRadius: 16,\r\n        overflow: \"hidden\",\r\n        flexDirection: \"row\",\r\n    },\r\n    background: {\r\n        position: \"absolute\",\r\n        width: undefined,\r\n        height: undefined,\r\n    },\r\n    pre: {\r\n        overflow: \"hidden\",\r\n        width: 80,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    avatarCircle: {\r\n        position: \"absolute\",\r\n        width: 70,\r\n        height: 70,\r\n        borderRadius: 35,\r\n    },\r\n    image: {\r\n        position: \"absolute\",\r\n        width: undefined,\r\n        height: undefined,\r\n        left: -10,\r\n        top: -10,\r\n        right: -10,\r\n        bottom: -10,\r\n    },\r\n    imageOverlay: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n    },\r\n    main: {\r\n        flex: 1,\r\n        padding: 16,\r\n    },\r\n    tag: {\r\n        textAlign: \"right\",\r\n    },\r\n});\r\n","import moment from \"moment\";\r\nimport React, { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { DealerDetails } from \"../../store/eurofurence.types\";\r\nimport { DealerCardContent } from \"./DealerCardContent\";\r\n\r\nexport type DealerCardProps = {\r\n    dealer: DealerDetails;\r\n    onPress?: () => void;\r\n    onLongPress?: () => void;\r\n};\r\n\r\nexport const DealerCard: FC<DealerCardProps> = ({ dealer, onPress, onLongPress }) => {\r\n    const { t } = useTranslation(\"Dealer\");\r\n    const [now] = useNow();\r\n\r\n    const avatar = useMemo(() => {\r\n        if (dealer.ArtistThumbnail) return { uri: dealer.ArtistThumbnail.FullUrl };\r\n        else if (dealer.Artist) return { uri: dealer.Artist.FullUrl };\r\n        else return require(\"../../../assets/images/dealer_black.png\");\r\n    }, [dealer]);\r\n    const present = useMemo(() => Boolean(dealer.AttendanceDays.find((day) => now.isSame(day.Date, \"day\"))), [dealer, now]);\r\n\r\n    const offDays = useMemo(() => {\r\n        return [\r\n            !dealer.AttendsOnThursday && moment().day(4).format(\"dddd\"),\r\n            !dealer.AttendsOnFriday && moment().day(5).format(\"dddd\"),\r\n            !dealer.AttendsOnSaturday && moment().day(6).format(\"dddd\"),\r\n        ]\r\n            .filter(Boolean)\r\n            .join(\", \");\r\n    }, [dealer, t]);\r\n\r\n    return (\r\n        <DealerCardContent\r\n            avatar={avatar}\r\n            name={dealer.FullName}\r\n            present={present}\r\n            merchandise={dealer.Merchandise}\r\n            offDays={offDays}\r\n            onPress={onPress}\r\n            onLongPress={onLongPress}\r\n        />\r\n    );\r\n};\r\n","import { FC } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { match } from \"ts-pattern\";\r\n\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { dealersSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { LinkFragment, MapDetails, MapEntryDetails } from \"../../store/eurofurence.types\";\r\nimport { DealerCard } from \"../Dealers/DealerCard\";\r\n\r\ntype LinkItemProps = {\r\n    map?: MapDetails;\r\n    entry?: MapEntryDetails;\r\n    link: LinkFragment;\r\n};\r\n\r\nconst DealerLinkItem: FC<LinkItemProps> = ({ link }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const dealer = useAppSelector((state) => dealersSelectors.selectById(state, link.Target));\r\n\r\n    if (dealer === undefined) {\r\n        return null;\r\n    }\r\n\r\n    return <DealerCard dealer={dealer} onPress={() => navigation.navigate(\"Dealer\", { id: link.Target })} />;\r\n};\r\n\r\nconst WebExternalLinkItem: FC<LinkItemProps> = ({ link }) => {\r\n    return (\r\n        <Button onPress={() => Linking.openURL(link.Target)} icon={\"web\"}>\r\n            {link.Name ? link.Name : link.Target}\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst MapEntryLinkItem: FC<LinkItemProps> = ({ map, entry, link }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    return !map || !entry ? null : (\r\n        <Button style={{ marginVertical: 5 }} onPress={() => navigation.navigate(\"Map\", { id: map.Id, entryId: entry.Id, linkId: entry?.Links.indexOf(link) })}>\r\n            {link.Name}\r\n        </Button>\r\n    );\r\n};\r\n\r\nconst EventConferenceRoomLinkItem: FC<LinkItemProps> = ({ map, entry, link }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    return !map || !entry ? null : (\r\n        <Button style={{ marginVertical: 5 }} onPress={() => navigation.navigate(\"Map\", { id: map.Id, entryId: entry.Id, linkId: entry?.Links.indexOf(link) })}>\r\n            {link.Name}\r\n        </Button>\r\n    );\r\n};\r\n\r\nexport const LinkItem: FC<LinkItemProps> = ({ map, entry, link }) => {\r\n    return match(link.FragmentType)\r\n        .with(\"DealerDetail\", () => <DealerLinkItem map={map} entry={entry} link={link} />)\r\n        .with(\"WebExternal\", () => <WebExternalLinkItem map={map} entry={entry} link={link} />)\r\n        .with(\"MapEntry\", () => <MapEntryLinkItem map={map} entry={entry} link={link} />)\r\n        .with(\"EventConferenceRoom\", () => <EventConferenceRoomLinkItem map={map} entry={entry} link={link} />)\r\n        .otherwise(() => null);\r\n};\r\n","import * as Linking from \"expo-linking\";\r\nimport moment from \"moment\";\r\nimport React, { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Image, StyleSheet, View } from \"react-native\";\r\n\r\nimport { Banner } from \"../../components/Atoms/Banner\";\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { BadgeInvPad } from \"../../components/Containers/BadgeInvPad\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { ImageExButton } from \"../../components/Containers/ImageButton\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectValidLinksByTarget } from \"../../store/eurofurence.selectors\";\r\nimport { DealerDetails } from \"../../store/eurofurence.types\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { LinkItem } from \"../Maps/LinkItem\";\r\n\r\n/**\r\n * Props to the content.\r\n */\r\nexport type DealerContentProps = {\r\n    dealer: DealerDetails;\r\n\r\n    /**\r\n     * The padding used by the parent horizontally.\r\n     */\r\n    parentPad?: number;\r\n};\r\n\r\nexport const DealerContent: FC<DealerContentProps> = ({ dealer, parentPad = 0 }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const { t } = useTranslation(\"Dealer\");\r\n    const [now] = useNow();\r\n    const theme = useTheme();\r\n\r\n    const mapLink = useAppSelector((state) => selectValidLinksByTarget(state, dealer.Id));\r\n\r\n    const days = useMemo(\r\n        () =>\r\n            dealer.AttendanceDays\r\n                // Convert to long representation.\r\n                .map((day) => moment(day.Date).format(\"dddd\"))\r\n                // Join comma separated.\r\n                .join(\", \"),\r\n        [dealer, t]\r\n    );\r\n\r\n    // Check if not-attending warning should be marked.\r\n    const markNotAttending = useMemo(() => {\r\n        if (now.day() === 4 && !dealer.AttendsOnThursday) return true;\r\n        else if (now.day() === 5 && !dealer.AttendsOnFriday) return true;\r\n        else if (now.day() === 6 && !dealer.AttendsOnSaturday) return true;\r\n        return false;\r\n    }, [now, dealer]);\r\n\r\n    return (\r\n        <>\r\n            {!markNotAttending ? null : (\r\n                <BadgeInvPad padding={parentPad} badgeColor={theme.warning} textColor={theme.invText}>\r\n                    {t(\"not_attending\")}\r\n                </BadgeInvPad>\r\n            )}\r\n\r\n            {!dealer.Artist ? null : (\r\n                <View style={[appStyles.shadow, styles.avatarCircle]}>\r\n                    <Image resizeMode=\"cover\" style={styles.avatarImage} source={{ uri: dealer.Artist.FullUrl }} />\r\n                </View>\r\n            )}\r\n\r\n            <Section icon=\"brush\" title={dealer.FullName} subtitle={`${dealer.AttendeeNickname} (${dealer.RegistrationNumber})`} />\r\n\r\n            <Label type=\"para\">{dealer.ShortDescription}</Label>\r\n\r\n            <Section icon=\"directions-fork\" title={t(\"about\")} />\r\n            <Label type=\"caption\">{t(\"attends\")}</Label>\r\n            <Label type=\"h3\" mb={20}>\r\n                {days}\r\n            </Label>\r\n\r\n            <Label type=\"caption\">{t(\"merchandise\")}</Label>\r\n            <Label type=\"h3\" mb={20}>\r\n                {dealer.Merchandise}\r\n            </Label>\r\n\r\n            {!dealer.IsAfterDark ? null : (\r\n                <>\r\n                    <Label type=\"caption\">{t(\"after_dark\")}</Label>\r\n                    <Label type=\"h3\" mb={20}>\r\n                        {t(\"in_after_dark\")}\r\n                    </Label>\r\n                </>\r\n            )}\r\n\r\n            {!dealer.Categories?.length ? null : (\r\n                <>\r\n                    <Label type=\"caption\">{t(\"categories\")}</Label>\r\n                    <Label type=\"h3\" mb={20}>\r\n                        {dealer.Categories?.join(\", \")}\r\n                    </Label>\r\n                </>\r\n            )}\r\n\r\n            {dealer.Links &&\r\n                dealer.Links.map((it) => (\r\n                    <View style={styles.button} key={it.Name}>\r\n                        <LinkItem link={it} />\r\n                    </View>\r\n                ))}\r\n\r\n            {dealer.TelegramHandle && (\r\n                <Button style={styles.button} onPress={() => Linking.openURL(`https://t.me/${dealer.TelegramHandle}`)}>\r\n                    Telegram: {dealer.TelegramHandle}\r\n                </Button>\r\n            )}\r\n            {dealer.TwitterHandle && (\r\n                <Button style={styles.button} onPress={() => Linking.openURL(`https://twitter.com/${dealer.TwitterHandle}`)} icon={\"twitter\"}>\r\n                    Twitter: {dealer.TwitterHandle}\r\n                </Button>\r\n            )}\r\n\r\n            {mapLink.map(({ map, entry, link }, i) => (\r\n                <ImageExButton\r\n                    key={i}\r\n                    image={map.Image}\r\n                    target={{ x: entry.X, y: entry.Y, size: entry.TapRadius * 10 }}\r\n                    onPress={() => navigation.navigate(\"Map\", { id: map.Id, entryId: entry.Id, linkId: entry.Links.indexOf(link) })}\r\n                />\r\n            ))}\r\n\r\n            {!dealer.AboutTheArtText && !dealer.ArtPreview ? null : (\r\n                <>\r\n                    <Section icon=\"film\" title={t(\"about_the_art\")} />\r\n\r\n                    {!dealer.ArtPreview ? null : (\r\n                        <View style={styles.posterLine}>\r\n                            <Banner image={dealer.ArtPreview} />\r\n\r\n                            <Label mt={10} type=\"caption\" numberOfLines={4} ellipsizeMode=\"tail\">\r\n                                {dealer.ArtPreviewCaption}\r\n                            </Label>\r\n                        </View>\r\n                    )}\r\n\r\n                    <Label type=\"para\">{dealer.AboutTheArtText}</Label>\r\n                </>\r\n            )}\r\n\r\n            {!dealer.AboutTheArtistText && !dealer.ArtistImageId ? null : (\r\n                <>\r\n                    <Section icon=\"account-circle-outline\" title={t(\"about_the_artist\", { name: dealer.FullName })} />\r\n\r\n                    {!dealer.Artist ? null : (\r\n                        <View style={styles.posterLine}>\r\n                            <Banner image={dealer.Artist} />\r\n                        </View>\r\n                    )}\r\n\r\n                    <Label type=\"para\">{dealer.AboutTheArtistText}</Label>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    avatarCircle: {\r\n        width: 120,\r\n        height: 120,\r\n        borderRadius: 60,\r\n        overflow: \"hidden\",\r\n        alignSelf: \"center\",\r\n        margin: 20,\r\n    },\r\n    avatarImage: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n    },\r\n    aboutLine: {\r\n        marginBottom: 20,\r\n    },\r\n    posterLine: {\r\n        marginBottom: 20,\r\n        alignItems: \"center\",\r\n    },\r\n    button: {\r\n        marginBottom: 20,\r\n    },\r\n});\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Floater, padFloater } from \"../../components/Containers/Floater\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useAppRoute } from \"../../hooks/useAppNavigation\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { dealersSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { DealerContent } from \"./DealerContent\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type DealerScreenParams = {\r\n    /**\r\n     * The ID, needed if the dealer is not passed explicitly, i.e., as an external link.\r\n     */\r\n    id: string;\r\n};\r\n\r\nexport const DealerScreen = () => {\r\n    const { t } = useTranslation(\"Dealer\");\r\n    const route = useAppRoute(\"Dealer\");\r\n    const dealer = useAppSelector((state) => dealersSelectors.selectById(state, route.params.id));\r\n    const safe = useSafeAreaInsets();\r\n\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]} stickyHeaderIndices={[0]} stickyHeaderHiddenOnScroll>\r\n            <Header>{dealer?.FullName ?? t(\"viewing_dealer\")}</Header>\r\n            <Floater contentStyle={appStyles.trailer}>{!dealer ? null : <DealerContent dealer={dealer} parentPad={padFloater} />}</Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport moment from \"moment\";\r\nimport React, { FC, useCallback } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Share, StyleSheet, View } from \"react-native\";\r\n\r\nimport { Banner } from \"../../components/Atoms/Banner\";\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { MarkdownContent } from \"../../components/Atoms/MarkdownContent\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { BadgeInvPad } from \"../../components/Containers/BadgeInvPad\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { ImageExButton } from \"../../components/Containers/ImageButton\";\r\nimport { Row } from \"../../components/Containers/Row\";\r\nimport { appBase, conAbbr } from \"../../configuration\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useEventReminder } from \"../../hooks/useEventReminder\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectValidLinksByTarget } from \"../../store/eurofurence.selectors\";\r\nimport { EventDetails } from \"../../store/eurofurence.types\";\r\n\r\n/**\r\n * Props to the content.\r\n */\r\nexport type EventContentProps = {\r\n    /**\r\n     * The event to display.\r\n     */\r\n    event: EventDetails;\r\n\r\n    /**\r\n     * The padding used by the parent horizontally.\r\n     */\r\n    parentPad?: number;\r\n};\r\n\r\nexport const EventContent: FC<EventContentProps> = ({ event, parentPad = 0 }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n\r\n    const { t } = useTranslation(\"Event\");\r\n    const { isFavorited, toggleReminder } = useEventReminder(event);\r\n    const theme = useTheme();\r\n\r\n    const day = event.ConferenceDay;\r\n    const track = event.ConferenceTrack;\r\n    const room = event.ConferenceRoom;\r\n\r\n    const mapLink = useAppSelector((state) => (!room ? undefined : selectValidLinksByTarget(state, room.Id)));\r\n\r\n    const shareEvent = useCallback(() => {\r\n        Share.share(\r\n            {\r\n                title: event.Title,\r\n                url: `${appBase}/Web/Events/${event.Id}`,\r\n                message: `Check out ${event.Title} on ${conAbbr}!\\n${appBase}/Web/Events/${event.Id}`,\r\n            },\r\n            {}\r\n        );\r\n    }, [event]);\r\n\r\n    return (\r\n        <>\r\n            {!event.SuperSponsorOnly ? null : (\r\n                <BadgeInvPad padding={parentPad} badgeColor={theme.superSponsor} textColor={theme.superSponsorText}>\r\n                    {t(\"supersponsor_event\")}\r\n                </BadgeInvPad>\r\n            )}\r\n\r\n            {!event.SponsorOnly ? null : (\r\n                <BadgeInvPad padding={parentPad} badgeColor={theme.sponsor} textColor={theme.sponsorText}>\r\n                    {t(\"sponsor_event\")}\r\n                </BadgeInvPad>\r\n            )}\r\n\r\n            {!event.Poster ? null : (\r\n                <View style={styles.posterLine}>\r\n                    <Banner image={event.Poster} />\r\n                </View>\r\n            )}\r\n\r\n            <Section icon={isFavorited ? \"heart\" : event.Glyph} title={event.Title ?? \"\"} subtitle={event.SubTitle} />\r\n            <MarkdownContent defaultType=\"para\" mb={20}>\r\n                {event.Abstract}\r\n            </MarkdownContent>\r\n\r\n            {!event.MaskRequired ? null : (\r\n                <Row variant={\"center\"} style={{ marginBottom: 20 }}>\r\n                    <Icon name={\"face-mask\"} style={{ flexGrow: 1 }} size={20} color={theme.secondary} />\r\n                    <Label type=\"para\" style={{ flexGrow: 9 }} color={theme.secondary}>\r\n                        {t(\"mask_required\")}\r\n                    </Label>\r\n                </Row>\r\n            )}\r\n\r\n            <Row>\r\n                <Button style={styles.rowLeft} outline={isFavorited} icon={isFavorited ? \"heart-outline\" : \"heart\"} onPress={toggleReminder}>\r\n                    {isFavorited ? t(\"remove_favorite\") : t(\"add_favorite\")}\r\n                </Button>\r\n                <Button style={styles.rowRight} icon={\"share\"} onPress={shareEvent}>\r\n                    {t(\"share\")}\r\n                </Button>\r\n            </Row>\r\n\r\n            {event.IsAcceptingFeedback && (\r\n                <Button style={styles.share} icon=\"pencil\" onPress={() => navigation.navigate(\"EventFeedback\", { id: event.Id })}>\r\n                    {t(\"give_feedback\")}\r\n                </Button>\r\n            )}\r\n\r\n            <Section icon=\"directions-fork\" title={t(\"about_title\")} />\r\n            <Label type=\"caption\">{t(\"label_event_panelhosts\")}</Label>\r\n            <Label type=\"h3\" mb={20}>\r\n                {event.PanelHosts}\r\n            </Label>\r\n\r\n            <Label type=\"caption\">{t(\"label_event_when\")}</Label>\r\n            <Label type=\"h3\" mb={20}>\r\n                {t(\"when\", { day: day && moment(day.Date).format(\"dddd\"), start: moment(event.StartDateTimeUtc).format(\"LT\"), finish: moment(event.EndDateTimeUtc).format(\"LT\") })}\r\n            </Label>\r\n\r\n            <Label type=\"caption\">{t(\"label_event_track\")}</Label>\r\n            <Label type=\"h3\" mb={20}>\r\n                {track?.Name || \" \"}\r\n            </Label>\r\n\r\n            <Label type=\"caption\">{t(\"label_event_room\")}</Label>\r\n            <Label type=\"h3\" mb={20}>\r\n                {room?.Name || \" \"}\r\n            </Label>\r\n\r\n            {!mapLink\r\n                ? null\r\n                : mapLink.map(({ map, entry, link }, i) => (\r\n                      <ImageExButton\r\n                          key={i}\r\n                          image={map.Image}\r\n                          target={{ x: entry.X, y: entry.Y, size: entry.TapRadius * 10 }}\r\n                          onPress={() => navigation.navigate(\"Map\", { id: map.Id, entryId: entry.Id, linkId: entry.Links.indexOf(link) })}\r\n                      />\r\n                  ))}\r\n\r\n            <Section icon=\"information\" title={t(\"label_event_description\")} />\r\n            <MarkdownContent defaultType=\"para\">{event.Description}</MarkdownContent>\r\n        </>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    rowLeft: {\r\n        flex: 1,\r\n        marginRight: 8,\r\n    },\r\n    rowRight: {\r\n        flex: 1,\r\n        marginLeft: 8,\r\n    },\r\n    share: {\r\n        marginVertical: 15,\r\n    },\r\n    posterLine: {\r\n        marginTop: 20,\r\n        alignItems: \"center\",\r\n    },\r\n});\r\n","import * as Notifications from \"expo-notifications\";\r\nimport moment from \"moment\";\r\nimport { useCallback, useMemo } from \"react\";\r\nimport { Platform } from \"react-native\";\r\n\r\nimport { useAppDispatch, useAppSelector } from \"../store\";\r\nimport { addNotification, Notification, removeNotification } from \"../store/background.slice\";\r\nimport { EventRecord } from \"../store/eurofurence.types\";\r\n\r\nexport const useEventReminder = (event: EventRecord) => {\r\n    const dispatch = useAppDispatch();\r\n    const timetravel = useAppSelector((state) => state.timetravel.amount);\r\n    const notificationEntry = useAppSelector((state) => state.background.notifications.find((it) => it.recordId === event.Id));\r\n\r\n    const createReminder = useCallback(() => {\r\n        const scheduleDate = moment(event.StartDateTimeUtc).subtract(timetravel, \"milliseconds\").subtract(30, \"minutes\");\r\n        const notification: Notification = {\r\n            recordId: event.Id,\r\n            type: \"EventReminder\",\r\n            dateCreated: moment().toISOString(),\r\n            dateScheduled: scheduleDate.toISOString(),\r\n        };\r\n\r\n        if (Platform.OS === \"android\" || Platform.OS === \"ios\") {\r\n            Notifications.scheduleNotificationAsync({\r\n                identifier: notification.recordId,\r\n                content: {\r\n                    title: event.Title,\r\n                    subtitle: \"This event is starting soon!\",\r\n                },\r\n                trigger: {\r\n                    date: scheduleDate.toDate(),\r\n                    channelId: \"event_reminders\",\r\n                },\r\n            });\r\n        }\r\n\r\n        dispatch(addNotification(notification));\r\n    }, [event, timetravel]);\r\n\r\n    const removeReminder = useCallback(() => {\r\n        if (Platform.OS === \"android\" || Platform.OS === \"ios\") {\r\n            Notifications.cancelScheduledNotificationAsync(event.Id);\r\n        }\r\n        dispatch(removeNotification(event.Id));\r\n    }, [event]);\r\n\r\n    const toggleReminder = useMemo(() => (notificationEntry ? removeReminder : createReminder), [notificationEntry, createReminder, removeReminder]);\r\n    return {\r\n        isFavorited: Boolean(notificationEntry),\r\n        createReminder,\r\n        removeReminder,\r\n        toggleReminder,\r\n    };\r\n};\r\n","import { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Floater, padFloater } from \"../../components/Containers/Floater\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useAppRoute } from \"../../hooks/useAppNavigation\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventsSelector } from \"../../store/eurofurence.selectors\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { EventContent } from \"./EventContent\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type EventScreenParams = {\r\n    /**\r\n     * The ID, needed if the event is not passed explicitly, i.e., as an external link.\r\n     */\r\n    id: string;\r\n};\r\n\r\nexport const EventScreen = () => {\r\n    const safe = useSafeAreaInsets();\r\n    const route = useAppRoute(\"Event\");\r\n    const event = useAppSelector((state) => eventsSelector.selectById(state, route.params.id));\r\n\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]} stickyHeaderIndices={[0]} stickyHeaderHiddenOnScroll>\r\n            <Header>{event?.Title ?? \"Viewing event\"}</Header>\r\n            <Floater contentStyle={appStyles.trailer}>{!event ? null : <EventContent event={event} parentPad={padFloater} />}</Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useCallback, useEffect } from \"react\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, TextInput } from \"react-native\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\nimport StarRating from \"react-native-star-rating-widget\";\r\nimport { z } from \"zod\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Col } from \"../../components/Containers/Col\";\r\nimport { Floater } from \"../../components/Containers/Floater\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useAppNavigation, useAppRoute } from \"../../hooks/useAppNavigation\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventsSelector } from \"../../store/eurofurence.selectors\";\r\nimport { useSubmitEventFeedbackMutation } from \"../../store/eurofurence.service\";\r\n\r\nconst feedbackForm = z.object({\r\n    rating: z.preprocess((a) => parseInt(z.string().parse(a), 10), z.number().min(1).max(5)),\r\n    message: z.string().optional(),\r\n});\r\n\r\ntype FeedbackForm = z.infer<typeof feedbackForm>;\r\n\r\nexport const FeedbackScreen = () => {\r\n    const theme = useTheme();\r\n    const navigation = useAppNavigation(\"EventFeedback\");\r\n    const [submitFeedback, feedbackResult] = useSubmitEventFeedbackMutation();\r\n    const { t } = useTranslation(\"EventFeedback\");\r\n    const { control, handleSubmit } = useForm<FeedbackForm>({\r\n        resolver: zodResolver(feedbackForm),\r\n        defaultValues: {\r\n            rating: undefined,\r\n            message: undefined,\r\n        },\r\n    });\r\n\r\n    const safe = useSafeAreaInsets();\r\n    const { params } = useAppRoute(\"EventFeedback\");\r\n    const event = useAppSelector((state) => eventsSelector.selectById(state, params.id));\r\n\r\n    const submit = useCallback((data: FeedbackForm) => {\r\n        submitFeedback({\r\n            ...data,\r\n            eventId: event!.Id,\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (feedbackResult.isSuccess) {\r\n            navigation.goBack();\r\n        }\r\n    }, [feedbackResult]);\r\n\r\n    return (\r\n        <ScrollView style={safe} stickyHeaderIndices={[0]}>\r\n            <Header>{t(\"header\", { eventTitle: event?.Title })}</Header>\r\n            <Floater containerStyle={{ marginTop: 10 }}>\r\n                <Label variant={\"narrow\"}>{t(\"explanation\", { eventTitle: event?.Title })}</Label>\r\n\r\n                <Controller\r\n                    control={control}\r\n                    name={\"rating\"}\r\n                    rules={{\r\n                        required: true,\r\n                    }}\r\n                    render={({ field, fieldState }) => (\r\n                        <Col type={\"stretch\"}>\r\n                            <Label variant={\"bold\"} mt={16}>\r\n                                {t(\"rating_title\")}\r\n                            </Label>\r\n                            <StarRating\r\n                                rating={field.value}\r\n                                onChange={field.onChange}\r\n                                minRating={1}\r\n                                enableHalfStar={false}\r\n                                color={theme.secondary}\r\n                                style={styles.star}\r\n                                starSize={52}\r\n                            />\r\n                            {fieldState.error && <Label style={styles.error}>{fieldState.error.message}</Label>}\r\n                        </Col>\r\n                    )}\r\n                />\r\n                <Controller\r\n                    control={control}\r\n                    name={\"message\"}\r\n                    rules={{\r\n                        required: false,\r\n                    }}\r\n                    render={({ field }) => (\r\n                        <>\r\n                            <Label variant={\"bold\"} mt={16}>\r\n                                {t(\"message_title\")}\r\n                            </Label>\r\n                            <TextInput {...field} style={styles.input} onChangeText={field.onChange} placeholder={t(\"message_placeholder\")} numberOfLines={8} multiline />\r\n                        </>\r\n                    )}\r\n                />\r\n\r\n                <Button onPress={handleSubmit(submit)} disabled={feedbackResult.isLoading}>\r\n                    {t(\"submit\")}\r\n                </Button>\r\n\r\n                {feedbackResult.isError && (\r\n                    <Label style={styles.error} mt={16}>\r\n                        {t(\"submit_failed\")}\r\n                    </Label>\r\n                )}\r\n                {feedbackResult.isLoading && <Label mt={16}>{t(\"submit_in_progress\")}</Label>}\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    input: {\r\n        width: \"100%\",\r\n        borderBottomColor: \"black\",\r\n        borderBottomWidth: 1,\r\n        paddingVertical: 8,\r\n        marginBottom: 16,\r\n    },\r\n    star: {\r\n        marginTop: 16,\r\n        marginBottom: 8,\r\n        marginLeft: \"auto\",\r\n        marginRight: \"auto\",\r\n    },\r\n    error: {\r\n        fontSize: 10,\r\n        color: \"#a01010\",\r\n    },\r\n});\r\n","import { Image, View } from \"react-native\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { MarkdownContent } from \"../../components/Atoms/MarkdownContent\";\r\nimport { Floater } from \"../../components/Containers/Floater\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useAppRoute } from \"../../hooks/useAppNavigation\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { knowledgeEntriesSelectors, selectImagesById } from \"../../store/eurofurence.selectors\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { LinkItem } from \"../Maps/LinkItem\";\r\n\r\nexport const KnowledgeEntryScreen = () => {\r\n    const { params } = useAppRoute(\"KnowledgeEntry\");\r\n    const entry = useAppSelector((state) => knowledgeEntriesSelectors.selectById(state, params.id));\r\n    const images = useAppSelector((state) => selectImagesById(state, entry?.ImageIds ?? []));\r\n    const safe = useSafeAreaInsets();\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]} stickyHeaderIndices={[0]} stickyHeaderHiddenOnScroll>\r\n            <Header>{entry?.Title}</Header>\r\n            <Floater contentStyle={appStyles.trailer}>\r\n                {images.map((it) => (\r\n                    <Image source={{ uri: it.FullUrl, height: 400 }} key={it.Id} resizeMode={\"contain\"} />\r\n                ))}\r\n                <MarkdownContent>{entry?.Text ?? \"\"}</MarkdownContent>\r\n                {entry?.Links.map((link) => (\r\n                    <View style={{ marginBottom: 10 }}>\r\n                        <LinkItem link={link} key={link.Target} />\r\n                    </View>\r\n                ))}\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import { FC } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\r\n\r\nimport { appStyles } from \"../../app/AppStyles\";\r\nimport { useTheme } from \"../../context/Theme\";\r\n\r\ntype CardProps = {\r\n    onPress?: () => void;\r\n    onLongPress?: () => void;\r\n    style?: StyleProp<ViewStyle> | undefined;\r\n};\r\nexport const Card: FC<CardProps> = ({ children, onPress, onLongPress, style }) => {\r\n    const theme = useTheme();\r\n    return (\r\n        <TouchableOpacity\r\n            style={[styles.container, appStyles.shadow, { backgroundColor: theme.background }, style]}\r\n            onPress={onPress}\r\n            onLongPress={onLongPress}\r\n            disabled={onPress === undefined && onLongPress === undefined}\r\n        >\r\n            <View style={styles.main}>{children}</View>\r\n        </TouchableOpacity>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        minHeight: 80,\r\n        marginVertical: 15,\r\n        borderRadius: 16,\r\n        overflow: \"hidden\",\r\n        flexDirection: \"row\",\r\n    },\r\n    main: {\r\n        flex: 1,\r\n        padding: 16,\r\n    },\r\n});\r\n","import { Platform } from \"react-native\";\r\n\r\ntype OS = typeof Platform.OS;\r\n\r\nexport const withPlatform =\r\n    <ComponentType,>(Component: React.ComponentType<ComponentType>, platforms: OS[]) =>\r\n    (props: ComponentType) =>\r\n        platforms.includes(Platform.OS) ? <Component {...props} /> : null;\r\n","import { useEffect, useState } from \"react\";\r\nimport { Image, Text } from \"react-native\";\r\n\r\nimport { withPlatform } from \"../../hoc/withPlatform\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { imagesSelectors } from \"../../store/eurofurence.selectors\";\r\n\r\nexport const ImageSynchronizer = () => {\r\n    const [isCaching, setIsCaching] = useState(false);\r\n    const [prefetchedImages, setPrefetchedImages] = useState(0);\r\n    const images = useAppSelector(imagesSelectors.selectAll);\r\n\r\n    useEffect(() => {\r\n        const fetchImages = async () => {\r\n            const imageUrls = images.map((it) => it.FullUrl).filter((it): it is string => it !== undefined);\r\n            // @ts-expect-error this method seemingly might not exist?\r\n            const cachedImages = await Image.queryCache(imageUrls);\r\n\r\n            setPrefetchedImages(Object.keys(cachedImages).length);\r\n\r\n            const nonCachedImages = imageUrls.filter((url) => !(url in cachedImages));\r\n\r\n            await Promise.all(nonCachedImages.map((url) => Image.prefetch(url).then(() => setPrefetchedImages((c) => c + 1))));\r\n\r\n            setIsCaching(false);\r\n        };\r\n\r\n        fetchImages().catch(console.error);\r\n    }, [images]);\r\n\r\n    if (!isCaching) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Text>\r\n            We are prefetching images. We are currently at {prefetchedImages} out of {images.length}\r\n        </Text>\r\n    );\r\n};\r\n\r\nexport const PlatformImageSynchronizer = withPlatform(ImageSynchronizer, [\"android\", \"ios\"]);\r\n","import { noop } from \"lodash\";\r\nimport { createContext, FC, useCallback, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { Vibration } from \"react-native\";\r\n\r\nimport { apiBase } from \"../../configuration\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store\";\r\nimport { applySync, resetCache, startCacheSync } from \"../../store/eurofurence.cache\";\r\nimport { selectIsSynchronized } from \"../../store/eurofurence.selectors\";\r\nimport { PlatformImageSynchronizer } from \"./ImageSynchronizer\";\r\n\r\ntype SynchronizationProviderProps = {\r\n    /**\r\n     * Call this function to trigger a synchronization step.\r\n     */\r\n    synchronize: (vibrate?: boolean) => void;\r\n\r\n    /**\r\n     * Clear the entire cache and start over again.\r\n     */\r\n    clear: () => void;\r\n};\r\nconst SynchronizationContext = createContext<SynchronizationProviderProps>({\r\n    synchronize: noop,\r\n    clear: noop,\r\n});\r\n\r\nexport const SynchronizationProvider: FC = ({ children }) => {\r\n    const dispatch = useAppDispatch();\r\n    const lastFetch = useAppSelector((state) => state.eurofurenceCache.lastSynchronised);\r\n    const [count, setCount] = useState(1);\r\n\r\n    useEffect(() => {\r\n        fetch(`${apiBase}/Sync?since=${lastFetch}`)\r\n            .then((r) => r.json())\r\n            .then((data) => dispatch(applySync(data)))\r\n            .catch(console.error);\r\n    }, [count]);\r\n\r\n    const clearCache = useCallback(() => {\r\n        Vibration.vibrate(400);\r\n        dispatch(resetCache());\r\n        synchronize();\r\n    }, [dispatch]);\r\n\r\n    const synchronize = useCallback((vibrate: boolean = true) => {\r\n        dispatch(startCacheSync());\r\n        if (vibrate) Vibration.vibrate(150);\r\n        setCount((c) => c + 1);\r\n    }, []);\r\n\r\n    const providerValues = useMemo(\r\n        (): SynchronizationProviderProps => ({\r\n            synchronize,\r\n            clear: clearCache,\r\n        }),\r\n        [synchronize]\r\n    );\r\n\r\n    return (\r\n        <SynchronizationContext.Provider value={providerValues}>\r\n            <PlatformImageSynchronizer />\r\n            {children}\r\n        </SynchronizationContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useSynchronizer = () => {\r\n    const { synchronize, clear } = useContext(SynchronizationContext);\r\n    const isSynchronizing = useAppSelector(selectIsSynchronized);\r\n\r\n    return {\r\n        synchronize,\r\n        clear,\r\n        isSynchronizing,\r\n    };\r\n};\r\n","import React, { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { SectionList, StyleSheet, View } from \"react-native\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { Card } from \"../../components/Containers/Card\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useSynchronizer } from \"../../components/Synchronization/SynchronizationProvider\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectKnowledgeItemsSections } from \"../../store/eurofurence.selectors\";\r\nimport { KnowledgeEntryRecord } from \"../../store/eurofurence.types\";\r\nimport { appStyles } from \"../AppStyles\";\r\n\r\nexport const KnowledgeListEntry: FC<{ entry: KnowledgeEntryRecord }> = ({ entry }) => {\r\n    const navigation = useAppNavigation(\"KnowledgeGroups\");\r\n\r\n    return (\r\n        <View style={{ paddingHorizontal: 20 }}>\r\n            <Card style={styles.card} onPress={() => navigation.navigate(\"KnowledgeEntry\", { id: entry.Id })}>\r\n                <Label>{entry.Title}</Label>\r\n            </Card>\r\n        </View>\r\n    );\r\n};\r\n\r\nexport const KnowledgeGroupsScreen = () => {\r\n    const { t } = useTranslation(\"KnowledgeGroups\");\r\n    const synchronizer = useSynchronizer();\r\n    const safe = useSafeAreaInsets();\r\n    const theme = useTheme();\r\n    const entries = useAppSelector((state) => selectKnowledgeItemsSections(state));\r\n\r\n    return (\r\n        <SectionList\r\n            style={[appStyles.abs, safe]}\r\n            onRefresh={synchronizer.synchronize}\r\n            refreshing={synchronizer.isSynchronizing}\r\n            ListHeaderComponent={<Header>{t(\"header\")}</Header>}\r\n            sections={entries}\r\n            stickySectionHeadersEnabled\r\n            keyExtractor={(item, index) => item.Id + index}\r\n            renderItem={({ item }) => <KnowledgeListEntry entry={item} key={item.Id} />}\r\n            renderSectionHeader={({ section }) => (\r\n                <Section title={section.Name} subtitle={section.Description} style={{ padding: 20, marginTop: 0, backgroundColor: theme.surface }} />\r\n            )}\r\n            renderSectionFooter={() => <View style={styles.footer} />}\r\n        />\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    card: {\r\n        minHeight: 0,\r\n        marginVertical: 4,\r\n    },\r\n    container: {\r\n        paddingHorizontal: 20,\r\n        paddingBottom: 100,\r\n    },\r\n    footer: {\r\n        height: 20,\r\n    },\r\n    entryButton: {\r\n        marginVertical: 10,\r\n    },\r\n});\r\n","import { ScopeContext } from \"@sentry/types\";\r\nimport { Browser, Native } from \"sentry-expo\";\r\n\r\n/**\r\n * Holds either browser or native sentry.\r\n */\r\nexport const PlatformSentry = Native ?? Browser;\r\nexport const captureEvent = PlatformSentry.captureEvent;\r\nexport const captureException = PlatformSentry.captureException;\r\n\r\nexport const captureNotificationException = (message: string, error: Error, context: Partial<ScopeContext> = {}) => {\r\n    console.error(message, error);\r\n\r\n    Browser.captureException(error, {\r\n        tags: {\r\n            type: \"notifications\",\r\n        },\r\n        ...context,\r\n    });\r\n};\r\n\r\nexport const useSentryProfiler = \"useProfiler\" in PlatformSentry ? PlatformSentry.useProfiler : () => {};\r\n","import BottomSheet, { BottomSheetFlatList } from \"@gorhom/bottom-sheet\";\r\nimport { ReactNativeZoomableView as ZoomableView, ZoomableViewEvent } from \"@openspacelabs/react-native-zoomable-view\";\r\nimport { chain, clamp } from \"lodash\";\r\nimport * as React from \"react\";\r\nimport { FC, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Image, Platform, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Marker } from \"../../components/Atoms/Marker\";\r\nimport { ImageDetails, LinkFragment, MapDetails, MapEntryDetails } from \"../../store/eurofurence.types\";\r\nimport { LinkItem } from \"./LinkItem\";\r\n\r\nconst distSq = (hx: number, hy: number) => hx * hx + hy * hy;\r\nconst circleTouches = (x1: number, y1: number, x2: number, y2: number, x: number, y: number, r: number) => {\r\n    const ix = clamp(x, x1, x2);\r\n    const iy = clamp(y, y1, y2);\r\n    return distSq(ix - x, iy - y) < r * r;\r\n};\r\n\r\ntype FilterResult = {\r\n    key: string;\r\n    map: MapDetails;\r\n    entry: MapEntryDetails;\r\n    link: LinkFragment;\r\n};\r\n\r\nexport type MapContentProps = {\r\n    map: MapDetails & { Image: ImageDetails };\r\n    entry?: MapEntryDetails;\r\n    link?: LinkFragment;\r\n};\r\n\r\nexport const MapContent: FC<MapContentProps> = ({ map, entry, link }) => {\r\n    const { t } = useTranslation(\"Maps\");\r\n    const refHandle = useRef<any>([0, 0]);\r\n    const refZoom = useRef<ZoomableView>(null);\r\n    const refSheet = useRef<BottomSheet>(null);\r\n\r\n    const [results, setResults] = useState<FilterResult[]>([]);\r\n    const onTransform = useCallback((event: ZoomableViewEvent) => {\r\n        clearTimeout(refHandle.current);\r\n\r\n        refHandle.current = setTimeout(() => {\r\n            // Get arguments from event.\r\n            const targetWidth = event.originalWidth;\r\n            const targetHeight = event.originalHeight;\r\n            const offsetX = event.offsetX;\r\n            const offsetY = event.offsetY;\r\n            const zoom = event.zoomLevel;\r\n\r\n            // Get area and area center.\r\n            const x1 = ((map.Image.Width * zoom) / 2 - offsetX * zoom - targetWidth / 2) / zoom;\r\n            const x2 = x1 + targetWidth / zoom;\r\n            const y1 = ((map.Image.Height * zoom) / 2 - offsetY * zoom - targetHeight / 2) / zoom;\r\n            const y2 = y1 + targetHeight / zoom;\r\n            const centerX = (x1 + x2) / 2;\r\n            const centerY = (y1 + y2) / 2;\r\n\r\n            // Filter all that touch the view. Order ascending by square distance and then add all their links.\r\n            setResults(\r\n                chain(map?.Entries)\r\n                    .filter((entry) => circleTouches(x1, y1, x2, y2, entry.X, entry.Y, entry.TapRadius))\r\n                    .orderBy((entry) => distSq(entry.X - centerX, entry.Y - centerY), \"asc\")\r\n                    .flatMap((entry) => entry.Links.map((link, i) => ({ key: `${map.Id}/${entry.Id}#${i}`, map, entry, link })))\r\n                    .value()\r\n            );\r\n        }, 350);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!refSheet.current) return;\r\n        if (entry) refSheet.current.collapse();\r\n    }, [entry]);\r\n\r\n    // On change of entry, move to new location.\r\n    useEffect(() => {\r\n        if (!entry) return;\r\n        if (!refZoom.current) return;\r\n        // Get arguments from current status..\r\n        const current = refZoom.current._getZoomableViewEventObject();\r\n        const offsetX = current.offsetX;\r\n        const offsetY = current.offsetY;\r\n        const zoom = current.zoomLevel;\r\n\r\n        // Get change to current center.\r\n        const diffX = entry.X - (map.Image.Width / 2 - offsetX);\r\n        const diffY = entry.Y - (map.Image.Height / 2 - offsetY);\r\n        refZoom.current.moveBy(diffX * zoom, diffY * zoom).catch(() => undefined);\r\n    }, [entry, refZoom]);\r\n\r\n    // Compute containers.\r\n    const styleContainer = useMemo<ViewStyle>(() => ({ width: map.Image.Width, height: map.Image.Height }), [map]);\r\n    const styleMarker = useMemo<ViewStyle>(() => (!entry ? { display: \"none\" } : { left: entry.X, top: entry.Y }), [entry]);\r\n\r\n    const [minZoom, maxZoom] = useMemo(() => (Math.max(map.Image.Width, map.Image.Height) < 2048 ? [0.5, 2] : [0.25, 1]), [map]);\r\n    return (\r\n        <>\r\n            <View style={styles.container}>\r\n                <ZoomableView\r\n                    ref={refZoom}\r\n                    contentWidth={map.Image.Width}\r\n                    contentHeight={map.Image.Height}\r\n                    maxZoom={maxZoom}\r\n                    minZoom={minZoom}\r\n                    zoomStep={maxZoom - minZoom}\r\n                    initialZoom={entry ? 1.5 : minZoom}\r\n                    bindToBorders={true}\r\n                    onTransform={onTransform}\r\n                >\r\n                    <View style={styleContainer}>\r\n                        <Image style={styles.image} resizeMode={undefined} source={{ uri: map.Image.FullUrl }} />\r\n                        {!entry ? null : <Marker style={styleMarker} markerSize={75} />}\r\n                    </View>\r\n                </ZoomableView>\r\n            </View>\r\n\r\n            {/*Apparently we cannot render this in a browser*/}\r\n            {Platform.OS === \"web\" ? null : (\r\n                <BottomSheet ref={refSheet} snapPoints={[\"10%\", \"75%\"]} index={0}>\r\n                    {!results ? (\r\n                        <Label mt={15} type=\"em\" variant=\"middle\">\r\n                            {t(\"filtering\")}\r\n                        </Label>\r\n                    ) : (\r\n                        <BottomSheetFlatList\r\n                            initialNumToRender={2}\r\n                            maxToRenderPerBatch={1}\r\n                            data={results}\r\n                            keyExtractor={({ key }) => key}\r\n                            renderItem={({ item: { map, entry, link } }) => <LinkItem map={map} entry={entry} link={link} />}\r\n                            contentContainerStyle={{ paddingHorizontal: 15 }}\r\n                        />\r\n                    )}\r\n                </BottomSheet>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        paddingBottom: \"10%\",\r\n    },\r\n    image: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n    },\r\n});\r\n","import * as React from \"react\";\r\nimport { useMemo } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useAppRoute } from \"../../hooks/useAppNavigation\";\r\nimport { useSentryProfiler } from \"../../sentryHelpers\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { mapsSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { MapContent, MapContentProps } from \"./MapContent\";\r\n\r\nexport const MapScreen = () => {\r\n    // Get safe area and route.\r\n    useSentryProfiler(\"MapScreen\");\r\n    const safe = useSafeAreaInsets();\r\n    const route = useAppRoute(\"Map\");\r\n\r\n    // Resolve map.\r\n    const map = useAppSelector((state) => mapsSelectors.selectById(state, route.params.id));\r\n\r\n    // Resolve entry if requested.\r\n    const entry = useMemo(() => {\r\n        if (!map) return;\r\n        if (!route.params.entryId) return;\r\n        return map.Entries.find((item) => item.Id === route.params.entryId);\r\n    }, [map, route]);\r\n\r\n    const link = useMemo(() => {\r\n        if (!entry) return;\r\n        if (typeof route.params.linkId !== \"number\") return;\r\n        return entry.Links[route.params.linkId];\r\n    }, [entry, route]);\r\n\r\n    const title = useMemo(() => {\r\n        if (map?.Description) {\r\n            if (link?.Name) return `${map.Description}: ${link.Name}`;\r\n            else return map.Description;\r\n        } else {\r\n            return \"Viewing map\";\r\n        }\r\n    }, [map, link]);\r\n\r\n    return (\r\n        <View style={[appStyles.abs, safe]}>\r\n            <Header>{title}</Header>\r\n            {!map?.Image || (route.params.entryId && !entry) || (route.params.linkId && !link) ? null : (\r\n                <MapContent map={map as MapContentProps[\"map\"]} entry={entry} link={link} />\r\n            )}\r\n        </View>\r\n    );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { MarkdownContent } from \"../../components/Atoms/MarkdownContent\";\r\nimport { Floater } from \"../../components/Containers/Floater\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useAppRoute } from \"../../hooks/useAppNavigation\";\r\nimport { useMarkCommunicationReadMutation } from \"../../store/eurofurence.service\";\r\nimport { appStyles } from \"../AppStyles\";\r\n\r\nexport const PrivateMessageItemScreen = () => {\r\n    const { params } = useAppRoute(\"PrivateMessageItem\");\r\n    const safe = useSafeAreaInsets();\r\n    const [markRead] = useMarkCommunicationReadMutation();\r\n\r\n    useEffect(() => {\r\n        if (params.message.ReadDateTimeUtc === null) {\r\n            console.debug(\"marking as read\", params.message.ReadDateTimeUtc);\r\n            markRead(params.id);\r\n        }\r\n    }, [params.message]);\r\n\r\n    return (\r\n        <ScrollView style={[safe]} stickyHeaderIndices={[0]} stickyHeaderHiddenOnScroll>\r\n            <Header>{params.message.Subject}</Header>\r\n            <Floater contentStyle={appStyles.trailer}>\r\n                <MarkdownContent>{params.message.Message}</MarkdownContent>\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\nimport { Label } from \"../Atoms/Label\";\r\n\r\nexport const NoData = () => {\r\n    return (\r\n        <View style={[styles.container]}>\r\n            <Icon name={\"calendar-alert\"} size={40} style={{ marginBottom: 20 }} />\r\n            <Label type={\"h3\"} variant={\"narrow\"}>\r\n                There's nothing here yet . . .\r\n            </Label>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        maxHeight: \"100%\",\r\n        height: 400,\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport _ from \"lodash\";\r\nimport moment from \"moment\";\r\nimport React, { useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { SectionList, StyleSheet, View } from \"react-native\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Card } from \"../../components/Containers/Card\";\r\nimport { Col } from \"../../components/Containers/Col\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { Row } from \"../../components/Containers/Row\";\r\nimport { NoData } from \"../../components/Utilities/NoData\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useGetCommunicationsQuery } from \"../../store/eurofurence.service\";\r\nimport { CommunicationRecord } from \"../../store/eurofurence.types\";\r\nimport { Query } from \"../../types\";\r\nimport { appStyles } from \"../AppStyles\";\r\n\r\nexport const PrivateMessageListScreen = () => {\r\n    const { t } = useTranslation(\"PrivateMessageList\");\r\n    const navigation = useAppNavigation(\"PrivateMessageList\");\r\n    const theme = useTheme();\r\n    const { data, refetch, isFetching }: Query<CommunicationRecord[]> = useGetCommunicationsQuery(undefined, {\r\n        refetchOnFocus: true,\r\n    });\r\n    const safe = useSafeAreaInsets();\r\n\r\n    const sectionedData = useMemo(() => {\r\n        const [unread, read] = _.partition(data, (it) => it.ReadDateTimeUtc === null);\r\n\r\n        const readSections = _.chain(read)\r\n            .orderBy([\"AuthorName\", \"SentDateTimeUtc\"], [\"asc\", \"desc\"])\r\n            .groupBy((it) => (it.AuthorName ? t(\"from\", { author: it.AuthorName?.trim() }) : t(\"from_unknown\")))\r\n            .map((messages, author) => ({\r\n                title: author,\r\n                data: messages,\r\n            }))\r\n            .value();\r\n\r\n        const unreadSections = _.isEmpty(unread)\r\n            ? []\r\n            : [\r\n                  {\r\n                      title: t(\"unread\"),\r\n                      data: unread,\r\n                  },\r\n              ];\r\n\r\n        return [...unreadSections, ...readSections];\r\n    }, [data]);\r\n\r\n    return (\r\n        <SectionList\r\n            style={[appStyles.abs, safe]}\r\n            sections={sectionedData}\r\n            keyExtractor={(item, index) => item.Id + index}\r\n            stickySectionHeadersEnabled\r\n            onRefresh={refetch}\r\n            refreshing={isFetching}\r\n            ListEmptyComponent={<NoData />}\r\n            ListHeaderComponent={<Header>Private Messages</Header>}\r\n            renderSectionHeader={({ section }) => (\r\n                <Label type={\"h2\"} style={{ padding: 20, backgroundColor: theme.background }}>\r\n                    {_.startCase(section.title)}\r\n                </Label>\r\n            )}\r\n            renderItem={({ item }) => (\r\n                <View style={{ paddingHorizontal: 20 }}>\r\n                    <Card\r\n                        key={item.Id}\r\n                        onPress={() =>\r\n                            navigation.navigate(\"PrivateMessageItem\", {\r\n                                id: item.Id,\r\n                                message: item,\r\n                            })\r\n                        }\r\n                    >\r\n                        <Row>\r\n                            <Col style={styles.title}>\r\n                                <Label variant={item.ReadDateTimeUtc === null ? \"bold\" : \"regular\"}>{item.Subject}</Label>\r\n                                <Label variant={item.ReadDateTimeUtc === null ? \"bold\" : \"regular\"}>\r\n                                    {t(\"message_item_subtitle\", {\r\n                                        status: item.ReadDateTimeUtc === null ? t(\"unread\") : t(\"read\"),\r\n                                        time: moment(item.CreatedDateTimeUtc).format(\"llll\"),\r\n                                    })}\r\n                                </Label>\r\n                            </Col>\r\n                            <View\r\n                                style={{\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    alignItems: \"center\",\r\n                                    width: 50,\r\n                                    height: 50,\r\n                                    borderRadius: 50,\r\n                                }}\r\n                            >\r\n                                <Icon name=\"chevron-right\" size={30} />\r\n                            </View>\r\n                        </Row>\r\n                    </Card>\r\n                </View>\r\n            )}\r\n        />\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flexDirection: \"row\",\r\n        alignItems: \"baseline\",\r\n        marginVertical: 15,\r\n        paddingHorizontal: 20,\r\n    },\r\n    title: {\r\n        flex: 6,\r\n    },\r\n    action: {\r\n        flex: 3,\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { FC, ReactNode, useMemo } from \"react\";\r\nimport { StyleProp, StyleSheet, TouchableOpacity, View, ViewStyle } from \"react-native\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Label } from \"../Atoms/Label\";\r\n\r\n/**\r\n * Arguments to the tab.\r\n */\r\nexport type TabProps = {\r\n    /**\r\n     * Root container style.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * The icon to display.\r\n     */\r\n    icon: IconNames;\r\n\r\n    /**\r\n     * The name of the tab.\r\n     */\r\n    text: string;\r\n\r\n    /**\r\n     * True if to be rendered as active.\r\n     */\r\n    active?: boolean;\r\n\r\n    /**\r\n     * True if on inverted background.\r\n     */\r\n    inverted?: boolean;\r\n\r\n    /**\r\n     * If true or node, indicator will be presented over the this tab.\r\n     */\r\n    indicate?: boolean | ReactNode;\r\n\r\n    /**\r\n     * If given, invoked when the tab is pressed.\r\n     */\r\n    onPress?: () => void;\r\n};\r\n\r\n/**\r\n * Tab is an icon/caption combo intended for use in the bottom-navigation control.\r\n * @constructor\r\n */\r\nexport const Tab: FC<TabProps> = ({ style, icon, text, indicate, active = false, inverted = false, onPress }) => {\r\n    const theme = useTheme();\r\n    const color = useMemo(() => {\r\n        if (inverted) return active ? theme.invImportant : theme.invText;\r\n        else return active ? theme.secondary : theme.text;\r\n    }, [theme, active, inverted]);\r\n    const fillNotify = useMemo(() => ({ backgroundColor: theme.notification }), [theme]);\r\n\r\n    return (\r\n        <TouchableOpacity style={[styles.container, style]} onPress={onPress}>\r\n            <View style={styles.item}>\r\n                <Icon name={icon} size={24} color={color} />\r\n\r\n                {!indicate ? null : (\r\n                    <View style={styles.indicatorArea}>\r\n                        <View style={styles.indicatorLocator}>\r\n                            <View style={[styles.indicatorContent, fillNotify]}>{indicate === true ? null : indicate}</View>\r\n                        </View>\r\n                    </View>\r\n                )}\r\n            </View>\r\n            <View style={styles.item}>\r\n                <Label variant=\"middle\" color={color}>\r\n                    {text}\r\n                </Label>\r\n            </View>\r\n        </TouchableOpacity>\r\n    );\r\n};\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: \"center\",\r\n        padding: 16,\r\n    },\r\n    item: {\r\n        alignSelf: \"stretch\",\r\n        alignItems: \"center\",\r\n    },\r\n    indicatorArea: {\r\n        position: \"absolute\",\r\n        width: 24,\r\n        height: 24,\r\n    },\r\n    indicatorLocator: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        right: 0,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    indicatorContent: {\r\n        position: \"absolute\",\r\n        minWidth: 12,\r\n        minHeight: 12,\r\n        padding: 4,\r\n        borderRadius: 99999,\r\n    },\r\n});\r\n","import { noop } from \"lodash\";\r\nimport { createContext, forwardRef, ReactNode, useCallback, useContext, useImperativeHandle, useMemo, useState } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport { Gesture, GestureDetector, TouchableWithoutFeedback } from \"react-native-gesture-handler\";\r\nimport Animated, { cancelAnimation, Easing, runOnJS, useAnimatedStyle, useSharedValue, withTiming } from \"react-native-reanimated\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Activity } from \"../Atoms/Activity\";\r\nimport { Tab } from \"./Tab\";\r\n\r\n/**\r\n * Arguments to the tabs.\r\n */\r\nexport type TabsProps = {\r\n    /**\r\n     * Style used on the container of the tabs.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * If given, tabs that are layed out before the more/less button.\r\n     */\r\n    tabs: {\r\n        /**\r\n         * The icon to display.\r\n         */\r\n        icon: IconNames;\r\n\r\n        /**\r\n         * The name of the tab.\r\n         */\r\n        text: string;\r\n\r\n        /**\r\n         * True if to be rendered as active.\r\n         */\r\n        active?: boolean;\r\n\r\n        /**\r\n         * If true or node, indicator will be presented over the this tab.\r\n         */\r\n        indicate?: boolean | ReactNode;\r\n\r\n        /**\r\n         * If given, invoked when the tab is pressed.\r\n         */\r\n        onPress?: () => void;\r\n    }[];\r\n\r\n    /**\r\n     * Text to display for opening the menu.\r\n     */\r\n    textMore?: string;\r\n\r\n    /**\r\n     * Text to display for closing the menu.\r\n     */\r\n    textLess?: string;\r\n\r\n    /**\r\n     * If true or node, indicator will be presented over the more button.\r\n     */\r\n    indicateMore?: true | ReactNode;\r\n\r\n    /**\r\n     * If given, invoked when the navigator is opened by pressing more or dragging up.\r\n     */\r\n    onOpen?: () => void;\r\n\r\n    /**\r\n     * If given, invoked when the navigator is opened by pressing  less or dragging down.\r\n     */\r\n    onClose?: () => void;\r\n\r\n    /**\r\n     * The content to render in the more-area.\r\n     */\r\n    children?: ReactNode;\r\n};\r\n\r\n/**\r\n * Operations provided by the navigator.\r\n */\r\nexport type TabsRef = {\r\n    /**\r\n     * Closes the more-area with animations.\r\n     */\r\n    close(): void;\r\n\r\n    /**\r\n     * Opens the more-area with animations.\r\n     */\r\n    open(): void;\r\n\r\n    /**\r\n     * Closes the more-area immediately.\r\n     */\r\n    closeImmediately(): void;\r\n};\r\n\r\n/**\r\n * Allow components in tabs to get access to the Tab properties.\r\n */\r\nconst TabsContext = createContext<TabsRef & { isOpen: boolean }>({\r\n    close: noop,\r\n    open: noop,\r\n    closeImmediately: noop,\r\n    isOpen: false,\r\n});\r\n\r\n/**\r\n * Expose the Tabs Context as a hook\r\n */\r\nexport const useTabs = () => useContext(TabsContext);\r\n\r\n/**\r\n * A row of tabs and a \"more\" button.\r\n *\r\n * Adds a child under it containing the more-area. When opened by pressing\r\n * or dragging, translates it into view and overlays the containing view with\r\n * a semi-opaque layer.\r\n */\r\nexport const Tabs = forwardRef<TabsRef, TabsProps>(({ style, tabs, textMore = \"More\", textLess = \"Less\", indicateMore, onOpen, onClose, children }, ref) => {\r\n    // Computed styles.\r\n    const theme = useTheme();\r\n    const styleDismiss = useMemo(() => ({ backgroundColor: theme.darken }), [theme]);\r\n    const fillBackground = useMemo(() => ({ backgroundColor: theme.background }), [theme]);\r\n    const bordersDarken = useMemo(() => ({ borderColor: theme.darken }), [theme]);\r\n\r\n    // Height of the content rendered as children, state if currently open.\r\n    const [height, setHeight] = useState(425);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    // Start is used for pan gesture, offset is used to animate the actual openness.\r\n    const start = useSharedValue(0);\r\n    const offset = useSharedValue(0);\r\n\r\n    // Derive opacity from offset. If completely closed, translate out.\r\n    const dynamicDismiss = useAnimatedStyle(\r\n        () => ({\r\n            opacity: offset.value,\r\n            transform: [\r\n                {\r\n                    translateY: offset.value === 0 ? 99999 : 0,\r\n                },\r\n            ],\r\n        }),\r\n        [offset]\r\n    );\r\n\r\n    // Derive transformation from offset.\r\n    const dynamicContainer = useAnimatedStyle(\r\n        () => ({\r\n            transform: [{ translateY: -offset.value * height }],\r\n        }),\r\n        [offset, height]\r\n    );\r\n\r\n    // Opens the more area and runs the handlers.\r\n    const open = useCallback(() => {\r\n        offset.value = withTiming(1, { duration: 234, easing: Easing.out(Easing.cubic) }, (finished) => {\r\n            if (finished) {\r\n                runOnJS(setIsOpen)(true);\r\n                onOpen && runOnJS(onOpen)();\r\n            }\r\n        });\r\n    }, [offset]);\r\n\r\n    // Closes the more area and runs the handlers.\r\n    const close = useCallback(() => {\r\n        offset.value = withTiming(0, { duration: 234, easing: Easing.out(Easing.cubic) }, (finished) => {\r\n            if (finished) {\r\n                runOnJS(setIsOpen)(false);\r\n                onClose && runOnJS(onClose)();\r\n            }\r\n        });\r\n    }, [offset]);\r\n\r\n    // Closes the more area immediately and runs the handlers.\r\n    const closeImmediately = useCallback(() => {\r\n        offset.value = 0;\r\n        setIsOpen(false);\r\n        onClose && onClose();\r\n    }, [offset]);\r\n\r\n    // Handle to invoke internal mutations from outside if needed.\r\n    useImperativeHandle(ref, () => ({ open, close, closeImmediately }), [open, close, closeImmediately]);\r\n\r\n    // Enable panning the navigator to dismiss. Only available if open.\r\n    const gesture = Gesture.Pan()\r\n        .onBegin(() => {\r\n            start.value = offset.value;\r\n            cancelAnimation(offset);\r\n        })\r\n        .onUpdate((e) => {\r\n            // Update from translation.\r\n            offset.value = -e.translationY / height + start.value;\r\n            offset.value = Math.max(0, Math.min(offset.value, 1));\r\n        })\r\n        .onEnd((e) => {\r\n            // Compute threshold from direction.\r\n            const threshold = e.translationY > 0 ? 0.9 : 0.1;\r\n\r\n            // Close if smaller than threshold, otherwise open again.\r\n            const targetIsOpen = offset.value >= threshold;\r\n            const targetValue = targetIsOpen ? 1 : 0;\r\n            offset.value = withTiming(targetValue, { duration: 234, easing: Easing.out(Easing.cubic) }, (finished) => {\r\n                if (finished) {\r\n                    runOnJS(setIsOpen)(targetIsOpen);\r\n\r\n                    if (targetIsOpen) onOpen && runOnJS(onOpen)();\r\n                    else onClose && runOnJS(onClose)();\r\n                }\r\n            });\r\n        });\r\n\r\n    // TODO: Add safe area to tabs.\r\n    // TODO: Integration with back button.\r\n\r\n    return (\r\n        <TabsContext.Provider value={{ close, open, closeImmediately, isOpen: offset.value > 0 }}>\r\n            {/* Dismissal area. */}\r\n            <Animated.View style={[styles.dismiss, styleDismiss, dynamicDismiss]}>\r\n                <TouchableWithoutFeedback containerStyle={StyleSheet.absoluteFill} style={StyleSheet.absoluteFill} onPress={close} />\r\n            </Animated.View>\r\n\r\n            <GestureDetector gesture={gesture}>\r\n                <Animated.View style={dynamicContainer}>\r\n                    <View style={[styles.tabs, bordersDarken, fillBackground, style]}>\r\n                        {/* Dynamic tabs. */}\r\n                        {tabs?.map((tab, i) => <Tab key={i} icon={tab.icon} text={tab.text} active={tab.active} indicate={tab.indicate} onPress={tab.onPress} />) ?? null}\r\n\r\n                        {/* More-tab. */}\r\n                        <Tab icon={isOpen ? \"arrow-down-circle\" : \"menu\"} text={isOpen ? textLess : textMore} indicate={indicateMore} onPress={isOpen ? close : open} />\r\n\r\n                        <Activity style={styles.activity} />\r\n                    </View>\r\n\r\n                    {/* Children rendered as the expandable content. */}\r\n                    <View style={[styles.content, fillBackground]} onLayout={(e) => setHeight(e.nativeEvent.layout.height || height)}>\r\n                        {children}\r\n                    </View>\r\n                </Animated.View>\r\n            </GestureDetector>\r\n        </TabsContext.Provider>\r\n    );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n    root: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        justifyContent: \"flex-end\",\r\n        overflow: \"hidden\",\r\n    },\r\n    dismiss: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n    },\r\n    tabs: {\r\n        flexDirection: \"row\",\r\n        borderTopWidth: 1,\r\n        borderBottomWidth: 1,\r\n    },\r\n    activity: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n    },\r\n    content: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: \"100%\",\r\n        right: 0,\r\n    },\r\n});\r\n","import { EventEmitter, TabActions } from \"@react-navigation/core\";\r\nimport { ParamListBase } from \"@react-navigation/native\";\r\nimport { Route } from \"@react-navigation/routers/src/types\";\r\n\r\nimport { PagesNavigationEventMap, PagesNavigationProp } from \"./PagesNavigator\";\r\nimport { TabNavigationEventMap, TabNavigationProp } from \"./TabsNavigator\";\r\n\r\n/**\r\n * On a pages or tabs navigator, performs event driven or dispatch driven navigation to a route or index.\r\n * @param navigation The target.\r\n * @param nameOrIndex The route or the index of the route in the array of all routes.\r\n */\r\nexport function navigateTab<ParamList extends ParamListBase, RouteName extends keyof ParamList>(\r\n    navigation: (PagesNavigationProp<ParamList> & EventEmitter<PagesNavigationEventMap>) | (TabNavigationProp<ParamList> & EventEmitter<TabNavigationEventMap>),\r\n    nameOrIndex: number | Route<Extract<RouteName, string>, ParamList[RouteName]>\r\n) {\r\n    const state = navigation.getState();\r\n    const target = typeof nameOrIndex === \"number\" ? state.routes[nameOrIndex] : nameOrIndex;\r\n\r\n    // Skip if invalid target.\r\n    if (!target) return;\r\n\r\n    // Emit event.\r\n    const event = navigation.emit({\r\n        type: \"tabPress\",\r\n        target: target.key,\r\n        canPreventDefault: true,\r\n    });\r\n\r\n    // If event did not prevent default, dispatch tab jump.\r\n    if (!event.defaultPrevented) {\r\n        navigation.dispatch({\r\n            // TODO: @lukashaertel pls fix\r\n            ...TabActions.jumpTo(target.name),\r\n            target: state.key,\r\n        });\r\n    }\r\n}\r\n","import { createNavigatorFactory, NavigationProp, ParamListBase, RouteProp, TabActionHelpers, TabNavigationState, TabRouter, useNavigationBuilder } from \"@react-navigation/native\";\r\nimport { FC, ReactNode, RefObject, useRef } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Tabs, TabsRef } from \"../Containers/Tabs\";\r\nimport { navigateTab } from \"./Common\";\r\n\r\n/**\r\n * Options for a tabs-screen.\r\n */\r\nexport type TabNavigationOptions = {\r\n    /**\r\n     * The icon to use.\r\n     */\r\n    icon: IconNames;\r\n\r\n    /**\r\n     * The title of the screen.\r\n     */\r\n    title: string;\r\n\r\n    /**\r\n     * True if this tab should indicate or a node of what it should indicate.\r\n     */\r\n    indicate?: boolean | ReactNode;\r\n};\r\n\r\nexport type TabNavigatorProps = {\r\n    /**\r\n     * Render function for the content under more.\r\n     */\r\n    more?: ReactNode | ((tabs: RefObject<TabsRef>) => ReactNode);\r\n\r\n    /**\r\n     * Text to display for opening the menu.\r\n     */\r\n    textMore?: string;\r\n\r\n    /**\r\n     * Text to display for closing the menu.\r\n     */\r\n    textLess?: string;\r\n\r\n    /**\r\n     * True if the more tab should indicate or a node of what it should indicate.\r\n     */\r\n    indicateMore?: boolean | ReactNode;\r\n\r\n    /**\r\n     * Style of the content. This is the container around all pages.\r\n     */\r\n    contentStyle?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * Style of a tab. This is on the page's individual container.\r\n     */\r\n    tabsStyle?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * The initial route.\r\n     */\r\n    initialRouteName: string;\r\n\r\n    /**\r\n     * The screens.\r\n     */\r\n    children: ReactNode;\r\n\r\n    /**\r\n     * The default screen options.\r\n     */\r\n    screenOptions: TabNavigationOptions;\r\n};\r\n\r\n/**\r\n * Events handled by the tabs emitter.\r\n */\r\nexport type TabNavigationEventMap = {\r\n    /**\r\n     * A tab was pressed.\r\n     */\r\n    tabPress: {\r\n        data: undefined;\r\n        canPreventDefault: true;\r\n    };\r\n};\r\n\r\n/**\r\n * Type of navigation when using a screen inside a tab navigator.\r\n */\r\nexport type TabNavigationProp<\r\n    ParamList extends ParamListBase,\r\n    RouteName extends keyof ParamList = keyof ParamList,\r\n    NavigatorID extends string | undefined = undefined\r\n> = NavigationProp<ParamList, RouteName, NavigatorID, TabNavigationState<ParamList>, TabNavigationOptions, TabNavigationEventMap> & TabActionHelpers<ParamList>;\r\n\r\n/**\r\n * Props to a tabs-screen.\r\n */\r\nexport type TabScreenProps<ParamList extends ParamListBase, RouteName extends keyof ParamList = keyof ParamList, NavigatorID extends string | undefined = undefined> = {\r\n    navigation: TabNavigationProp<ParamList, RouteName, NavigatorID>;\r\n    route: RouteProp<ParamList, RouteName>;\r\n};\r\n\r\nexport const TabNavigator: FC<TabNavigatorProps> = ({\r\n    more,\r\n    indicateMore,\r\n    textMore = \"More\",\r\n    textLess = \"Less\",\r\n    contentStyle,\r\n    tabsStyle,\r\n    initialRouteName,\r\n    children,\r\n    screenOptions,\r\n}) => {\r\n    // Make builder from passed arguments.\r\n    const { state, navigation, descriptors, NavigationContent } = useNavigationBuilder(TabRouter, {\r\n        children,\r\n        screenOptions,\r\n        initialRouteName,\r\n    });\r\n\r\n    const tabs = useRef<TabsRef>(null);\r\n\r\n    return (\r\n        <NavigationContent>\r\n            <View style={[styles.content, contentStyle]}>\r\n                {/* Tabbed content. */}\r\n                <View style={styles.tab}>{descriptors[state.routes[state.index].key].render()}</View>\r\n            </View>\r\n\r\n            {/* Tab bar. */}\r\n            <Tabs\r\n                style={tabsStyle}\r\n                ref={tabs}\r\n                textMore={textMore}\r\n                textLess={textLess}\r\n                indicateMore={indicateMore}\r\n                tabs={state.routes.map((route, i) => ({\r\n                    active: state.index === i,\r\n                    icon: descriptors[route.key].options.icon,\r\n                    text: descriptors[route.key].options.title,\r\n                    onPress: () => {\r\n                        // todo: @lukashaertel pls fix\r\n                        navigateTab(navigation, route);\r\n                        tabs.current?.close();\r\n                    },\r\n                    indicate: descriptors[route.key].options.indicate,\r\n                }))}\r\n            >\r\n                {typeof more === \"function\" ? more(tabs) : more}\r\n            </Tabs>\r\n        </NavigationContent>\r\n    );\r\n};\r\n\r\nexport const createTabNavigator = createNavigatorFactory(TabNavigator);\r\n\r\nconst styles = StyleSheet.create({\r\n    content: {\r\n        flex: 1,\r\n    },\r\n    tab: {\r\n        flex: 1,\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { StyleSheet, TouchableOpacity, View, ViewProps, ViewStyle } from \"react-native\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Label } from \"../Atoms/Label\";\r\n\r\nconst iconSize = 20;\r\n\r\n/**\r\n * Arguments to the page.\r\n */\r\nexport type PageProps = {\r\n    /**\r\n     * The icon of the page.\r\n     */\r\n    icon?: IconNames;\r\n\r\n    /**\r\n     * The caption of the page.\r\n     */\r\n    text?: string;\r\n\r\n    /**\r\n     * True if to be rendered as active.\r\n     */\r\n    active?: boolean;\r\n\r\n    /**\r\n     * True if this page should be highlighted.\r\n     */\r\n    highlight?: boolean;\r\n\r\n    /**\r\n     * If given, invoked when the tab is pressed.\r\n     */\r\n    onPress?: () => void;\r\n\r\n    /**\r\n     * Called on layout.\r\n     */\r\n    onLayout?: ViewProps[\"onLayout\"];\r\n};\r\n\r\n/**\r\n * Page is an icon or caption view intended for use in the top-navigation control.\r\n * @constructor\r\n */\r\nexport const Page: FC<PageProps> = ({ icon, text, active = false, highlight = false, onPress, onLayout }) => {\r\n    const theme = useTheme();\r\n\r\n    // The color to use for icon or text, i.e., foreground.\r\n    const colorContent = useMemo(() => (highlight ? (active ? theme.invImportant : theme.invText) : active ? theme.secondary : theme.text), [theme, active, highlight]);\r\n\r\n    // The style of the container and the item.\r\n    const styleContainer = useMemo<ViewStyle>(() => (icon ? styles.containerStatic : styles.containerGrow), [icon]);\r\n    const styleItem = useMemo<ViewStyle>(() => ({ backgroundColor: highlight ? theme.secondary : undefined }), [theme, highlight]);\r\n\r\n    return (\r\n        <View style={styleContainer} onLayout={onLayout}>\r\n            <TouchableOpacity style={styleContainer} onPress={onPress}>\r\n                {icon ? (\r\n                    <View style={[styles.item, styleItem]}>\r\n                        <Icon name={icon} size={iconSize} color={colorContent} />\r\n                    </View>\r\n                ) : (\r\n                    <View style={[styles.item, styleItem]}>\r\n                        <Label style={styles.text} color={colorContent}>\r\n                            {text ?? \" \"}\r\n                        </Label>\r\n                    </View>\r\n                )}\r\n            </TouchableOpacity>\r\n        </View>\r\n    );\r\n};\r\nconst styles = StyleSheet.create({\r\n    containerStatic: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"center\",\r\n        paddingVertical: 6,\r\n    },\r\n    containerGrow: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"center\",\r\n        paddingVertical: 6,\r\n        flexGrow: 1,\r\n    },\r\n    border: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n    },\r\n    item: {\r\n        alignSelf: \"stretch\",\r\n        alignItems: \"center\",\r\n        height: iconSize + 12,\r\n        justifyContent: \"center\",\r\n        padding: 6,\r\n        paddingHorizontal: 10,\r\n        borderRadius: 6,\r\n    },\r\n    text: {\r\n        fontWeight: \"bold\",\r\n    },\r\n});\r\n","import React, { forwardRef, useCallback, useImperativeHandle, useMemo, useRef, useState } from \"react\";\r\nimport { LayoutRectangle, StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport Animated, { SharedValue, useAnimatedStyle } from \"react-native-reanimated\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Page } from \"./Page\";\r\n\r\n/**\r\n * Arguments to the pages.\r\n */\r\nexport type PagesProps = {\r\n    /**\r\n     * Style used on the container of the pages.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * If given, page that are laid out.\r\n     */\r\n    pages: {\r\n        /**\r\n         * The icon to display.\r\n         */\r\n        icon?: IconNames;\r\n\r\n        /**\r\n         * The name of the page.\r\n         */\r\n        text: string;\r\n\r\n        /**\r\n         * True if to be rendered as active.\r\n         */\r\n        active?: boolean;\r\n\r\n        /**\r\n         * True if to be rendered as highlighted.\r\n         */\r\n        highlight?: boolean;\r\n\r\n        /**\r\n         * If given, invoked when the page is pressed.\r\n         */\r\n        onPress?: () => void;\r\n    }[];\r\n\r\n    /**\r\n     * Index of the page to display as active. Can be a real-valued shared value.\r\n     */\r\n    indicatorIndex?: number | SharedValue<number>;\r\n\r\n    /**\r\n     * Height of the active indicators.\r\n     */\r\n    indicatorHeight?: number;\r\n};\r\n\r\nexport type PagesRef = {\r\n    /**\r\n     * Scroll to the page index.\r\n     * @param index\r\n     */\r\n    scrollTo: (index: number) => void;\r\n};\r\n\r\n/**\r\n * A row of pages.\r\n */\r\nexport const Pages = forwardRef<PagesRef, PagesProps>(({ style, pages, indicatorIndex = -1, indicatorHeight = 4 }, ref) => {\r\n    // Computed styles.\r\n    const theme = useTheme();\r\n    const styleIndicator = useMemo<ViewStyle>(() => ({ backgroundColor: theme.secondary, height: indicatorHeight }), [theme, indicatorHeight]);\r\n    const styleBackground = useMemo<ViewStyle>(() => ({ backgroundColor: theme.background }), [theme]);\r\n    const styleDarken = useMemo<ViewStyle>(() => ({ borderColor: theme.darken }), [theme]);\r\n\r\n    // Width of all pages. Anchors (locations and widths of the individual top tabs, the anchors start out at the given length).\r\n    const [totalWidth, setTotalWidth] = useState(-1);\r\n    const [anchors, setAnchors] = useState<{ x: number; width: number }[]>([]);\r\n\r\n    // Updates the anchors.\r\n    const updateAnchors = useCallback(\r\n        (i: number, layout: LayoutRectangle & { left?: number }) => {\r\n            setAnchors((current) => {\r\n                const copy = current.slice();\r\n                copy.length = pages.length;\r\n                copy[i] = { x: layout.left ?? layout.x, width: layout.width };\r\n                return copy;\r\n            });\r\n        },\r\n        [pages]\r\n    );\r\n\r\n    const dynamicIndicator = useAnimatedStyle(() => {\r\n        // Get base values for interpolation.\r\n        const value = typeof indicatorIndex === \"number\" ? indicatorIndex : indicatorIndex.value;\r\n        const lower = Math.floor(value);\r\n        const upper = Math.ceil(value);\r\n        const anchorLower = anchors[lower];\r\n        const anchorUpper = anchors[upper];\r\n        const inf = value - lower;\r\n\r\n        // Interpolate between the valid points, use a single one if equal or at an end.\r\n        let left, width;\r\n        if (!anchorLower && !anchorUpper) [left, width] = [0, 0];\r\n        else if (!anchorUpper || anchorLower === anchorUpper) [left, width] = [anchorLower.x, anchorLower.width];\r\n        else if (!anchorLower) [left, width] = [anchorUpper.x, anchorUpper.width];\r\n        else [left, width] = [(1 - inf) * anchorLower.x + inf * anchorUpper.x, (1 - inf) * anchorLower.width + inf * anchorUpper.width];\r\n\r\n        // Transform to center, then scale by width, then translate to adequate position.\r\n        return {\r\n            transform: [{ translateX: left }, { scaleX: width }, { translateX: 0.5 }],\r\n        };\r\n    }, [anchors, indicatorIndex]);\r\n\r\n    // Reference for scrolling to tab.\r\n    const scrollView = useRef<ScrollView>(null);\r\n\r\n    // Provide handle for scrolling to the index.\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            scrollTo: (index: number) => {\r\n                // Get anchor. If not present, ignore.\r\n                const anchor = anchors[index];\r\n                if (!anchor) return;\r\n\r\n                // Scroll to it but leave space to the left of it.\r\n                const { x, width } = anchor;\r\n                scrollView.current?.scrollTo({\r\n                    x: x - (totalWidth - width) / 2,\r\n                });\r\n            },\r\n        }),\r\n        [anchors, scrollView, totalWidth]\r\n    );\r\n\r\n    return (\r\n        <View style={[styles.pages, styleDarken, styleBackground, style]}>\r\n            <ScrollView\r\n                ref={scrollView}\r\n                contentContainerStyle={styles.content}\r\n                horizontal={true}\r\n                showsHorizontalScrollIndicator={false}\r\n                onLayout={(e) => setTotalWidth(e.nativeEvent.layout.width)}\r\n            >\r\n                <Animated.View style={[styles.indicator, styleIndicator, dynamicIndicator]} />\r\n                {pages?.map((page, i) => (\r\n                    <Page\r\n                        key={i}\r\n                        icon={page.icon}\r\n                        text={page.text}\r\n                        active={page.active}\r\n                        highlight={page.highlight}\r\n                        onPress={page.onPress}\r\n                        onLayout={(e) => updateAnchors(i, e.nativeEvent.layout)}\r\n                    />\r\n                )) ?? null}\r\n            </ScrollView>\r\n        </View>\r\n    );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n    pages: {\r\n        flexDirection: \"row\",\r\n        borderTopWidth: 1,\r\n        borderBottomWidth: 1,\r\n    },\r\n    content: {\r\n        minWidth: \"100%\",\r\n    },\r\n    indicator: {\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n        left: 0,\r\n        width: 1,\r\n    },\r\n});\r\n","import { createNavigatorFactory, NavigationProp, ParamListBase, RouteProp, TabActionHelpers, TabNavigationState, TabRouter, useNavigationBuilder } from \"@react-navigation/native\";\r\nimport { FC, ReactNode, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport { Gesture, GestureDetector } from \"react-native-gesture-handler\";\r\nimport Animated, { cancelAnimation, Easing, runOnJS, useAnimatedReaction, useAnimatedStyle, useSharedValue, withTiming } from \"react-native-reanimated\";\r\n\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { Pages, PagesRef } from \"../Containers/Pages\";\r\nimport { navigateTab } from \"./Common\";\r\n\r\n/**\r\n * Options for a pages-screen.\r\n */\r\nexport type PagesNavigationOptions = {\r\n    /**\r\n     * True if this page should be highlighted.\r\n     */\r\n    highlight?: boolean;\r\n    /**\r\n     * The icon to use.\r\n     */\r\n    icon: IconNames;\r\n\r\n    /**\r\n     * The title of the screen.\r\n     */\r\n    title: string;\r\n\r\n    /**\r\n     * True if this screen should be prioritized.\r\n     */\r\n    prioritize?: boolean;\r\n};\r\n\r\n/**\r\n * Props to the pages navigator.\r\n */\r\nexport type PagesNavigatorProps = {\r\n    /**\r\n     * Style of the content. This is the container around all pages.\r\n     */\r\n    contentStyle?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * Style of a page. This is on the page's individual container.\r\n     */\r\n    pagesStyle?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * The initial route.\r\n     */\r\n    initialRouteName: string;\r\n\r\n    /**\r\n     * True if screens should be hidden when not viewed.\r\n     */\r\n    detach?: boolean;\r\n\r\n    /**\r\n     * The amount of vertical pan travel that is still allowed for swipe.\r\n     */\r\n    panSlack?: number;\r\n\r\n    /**\r\n     * The screens.\r\n     */\r\n    children: ReactNode;\r\n\r\n    /**\r\n     * The default screen options.\r\n     */\r\n    screenOptions: PagesNavigationOptions;\r\n};\r\n\r\n/**\r\n * Events handled by the pages emitter.\r\n */\r\nexport type PagesNavigationEventMap = {\r\n    /**\r\n     * A page was pressed.\r\n     */\r\n    tabPress: {\r\n        data: undefined;\r\n        canPreventDefault: true;\r\n    };\r\n};\r\n\r\n/**\r\n * Type of navigation when using a screen inside a pages navigator.\r\n */\r\nexport type PagesNavigationProp<\r\n    ParamList extends ParamListBase,\r\n    RouteName extends keyof ParamList = keyof ParamList,\r\n    NavigatorID extends string | undefined = undefined\r\n> = NavigationProp<ParamList, RouteName, NavigatorID, TabNavigationState<ParamList>, PagesNavigationOptions, PagesNavigationEventMap> & TabActionHelpers<ParamList>;\r\n\r\n/**\r\n * Props to a pages-screen.\r\n */\r\nexport type PagesScreenProps<ParamList extends ParamListBase, RouteName extends keyof ParamList = keyof ParamList, NavigatorID extends string | undefined = undefined> = {\r\n    navigation: PagesNavigationProp<ParamList, RouteName, NavigatorID>;\r\n    route: RouteProp<ParamList, RouteName>;\r\n};\r\n\r\nexport const PagesNavigator: FC<PagesNavigatorProps> = ({ contentStyle, pagesStyle, initialRouteName, detach = true, panSlack = 15, children, screenOptions }) => {\r\n    // Make builder from passed arguments.\r\n    const { state, navigation, descriptors, NavigationContent } = useNavigationBuilder(TabRouter, {\r\n        children,\r\n        screenOptions,\r\n        initialRouteName,\r\n    });\r\n\r\n    // Reference, used for scrolling to selected page in tabs.\r\n    const pages = useRef<PagesRef>(null);\r\n\r\n    // Width of the pages in total.\r\n    const [width, setWidth] = useState(-1);\r\n    const [viewing, setViewing] = useState(state.index);\r\n\r\n    // Style for arranger's width, fitting all given pages.\r\n    const arrangerWidth = useMemo(() => ({ width: `${state.routes.length * 100}%` }), [state.routes.length]);\r\n\r\n    // Target and offset used for differentially determining if set from navigation or set from pan or button press.\r\n    const offset = useSharedValue(state.index);\r\n    const start = useSharedValue(0);\r\n\r\n    // React to state and current target.\r\n    useEffect(() => {\r\n        cancelAnimation(offset);\r\n        offset.value = state.index;\r\n    }, [offset, state.index]);\r\n\r\n    // Convert translation into viewed page, which can be reacted to as a state.\r\n    useAnimatedReaction(\r\n        () => Math.max(0, Math.min(Math.round(offset.value), state.routes.length - 1)),\r\n        (index) => runOnJS(setViewing)(index),\r\n        [navigation, offset, state.routes.length]\r\n    );\r\n\r\n    // React to viewed page change by scrolling to the page in the top tabs.\r\n    useEffect(() => {\r\n        pages.current?.scrollTo(viewing);\r\n    }, [pages, viewing]);\r\n\r\n    // Style that translates the arranger, so it shows the page.\r\n    const translation = useAnimatedStyle(\r\n        () => ({\r\n            transform: [{ translateX: -width * offset.value }],\r\n        }),\r\n        [width, offset]\r\n    );\r\n\r\n    // Swipe page gesture.\r\n    const gesture = Gesture.Pan()\r\n        .activeOffsetX([-panSlack, panSlack])\r\n        .onBegin(() => {\r\n            start.value = offset.value;\r\n            cancelAnimation(offset);\r\n        })\r\n        .onUpdate((e) => {\r\n            // Update from translation.\r\n            offset.value = Math.max(0, Math.min(-e.translationX / width + start.value, state.routes.length - 1));\r\n        })\r\n        .onEnd((e) => {\r\n            const shift = e.translationX > 0 ? -0.4 : 0.4;\r\n            const index = Math.max(0, Math.min(Math.round(offset.value + shift), state.routes.length - 1));\r\n\r\n            // Animate to the end position. If able to finish, sync navigation.\r\n            offset.value = withTiming(index, { duration: 234, easing: Easing.out(Easing.cubic) }, (finished, current) => {\r\n                if (finished) {\r\n                    // The callback apparently does not work as per spec, or the closure is not capturing the proper index. Therefore\r\n                    // we want to navigate to the actual endpoint rather than the index.\r\n                    runOnJS(navigateTab)(navigation, Math.round(current as number));\r\n                }\r\n            });\r\n        });\r\n\r\n    return (\r\n        <NavigationContent>\r\n            {/* Page bar. */}\r\n            <Pages\r\n                ref={pages}\r\n                style={pagesStyle}\r\n                indicatorIndex={offset}\r\n                pages={state.routes.map((route, i) => ({\r\n                    active: viewing === i,\r\n                    highlight: descriptors[route.key].options.highlight,\r\n                    icon: descriptors[route.key].options.icon,\r\n                    text: descriptors[route.key].options.title,\r\n                    onPress: () => {\r\n                        offset.value = i;\r\n                        navigateTab(navigation, i);\r\n                    },\r\n                }))}\r\n            />\r\n\r\n            {/* Pages content. */}\r\n            <View style={[styles.content, contentStyle]} onLayout={(e) => setWidth(e.nativeEvent.layout.width || width)}>\r\n                <GestureDetector gesture={gesture}>\r\n                    <Animated.View style={[styles.arranger, arrangerWidth, translation]}>\r\n                        {state.routes.map((route, i) => (\r\n                            <View key={route.key} style={styles.page}>\r\n                                {shouldSkipChild(viewing, i, detach) ? null : descriptors[route.key].render()}\r\n                            </View>\r\n                        ))}\r\n                    </Animated.View>\r\n                </GestureDetector>\r\n            </View>\r\n        </NavigationContent>\r\n    );\r\n};\r\n\r\nexport const createPagesNavigator = createNavigatorFactory(PagesNavigator);\r\n\r\nconst styles = StyleSheet.create({\r\n    content: {\r\n        flex: 1,\r\n        overflow: \"hidden\",\r\n    },\r\n    arranger: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        flexDirection: \"row\",\r\n        alignItems: \"stretch\",\r\n    },\r\n    page: {\r\n        flex: 1,\r\n    },\r\n});\r\n\r\nconst shouldSkipChild = (index: number, i: number, detach: boolean) => {\r\n    if (!detach) return false;\r\n    switch (i) {\r\n        case index - 1:\r\n        case index:\r\n        case index + 1:\r\n            return false;\r\n        default:\r\n            return true;\r\n    }\r\n};\r\n","import { FC } from \"react\";\r\n\r\nimport { Section, SectionProps } from \"../../components/Atoms/Section\";\r\n\r\nexport type DealerSectionProps = SectionProps;\r\n\r\nexport const DealerSection: FC<DealerSectionProps> = ({ title, subtitle, icon }) => {\r\n    return <Section title={title} subtitle={subtitle} icon={icon} />;\r\n};\r\n","import { FC, ReactNode, useCallback } from \"react\";\r\nimport { SectionList, StyleSheet, View } from \"react-native\";\r\n\r\nimport { useSynchronizer } from \"../../components/Synchronization/SynchronizationProvider\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { DealerDetails } from \"../../store/eurofurence.types\";\r\nimport { DealerCard } from \"./DealerCard\";\r\nimport { DealerSection, DealerSectionProps } from \"./DealerSection\";\r\n\r\nexport type DealersSectionedListItem = DealerSectionProps & {\r\n    data: DealerDetails[];\r\n};\r\n\r\n/**\r\n * The properties to the component.\r\n */\r\nexport type DealersSectionedListGenericProps = {\r\n    leader?: ReactNode;\r\n    dealersGroups: DealersSectionedListItem[];\r\n    trailer?: ReactNode;\r\n};\r\n\r\nexport const DealersSectionedListGeneric: FC<DealersSectionedListGenericProps> = ({ leader, dealersGroups, trailer }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const navigateTo = useCallback((dealer) => navigation.push(\"Dealer\", { id: dealer.Id }), [navigation]);\r\n    const synchronizer = useSynchronizer();\r\n    return (\r\n        <View style={StyleSheet.absoluteFill}>\r\n            <SectionList\r\n                refreshing={synchronizer.isSynchronizing}\r\n                onRefresh={synchronizer.synchronize}\r\n                style={styles.list}\r\n                contentContainerStyle={styles.container}\r\n                scrollEnabled={true}\r\n                ListHeaderComponent={<>{leader}</>}\r\n                ListFooterComponent={<>{trailer}</>}\r\n                sections={dealersGroups}\r\n                keyExtractor={(item) => item.Id}\r\n                initialNumToRender={5}\r\n                maxToRenderPerBatch={5}\r\n                renderSectionHeader={({ section }) => <DealerSection title={section.title} subtitle={section.subtitle} icon={section.icon} />}\r\n                renderItem={(entry: { item: DealerDetails }) => <DealerCard key={entry.item.Id} dealer={entry.item} onPress={() => navigateTo(entry.item)} />}\r\n            />\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    list: {\r\n        flex: 1,\r\n    },\r\n    container: {\r\n        paddingHorizontal: 20,\r\n        paddingBottom: 100,\r\n    },\r\n});\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport { chain } from \"lodash\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { conName } from \"../../configuration\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { dealersSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { DealersSectionedListGeneric } from \"./DealersSectionedListGeneric\";\r\nimport { DealersTabsScreenParamsList } from \"./DealersTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type DealersListAllScreenParams = object;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type DealersListAllScreenProps =\r\n    // Route carrying from dealers tabs screen at \"All\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<DealersTabsScreenParamsList, \"All\">,\r\n        PagesScreenProps<DealersTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const DealersListAllScreen: FC<DealersListAllScreenProps> = () => {\r\n    const { t } = useTranslation(\"Dealers\");\r\n\r\n    // Get the day. Use it to resolve events to display.\r\n    const dealers = useAppSelector(dealersSelectors.selectAll);\r\n    const dealersGroups = useMemo(() => {\r\n        return chain(dealers)\r\n            .orderBy(\"FullName\")\r\n            .groupBy((dealer) => dealer.FullName.substring(0, 1).toUpperCase())\r\n            .entries()\r\n            .map(([firstLetter, events]) => ({\r\n                title: firstLetter,\r\n                icon: \"bookmark\" as IconNames,\r\n                data: events,\r\n            }))\r\n            .value();\r\n    }, [t, dealers]);\r\n\r\n    return (\r\n        <DealersSectionedListGeneric\r\n            dealersGroups={dealersGroups}\r\n            leader={\r\n                <Label type=\"h1\" variant=\"middle\" mt={30}>\r\n                    {t(\"dealers_at_convention\", { convention: conName })}\r\n                </Label>\r\n            }\r\n        />\r\n    );\r\n};\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport { chain } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectDealersByDayName } from \"../../store/eurofurence.selectors\";\r\nimport { AttendanceDay } from \"../../store/eurofurence.types\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { DealersSectionedListGeneric } from \"./DealersSectionedListGeneric\";\r\nimport { DealersTabsScreenParamsList } from \"./DealersTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type DealersListByDayScreenParams = object;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type DealersListByDayScreenProps =\r\n    // Route carrying from dealers tabs screen at any of the day names, own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<DealersTabsScreenParamsList, \"Thu\" | \"Fri\" | \"Sat\">,\r\n        PagesScreenProps<DealersTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const DealersListByDayScreen: FC<DealersListByDayScreenProps> = ({ route }) => {\r\n    const { t } = useTranslation(\"Dealers\");\r\n\r\n    // Get the day. Use it to resolve events to display.\r\n    // TODO: @lukashaertel pls fix\r\n    const day = route.name.toLowerCase() as AttendanceDay;\r\n    const dealers = useAppSelector((state) => selectDealersByDayName(state, day));\r\n    const dealersGroups = useMemo(() => {\r\n        return chain(dealers)\r\n            .orderBy(\"FullName\")\r\n            .groupBy((dealer) => dealer.FullName.substring(0, 1).toUpperCase())\r\n            .entries()\r\n            .map(([firstLetter, events]) => ({\r\n                title: firstLetter,\r\n                icon: \"bookmark\" as IconNames,\r\n                data: events,\r\n            }))\r\n            .value();\r\n    }, [t, dealers]);\r\n\r\n    // Formatted lead content.\r\n    const lead = useMemo(\r\n        () =>\r\n            // Match thursday.\r\n            (day === \"thu\" && t(\"dealers_on_day\", { day: moment().day(4).format(\"dddd\") })) ||\r\n            // Match friday.\r\n            (day === \"fri\" && t(\"dealers_on_day\", { day: moment().day(5).format(\"dddd\") })) ||\r\n            // Match saturday.\r\n            (day === \"sat\" && t(\"dealers_on_day\", { day: moment().day(6).format(\"dddd\") })) ||\r\n            // Match saturday.\r\n            t(\"dealers_on_this_day\"),\r\n        [t, day]\r\n    );\r\n\r\n    return (\r\n        <DealersSectionedListGeneric\r\n            dealersGroups={dealersGroups}\r\n            leader={\r\n                <Label type=\"h1\" variant=\"middle\" mt={30}>\r\n                    {lead}\r\n                </Label>\r\n            }\r\n        />\r\n    );\r\n};\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { NavigatorScreenParams } from \"@react-navigation/native\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport moment from \"moment\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { createPagesNavigator, PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventDaysSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { DealersListAllScreen, DealersListAllScreenParams } from \"./DealersListAllScreen\";\r\nimport { DealersListByDayScreen, DealersListByDayScreenParams } from \"./DealersListByDayScreen\";\r\n\r\n/**\r\n * Available routes.\r\n */\r\nexport type DealersTabsScreenParamsList = {\r\n    All: DealersListAllScreenParams;\r\n    Thu: DealersListByDayScreenParams;\r\n    Fri: DealersListByDayScreenParams;\r\n    Sat: DealersListByDayScreenParams;\r\n};\r\n\r\n/**\r\n * Create an instance of the pages-navigator with the provided routes.\r\n */\r\nconst DealersTabsScreenNavigator = createPagesNavigator<DealersTabsScreenParamsList>();\r\n\r\n/**\r\n * Params handled by the screen in route. Delegated parameters for the days. TODO: Verify.\r\n */\r\nexport type DealersTabsScreenParams = NavigatorScreenParams<DealersTabsScreenParamsList>;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type DealersTabsScreenProps = CompositeScreenProps<TabScreenProps<ScreenAreasParamsList, \"Events\">, StackScreenProps<ScreenStartParamsList>>;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type EventsTabsScreenProps =\r\n    // Route carrying from area screen at \"Dealers\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        TabScreenProps<ScreenAreasParamsList, \"Dealers\">,\r\n        PagesScreenProps<DealersTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const DealersTabsScreen: FC<DealersTabsScreenProps> = () => {\r\n    const { t } = useTranslation(\"Dealers\");\r\n    const [now] = useNow();\r\n\r\n    // Use days to resolve actual dates.\r\n    const days = useAppSelector(eventDaysSelectors.selectAll);\r\n\r\n    // Formatted names.\r\n    const { thu, fri, sat } = useMemo(\r\n        () => ({\r\n            thu: moment().day(4).format(\"ddd\"),\r\n            fri: moment().day(5).format(\"ddd\"),\r\n            sat: moment().day(6).format(\"ddd\"),\r\n        }),\r\n        [t]\r\n    );\r\n\r\n    // Returns the flags if this is the current day.\r\n    const { isThu, isFri, isSat } = useMemo(() => {\r\n        const thuDate = days.map((day) => moment(day.Date)).find((moment) => moment.day() === 4);\r\n        const friDate = days.map((day) => moment(day.Date)).find((moment) => moment.day() === 5);\r\n        const satDate = days.map((day) => moment(day.Date)).find((moment) => moment.day() === 6);\r\n\r\n        return {\r\n            isThu: thuDate?.isSame(now, \"day\") ?? false,\r\n            isFri: friDate?.isSame(now, \"day\") ?? false,\r\n            isSat: satDate?.isSame(now, \"day\") ?? false,\r\n        };\r\n    }, [now]);\r\n\r\n    // Compute the safe area.\r\n    const top = useSafeAreaInsets()?.top;\r\n    const pagesStyle = useMemo(() => ({ paddingTop: top }), [top]);\r\n\r\n    // If the screens require too much performance we should set detach to true again.\r\n    return (\r\n        <DealersTabsScreenNavigator.Navigator pagesStyle={pagesStyle} initialRouteName=\"All\">\r\n            <DealersTabsScreenNavigator.Screen name=\"All\" options={{ title: t(\"all\") }} component={DealersListAllScreen} />\r\n            <DealersTabsScreenNavigator.Screen name=\"Thu\" options={{ title: thu, highlight: isThu }} component={DealersListByDayScreen} />\r\n            <DealersTabsScreenNavigator.Screen name=\"Fri\" options={{ title: fri, highlight: isFri }} component={DealersListByDayScreen} />\r\n            <DealersTabsScreenNavigator.Screen name=\"Sat\" options={{ title: sat, highlight: isSat }} component={DealersListByDayScreen} />\r\n        </DealersTabsScreenNavigator.Navigator>\r\n    );\r\n};\r\n","import { createContext, FC, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventsSelector } from \"../../store/eurofurence.selectors\";\r\nimport { EventDetails } from \"../../store/eurofurence.types\";\r\n\r\nexport type EventsSearchContextType = {\r\n    search: string;\r\n    setSearch: (results: string) => void;\r\n    results: null | EventDetails[];\r\n};\r\n\r\nexport const EventsSearchContext = createContext<EventsSearchContextType>({\r\n    search: \"\",\r\n    setSearch: () => undefined,\r\n    results: null,\r\n});\r\n\r\nexport const EventsSearchProvider: FC = ({ children }) => {\r\n    // Source of all events.\r\n    const events = useAppSelector(eventsSelector.selectAll);\r\n\r\n    // State of query and results.\r\n    const [search, setSearch] = useState<string>(\"\");\r\n    const [results, setResults] = useState<null | EventDetails[]>(null);\r\n\r\n    // Perform search.\r\n    useEffect(() => {\r\n        if (search.length < 3) {\r\n            setResults(null);\r\n            return;\r\n        }\r\n\r\n        const handle = setTimeout(() => {\r\n            const searchActual = search.toLowerCase().trim();\r\n            const results = events.filter(\r\n                (event) =>\r\n                    event.Title.toLowerCase().includes(searchActual) ||\r\n                    event.SubTitle?.toLowerCase()?.includes(searchActual) ||\r\n                    event.Abstract?.toLowerCase()?.includes(searchActual) ||\r\n                    event.PanelHosts?.toLowerCase()?.includes(searchActual)\r\n            );\r\n            setResults(results);\r\n        }, 100);\r\n\r\n        return () => clearTimeout(handle);\r\n    }, [events, search]);\r\n\r\n    const context = useMemo<EventsSearchContextType>(\r\n        () => ({\r\n            search,\r\n            setSearch,\r\n            results,\r\n        }),\r\n        [search, setSearch, results]\r\n    );\r\n\r\n    return <EventsSearchContext.Provider value={context}>{children}</EventsSearchContext.Provider>;\r\n};\r\n\r\nexport const useEventsSearchContext = () => useContext(EventsSearchContext);\r\n\r\nexport const useEventsSearchResults = () => useContext(EventsSearchContext).results;\r\n\r\nexport const useEventsSearchHasResults = () => useContext(EventsSearchContext).results !== null;\r\n\r\nexport const useEventsSearchQuery = () => useContext(EventsSearchContext).search;\r\n\r\nexport const useEventsSearchSetQuery = () => useContext(EventsSearchContext).setSearch;\r\n","import BottomSheet, { BottomSheetScrollView } from \"@gorhom/bottom-sheet\";\r\nimport { FC, useEffect, useRef } from \"react\";\r\nimport { StyleSheet } from \"react-native\";\r\n\r\nimport { EventDetails } from \"../../store/eurofurence.types\";\r\nimport { EventContent } from \"./EventContent\";\r\n\r\ntype EventActionsSheetProps = {\r\n    eventRecord: EventDetails | undefined;\r\n    onClose?: () => void;\r\n};\r\n\r\nexport const EventActionsSheet: FC<EventActionsSheetProps> = ({ eventRecord, onClose }) => {\r\n    const sheetRef = useRef<BottomSheet>(null);\r\n\r\n    useEffect(() => {\r\n        if (eventRecord) {\r\n            sheetRef.current?.snapToIndex(0);\r\n        } else {\r\n            sheetRef.current?.close();\r\n        }\r\n    }, [eventRecord]);\r\n\r\n    if (eventRecord === undefined) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <BottomSheet snapPoints={[\"25%\", \"50%\", \"75%\"]} index={-1} enablePanDownToClose ref={sheetRef} onClose={onClose}>\r\n            <BottomSheetScrollView style={styles.container}>{eventRecord && <EventContent event={eventRecord} />}</BottomSheetScrollView>\r\n        </BottomSheet>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        paddingHorizontal: 30,\r\n        paddingBottom: 100,\r\n    },\r\n});\r\n","import { useCallback, useMemo } from \"react\";\r\n\r\nimport { EventRecord } from \"../store/eurofurence.types\";\r\nimport { useNow } from \"./useNow\";\r\n\r\n/**\r\n * Uses a boolean that is true if the passed event is happening.\r\n * @param event The event, start and end need to be present.\r\n */\r\nexport const useEventIsHappening = (event: Pick<EventRecord, \"StartDateTimeUtc\" | \"EndDateTimeUtc\">) => {\r\n    const [now] = useNow();\r\n    return useMemo(() => now.isBetween(event.StartDateTimeUtc, event.EndDateTimeUtc), [now, event]);\r\n};\r\n\r\n/**\r\n * Uses a boolean that is true if the passed event is done.\r\n * @param event The event, start and end need to be present.\r\n */\r\nexport const useEventIsDone = (event: Pick<EventRecord, \"EndDateTimeUtc\">) => {\r\n    const [now] = useNow();\r\n    return useMemo(() => now.isAfter(event.EndDateTimeUtc), [now, event]);\r\n};\r\n\r\n/**\r\n * Returns a function that can check if a passed event is happening. This can be\r\n * used for example as a filter.\r\n */\r\nexport const useIsEventHappening = () => {\r\n    const [now] = useNow();\r\n    return useCallback((event: Pick<EventRecord, \"StartDateTimeUtc\" | \"EndDateTimeUtc\">) => now.isBetween(event.StartDateTimeUtc, event.EndDateTimeUtc), [now]);\r\n};\r\n\r\n/**\r\n * Returns a function that can check if a passed event is done. This can be used\r\n * for example as a filter.\r\n */\r\nexport const useIsEventDone = () => {\r\n    const [now] = useNow();\r\n    return useCallback((event: Pick<EventRecord, \"StartDateTimeUtc\" | \"EndDateTimeUtc\">) => now.isAfter(event.EndDateTimeUtc), [now]);\r\n};\r\n","import { FC, useEffect, useMemo } from \"react\";\r\nimport { ColorValue, StyleSheet, ViewStyle } from \"react-native\";\r\nimport Animated, { cancelAnimation, useAnimatedStyle, useSharedValue, withDelay, withRepeat, withSequence, withTiming } from \"react-native-reanimated\";\r\n\r\nimport { useTheme } from \"../../context/Theme\";\r\n\r\nexport type IndicatorProps = {\r\n    color: ColorValue;\r\n};\r\n\r\nexport const Indicator: FC<IndicatorProps> = ({ color }) => {\r\n    const theme = useTheme();\r\n    const at = useSharedValue(0);\r\n\r\n    useEffect(() => {\r\n        at.value = 0;\r\n        at.value = withRepeat(\r\n            withSequence(\r\n                // Animate in.\r\n                withDelay(1000, withTiming(1, { duration: 1000 })),\r\n                // Animate out.\r\n                withDelay(1000, withTiming(0, { duration: 1000 }))\r\n            ),\r\n            -1\r\n        );\r\n\r\n        return () => cancelAnimation(at);\r\n    }, []);\r\n\r\n    const styleIndicator = useMemo<ViewStyle>(() => ({ backgroundColor: color }), [theme]);\r\n\r\n    const dynamicIndicator = useAnimatedStyle(\r\n        () => ({\r\n            opacity: at.value,\r\n        }),\r\n        [at]\r\n    );\r\n\r\n    return <Animated.View style={[styles.indicator, styleIndicator, dynamicIndicator]} />;\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    indicator: {\r\n        width: 4,\r\n        height: 4,\r\n        borderRadius: 4,\r\n    },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport React, { FC, memo, ReactNode, useMemo } from \"react\";\r\nimport { ColorValue, ImageBackground, ImageSourcePropType, StyleSheet, TouchableOpacity, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Indicator } from \"../../components/Atoms/Indicator\";\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { appStyles } from \"../AppStyles\";\r\n\r\nconst glyphIconSize = 90;\r\nconst badgeIconSize = 20;\r\n\r\nexport type EventCardProps = {\r\n    badges?: IconNames[];\r\n    glyph?: IconNames;\r\n    pre: ReactNode;\r\n    poster?: ImageSourcePropType;\r\n    title?: string;\r\n    subtitle?: string;\r\n    tag?: string;\r\n    happening: boolean;\r\n    done: boolean;\r\n    onPress?: () => void;\r\n    onLongPress?: () => void;\r\n};\r\n\r\nexport const EventCardContent: FC<EventCardProps> = memo(({ badges, glyph, pre, poster, title, subtitle, tag, happening, done, onPress, onLongPress }) => {\r\n    const theme = useTheme();\r\n    const styleContainer = useMemo<ViewStyle>(() => ({ backgroundColor: theme.background }), [theme]);\r\n    const stylePre = useMemo<ViewStyle>(() => ({ backgroundColor: done ? theme.darken : theme.primary }), [done, theme]);\r\n    const styleBadgeFrame = useMemo<ViewStyle>(() => ({ backgroundColor: theme.secondary }), [theme]);\r\n    const colorBadge = useMemo<ColorValue>(() => theme.white, [theme]);\r\n    const colorGlyph = useMemo<ColorValue>(() => (done ? theme.soften : theme.white), [done, theme]);\r\n    return (\r\n        <TouchableOpacity style={[styles.container, appStyles.shadow, styleContainer]} onPress={onPress} onLongPress={onLongPress}>\r\n            <View style={[styles.pre, stylePre]}>\r\n                {!glyph ? null : (\r\n                    <View style={styles.glyphContainer}>\r\n                        <Icon style={styles.glyph} name={glyph} size={glyphIconSize} color={colorGlyph} />\r\n                    </View>\r\n                )}\r\n                {pre}\r\n            </View>\r\n\r\n            {poster ? (\r\n                <View style={styles.mainPoster}>\r\n                    <ImageBackground source={poster} resizeMode={\"cover\"} style={StyleSheet.absoluteFill}>\r\n                        <View style={styles.tagArea2}>\r\n                            <View style={styles.tagAreaInner}>\r\n                                <Label style={styles.tag} type=\"regular\" color=\"white\" ellipsizeMode=\"head\" numberOfLines={1}>\r\n                                    {title} {subtitle}\r\n                                </Label>\r\n                                {tag && (\r\n                                    <Label style={styles.tag} type=\"regular\" color=\"white\" ellipsizeMode=\"head\" numberOfLines={1}>\r\n                                        {tag}\r\n                                    </Label>\r\n                                )}\r\n                            </View>\r\n                        </View>\r\n                    </ImageBackground>\r\n                </View>\r\n            ) : (\r\n                <View style={styles.mainText}>\r\n                    <Label type=\"h3\">{title}</Label>\r\n                    <Label type=\"h4\" variant=\"narrow\">\r\n                        {subtitle}\r\n                    </Label>\r\n                    <Label style={styles.tag} type=\"regular\" ellipsizeMode=\"head\" numberOfLines={1}>\r\n                        {tag}\r\n                    </Label>\r\n                </View>\r\n            )}\r\n\r\n            {!badges ? null : (\r\n                <View style={styles.badgeContainer}>\r\n                    {badges.map((icon) => (\r\n                        <View key={icon} style={[styles.badgeFrame, styleBadgeFrame]}>\r\n                            <Icon name={icon} color={colorBadge} size={badgeIconSize} />\r\n                        </View>\r\n                    ))}\r\n                </View>\r\n            )}\r\n\r\n            {!happening ? null : (\r\n                <View style={styles.indicator}>\r\n                    <Indicator color={theme.white} />\r\n                </View>\r\n            )}\r\n        </TouchableOpacity>\r\n    );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        minHeight: 80,\r\n        marginVertical: 15,\r\n        borderRadius: 16,\r\n        overflow: \"hidden\",\r\n        flexDirection: \"row\",\r\n    },\r\n    glyphContainer: {\r\n        position: \"absolute\",\r\n        left: -20,\r\n        top: -20,\r\n        right: -20,\r\n        bottom: -20,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    glyph: {\r\n        opacity: 0.2,\r\n        transform: [{ rotate: \"-15deg\" }],\r\n    },\r\n    badgeContainer: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        right: 0,\r\n        flexDirection: \"row\",\r\n    },\r\n    badgeFrame: {\r\n        borderRadius: 16,\r\n        flex: 1,\r\n        padding: 4,\r\n        margin: 8,\r\n    },\r\n    pre: {\r\n        overflow: \"hidden\",\r\n        width: 70,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    mainPoster: {\r\n        height: 120,\r\n        flex: 1,\r\n        padding: 16,\r\n    },\r\n    mainText: {\r\n        flex: 1,\r\n        padding: 16,\r\n    },\r\n    subtitleArea: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    tag: {\r\n        textAlign: \"right\",\r\n    },\r\n    tagArea: {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        backgroundColor: \"#000000A0\",\r\n        paddingLeft: 16,\r\n        paddingBottom: 16,\r\n        paddingRight: 16,\r\n        paddingTop: 32,\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"flex-end\",\r\n    },\r\n    tagArea2: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-end\",\r\n        alignContent: \"flex-start\",\r\n        alignItems: \"stretch\",\r\n\r\n        height: \"100%\",\r\n    },\r\n    tagAreaInner: {\r\n        backgroundColor: \"#000000A0\",\r\n        padding: 8,\r\n        justifyContent: \"space-between\",\r\n        flexDirection: \"row\",\r\n        flexWrap: \"wrap\",\r\n    },\r\n    indicator: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        padding: 14,\r\n    },\r\n});\r\n","import moment from \"moment\";\r\nimport React, { FC, ReactNode, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Col } from \"../../components/Containers/Col\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useEventIsDone, useEventIsHappening } from \"../../hooks/useEventProperties\";\r\nimport { EventDetails } from \"../../store/eurofurence.types\";\r\nimport { EventCardContent } from \"./EventCardContent\";\r\n\r\nexport type EventCardProps = {\r\n    type?: \"duration\" | \"time\";\r\n    event: EventDetails;\r\n    onPress?: () => void;\r\n    onLongPress?: () => void;\r\n};\r\n\r\nexport const EventCard: FC<EventCardProps> = ({ type = \"duration\", event, onPress, onLongPress }) => {\r\n    const { t } = useTranslation(\"Event\");\r\n    const theme = useTheme();\r\n\r\n    // Resolve event statuses.\r\n    const happening = useEventIsHappening(event);\r\n    const done = useEventIsDone(event);\r\n\r\n    // Renders the override or default. The override will receive if it needs to\r\n    // render on inverted color, i.e., background.\r\n    const pre = useMemo<ReactNode>(() => {\r\n        // Convert event start and duration to readable.\r\n        const start = moment(event.StartDateTimeUtc);\r\n        const duration = moment.duration(event.Duration);\r\n\r\n        const day = start.format(\"ddd\");\r\n        const time = start.format(\"LT\");\r\n        const runtime = duration.asMinutes() > 59 ? duration.asHours() + \"h\" : duration.asMinutes() + \"m\";\r\n\r\n        if (type === \"duration\") {\r\n            // Return simple label with duration text.\r\n            return (\r\n                <Col type=\"center\">\r\n                    <Label type=\"caption\" color={done ? \"important\" : \"invText\"}>\r\n                        {time}\r\n                    </Label>\r\n                    <Label color={done ? \"important\" : \"invText\"}>{runtime}</Label>\r\n                </Col>\r\n            );\r\n        } else {\r\n            return (\r\n                <Col type=\"center\">\r\n                    <Label type=\"caption\" color={done ? \"important\" : \"invText\"}>\r\n                        {time}\r\n                    </Label>\r\n                    <Label color={done ? \"important\" : \"invText\"}>{day}</Label>\r\n                </Col>\r\n            );\r\n        }\r\n    }, [t, type, event, done, theme]);\r\n\r\n    return (\r\n        <EventCardContent\r\n            badges={event.Badges}\r\n            glyph={event.Glyph}\r\n            pre={pre}\r\n            poster={event.Banner ? { uri: event.Banner.FullUrl } : undefined}\r\n            title={event.Title}\r\n            subtitle={event.SubTitle}\r\n            tag={event.ConferenceRoom?.ShortName ?? event.ConferenceRoom?.Name}\r\n            happening={happening}\r\n            done={done}\r\n            onPress={onPress}\r\n            onLongPress={onLongPress}\r\n        />\r\n    );\r\n};\r\n","import { FC } from \"react\";\r\n\r\nimport { Section, SectionProps } from \"../../components/Atoms/Section\";\r\n\r\nexport type EventSectionProps = SectionProps;\r\n\r\nexport const EventSection: FC<EventSectionProps> = ({ title, subtitle, icon }) => {\r\n    return <Section title={title} subtitle={subtitle} icon={icon} />;\r\n};\r\n","import { FC, ReactNode, useCallback, useState } from \"react\";\r\nimport { SectionList, StyleSheet, Vibration, View } from \"react-native\";\r\n\r\nimport { useSynchronizer } from \"../../components/Synchronization/SynchronizationProvider\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { EventDetails } from \"../../store/eurofurence.types\";\r\nimport { EventActionsSheet } from \"./EventActionsSheet\";\r\nimport { EventCard } from \"./EventCard\";\r\nimport { EventSection, EventSectionProps } from \"./EventSection\";\r\n\r\nexport type EventsSectionedListItem = EventSectionProps & {\r\n    data: EventDetails[];\r\n};\r\n\r\n/**\r\n * The properties to the component.\r\n */\r\nexport type EventsSectionedListGenericProps = {\r\n    leader?: ReactNode;\r\n    eventsGroups: EventsSectionedListItem[];\r\n    trailer?: ReactNode;\r\n    cardType?: \"duration\" | \"time\";\r\n};\r\n\r\nexport const EventsSectionedListGeneric: FC<EventsSectionedListGenericProps> = ({ leader, eventsGroups, trailer, cardType = \"duration\" }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    // Set event for action sheet\r\n    const [selectedEvent, setSelectedEvent] = useState<EventDetails | undefined>(undefined);\r\n\r\n    // Prepare navigation callback. This clones the respective parameters, as otherwise illegal mutation will occur.\r\n    const navigateTo = useCallback((event) => navigation.push(\"Event\", { id: event.Id }), [navigation]);\r\n    const synchronizer = useSynchronizer();\r\n\r\n    return (\r\n        <View style={StyleSheet.absoluteFill}>\r\n            <SectionList\r\n                refreshing={synchronizer.isSynchronizing}\r\n                onRefresh={synchronizer.synchronize}\r\n                style={styles.list}\r\n                contentContainerStyle={styles.container}\r\n                scrollEnabled={true}\r\n                ListHeaderComponent={<>{leader}</>}\r\n                ListFooterComponent={<>{trailer}</>}\r\n                sections={eventsGroups}\r\n                keyExtractor={(item) => item.Id}\r\n                initialNumToRender={5}\r\n                maxToRenderPerBatch={5}\r\n                renderSectionHeader={({ section }) => <EventSection title={section.title} subtitle={section.subtitle} icon={section.icon} />}\r\n                renderItem={(entry: { item: EventDetails }) => (\r\n                    <EventCard\r\n                        key={entry.item.Id}\r\n                        event={entry.item}\r\n                        type={cardType}\r\n                        onPress={() => navigateTo(entry.item)}\r\n                        onLongPress={() => {\r\n                            Vibration.vibrate(50);\r\n                            setSelectedEvent(entry.item);\r\n                        }}\r\n                    />\r\n                )}\r\n            />\r\n            <EventActionsSheet eventRecord={selectedEvent} onClose={() => setSelectedEvent(undefined)} />\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    list: {\r\n        flex: 1,\r\n    },\r\n    container: {\r\n        paddingHorizontal: 20,\r\n        paddingBottom: 100,\r\n    },\r\n});\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport { chain, partition } from \"lodash\";\r\nimport { FC, memo, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventDaysSelectors, selectEventsByDay } from \"../../store/eurofurence.selectors\";\r\nimport { EventDetails, PartOfDay } from \"../../store/eurofurence.types\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { EventsSectionedListGeneric } from \"./EventsSectionedListGeneric\";\r\nimport { EventsTabsScreenParamsList } from \"./EventsTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type EventsListByDayScreenParams = object;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type EventsListByDayScreenProps =\r\n    // Route carrying from events tabs screen at \"Day\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<EventsTabsScreenParamsList, string>,\r\n        PagesScreenProps<EventsTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const EventsListByDayScreen: FC<EventsListByDayScreenProps> = memo(({ route }) => {\r\n    const { t } = useTranslation(\"Events\");\r\n    const [now] = useNow();\r\n    // Get the day. Use it to resolve events to display.\r\n    // TODO: @lukashaertel pls fix\r\n    const day = useAppSelector((state) => eventDaysSelectors.selectById(state, route.name));\r\n    const eventsByDay: EventDetails[] = useAppSelector((state) => selectEventsByDay(state, day?.Id ?? \"\"));\r\n    const eventsGroups = useMemo(() => {\r\n        const [upcoming, passed] = partition(eventsByDay, (it) => (now.isSame(it.StartDateTimeUtc, \"days\") ? now.isBefore(it.EndDateTimeUtc) : true));\r\n\r\n        const stillUpcomingSections = chain(upcoming)\r\n            .orderBy(\"StartDateTimeUtc\")\r\n            .groupBy(\"PartOfDay\")\r\n            .entries()\r\n            .map(([partOfDay, events]) => ({\r\n                title: t(partOfDay as PartOfDay),\r\n                subtitle: t(\"events_count\", { count: events.length }),\r\n                icon: ((partOfDay === \"morning\" && \"weather-sunset-up\") ||\r\n                    (partOfDay === \"afternoon\" && \"weather-sunny\") ||\r\n                    (partOfDay === \"evening\" && \"weather-sunset-down\") ||\r\n                    (partOfDay === \"night\" && \"weather-night\") ||\r\n                    \"weather-sunny\") as IconNames,\r\n                data: events,\r\n            }))\r\n            .value();\r\n\r\n        const passedSections =\r\n            passed.length > 0\r\n                ? [\r\n                      {\r\n                          title: t(\"finished\"),\r\n                          subtitle: t(\"events_count\", { count: passed.length }),\r\n                          icon: \"history\" as IconNames,\r\n                          data: passed,\r\n                      },\r\n                  ]\r\n                : [];\r\n\r\n        return stillUpcomingSections.concat(...passedSections);\r\n    }, [t, eventsByDay, now]);\r\n\r\n    return (\r\n        <EventsSectionedListGeneric\r\n            eventsGroups={eventsGroups}\r\n            leader={\r\n                <Label type=\"h1\" variant=\"middle\" mt={30}>\r\n                    {day?.Name ?? \"\"}\r\n                </Label>\r\n            }\r\n        />\r\n    );\r\n});\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport { chain } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useIsEventDone } from \"../../hooks/useEventProperties\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventRoomsSelectors, selectEventsByRoom } from \"../../store/eurofurence.selectors\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { EventsSectionedListGeneric } from \"./EventsSectionedListGeneric\";\r\nimport { EventsTabsScreenParamsList } from \"./EventsTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type EventsListByRoomScreenParams = object;\r\n\r\n/**\r\n * The properties to the screen as a component. TODO: Unify and verify types.\r\n */\r\nexport type EventsListByRoomScreenProps =\r\n    // Route carrying from events tabs screen at \"Room\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<EventsTabsScreenParamsList, string>,\r\n        PagesScreenProps<EventsTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const EventsListByRoomScreen: FC<EventsListByRoomScreenProps> = ({ route }) => {\r\n    const { t } = useTranslation(\"Events\");\r\n    const isEventDone = useIsEventDone();\r\n\r\n    // Get the room. Use it to resolve events to display.\r\n    const room = useAppSelector((state) => eventRoomsSelectors.selectById(state, route.name));\r\n    const eventsByRoom = useAppSelector((state) => selectEventsByRoom(state, room?.Id ?? \"\"));\r\n    const eventsGroups = useMemo(() => {\r\n        const done = chain(eventsByRoom)\r\n            .filter((event) => isEventDone(event))\r\n            .orderBy([\"StartDateTimeUtc\", (event) => isEventDone(event)])\r\n            .value();\r\n\r\n        return chain(eventsByRoom)\r\n            .filter((event) => !isEventDone(event))\r\n            .orderBy(\"StartDateTimeUtc\")\r\n            .groupBy((event) => event.ConferenceDay?.Date)\r\n            .entries()\r\n            .map(([date, events]) => ({\r\n                title: moment(date).format(\"dddd\"),\r\n                subtitle: t(\"events_count\", { count: events.length }),\r\n                icon: \"calendar-outline\" as IconNames,\r\n                data: events,\r\n            }))\r\n            .thru((chain) =>\r\n                done.length === 0\r\n                    ? chain\r\n                    : chain.concat({\r\n                          title: t(\"events_done\"),\r\n                          subtitle: t(\"events_count\", { count: done.length }),\r\n                          icon: \"calendar-clock-outline\" as IconNames,\r\n                          data: done,\r\n                      })\r\n            )\r\n            .value();\r\n    }, [t, eventsByRoom, isEventDone]);\r\n\r\n    return (\r\n        <EventsSectionedListGeneric\r\n            eventsGroups={eventsGroups}\r\n            leader={\r\n                <Label type=\"h1\" variant=\"middle\" mt={30}>\r\n                    {room?.Name ?? \"\"}\r\n                </Label>\r\n            }\r\n            cardType=\"time\"\r\n        />\r\n    );\r\n};\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport { chain } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useIsEventDone } from \"../../hooks/useEventProperties\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventTracksSelectors, selectEventsByTrack } from \"../../store/eurofurence.selectors\";\r\nimport { IconNames } from \"../../types/IconNames\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { EventsSectionedListGeneric } from \"./EventsSectionedListGeneric\";\r\nimport { EventsTabsScreenParamsList } from \"./EventsTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type EventsListByTrackScreenParams = object;\r\n\r\n/**\r\n * The properties to the screen as a component. TODO: Unify and verify types.\r\n */\r\nexport type EventsListByTrackScreenProps =\r\n    // Route carrying from events tabs screen at \"Track\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<EventsTabsScreenParamsList, string>,\r\n        PagesScreenProps<EventsTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const EventsListByTrackScreen: FC<EventsListByTrackScreenProps> = ({ route }) => {\r\n    const { t } = useTranslation(\"Events\");\r\n    const isEventDone = useIsEventDone();\r\n\r\n    // Get the track. Use it to resolve events to display.\r\n    const track = useAppSelector((state) => eventTracksSelectors.selectById(state, route.name));\r\n    const eventsByTrack = useAppSelector((state) => selectEventsByTrack(state, track?.Id ?? \"\"));\r\n    const eventsGroups = useMemo(() => {\r\n        const done = chain(eventsByTrack)\r\n            .filter((event) => isEventDone(event))\r\n            .orderBy([\"StartDateTimeUtc\", (event) => isEventDone(event)])\r\n            .value();\r\n\r\n        return chain(eventsByTrack)\r\n            .filter((event) => !isEventDone(event))\r\n            .orderBy(\"StartDateTimeUtc\")\r\n            .groupBy((event) => event.ConferenceDay?.Date)\r\n            .entries()\r\n            .map(([date, events]) => ({\r\n                title: moment(date).format(\"dddd\"),\r\n                subtitle: t(\"events_count\", { count: events.length }),\r\n                icon: \"calendar-outline\" as IconNames,\r\n                data: events,\r\n            }))\r\n            .thru((chain) =>\r\n                done.length === 0\r\n                    ? chain\r\n                    : chain.concat({\r\n                          title: t(\"events_done\"),\r\n                          subtitle: t(\"events_count\", { count: done.length }),\r\n                          icon: \"calendar-clock-outline\" as IconNames,\r\n                          data: done,\r\n                      })\r\n            )\r\n            .value();\r\n    }, [t, eventsByTrack, isEventDone]);\r\n\r\n    return (\r\n        <EventsSectionedListGeneric\r\n            eventsGroups={eventsGroups}\r\n            leader={\r\n                <Label type=\"h1\" variant=\"middle\" mt={30}>\r\n                    {track?.Name ?? \"\"}\r\n                </Label>\r\n            }\r\n            cardType=\"time\"\r\n        />\r\n    );\r\n};\r\n","import { FC, ReactNode, useCallback, useState } from \"react\";\r\nimport { FlatList, StyleSheet, Vibration, View } from \"react-native\";\r\n\r\nimport { EventDetails } from \"../../store/eurofurence.types\";\r\nimport { EventActionsSheet } from \"./EventActionsSheet\";\r\nimport { EventCard } from \"./EventCard\";\r\nimport { EventsListByDayScreenProps } from \"./EventsListByDayScreen\";\r\nimport { EventsListByRoomScreenProps } from \"./EventsListByRoomScreen\";\r\nimport { EventsListByTrackScreenProps } from \"./EventsListByTrackScreen\";\r\nimport { EventsListSearchResultsScreenProps } from \"./EventsListSearchResultsScreen\";\r\nimport { EventsSearchScreenProps } from \"./EventsSearchScreen\";\r\n\r\n/**\r\n * The properties to the component.\r\n */\r\nexport type EventsListGenericProps = {\r\n    /**\r\n     * Navigation type. Copied from the screens rendering this component.\r\n     */\r\n    navigation:\r\n        | EventsSearchScreenProps[\"navigation\"]\r\n        | EventsListSearchResultsScreenProps[\"navigation\"]\r\n        | EventsListByDayScreenProps[\"navigation\"]\r\n        | EventsListByRoomScreenProps[\"navigation\"]\r\n        | EventsListByTrackScreenProps[\"navigation\"];\r\n    leader?: ReactNode;\r\n    events: EventDetails[];\r\n    trailer?: ReactNode;\r\n    cardType?: \"duration\" | \"time\";\r\n};\r\n\r\nexport const EventsListGeneric: FC<EventsListGenericProps> = ({ navigation, leader, events, trailer, cardType = \"duration\" }) => {\r\n    // Set event for action sheet\r\n    const [selectedEvent, setSelectedEvent] = useState<EventDetails | undefined>(undefined);\r\n\r\n    // Prepare navigation callback. This clones the respective parameters, as otherwise illegal mutation will occur.\r\n    const navigateTo = useCallback(\r\n        (event: EventDetails) =>\r\n            navigation.push(\"Event\", {\r\n                id: event.Id,\r\n            }),\r\n        [navigation]\r\n    );\r\n\r\n    return (\r\n        <View style={StyleSheet.absoluteFill}>\r\n            <FlatList\r\n                style={styles.list}\r\n                contentContainerStyle={styles.container}\r\n                scrollEnabled={true}\r\n                ListHeaderComponent={<>{leader}</>}\r\n                ListFooterComponent={<>{trailer}</>}\r\n                data={events}\r\n                keyExtractor={(item) => item.Id}\r\n                initialNumToRender={5}\r\n                maxToRenderPerBatch={5}\r\n                renderItem={(entry: { item: EventDetails }) => (\r\n                    <EventCard\r\n                        key={entry.item.Id}\r\n                        event={entry.item}\r\n                        type={cardType}\r\n                        onPress={() => navigateTo(entry.item)}\r\n                        onLongPress={() => {\r\n                            Vibration.vibrate(50);\r\n                            setSelectedEvent(entry.item);\r\n                        }}\r\n                    />\r\n                )}\r\n            />\r\n            <EventActionsSheet eventRecord={selectedEvent} onClose={() => setSelectedEvent(undefined)} />\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    list: {\r\n        flex: 1,\r\n    },\r\n    container: {\r\n        paddingHorizontal: 20,\r\n        paddingBottom: 100,\r\n    },\r\n});\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport { chain } from \"lodash\";\r\nimport { FC, useCallback, useMemo } from \"react\";\r\nimport { View } from \"react-native\";\r\n\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useEventsSearchContext } from \"../../components/Searching/EventsSearchContext\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { EventsListGeneric } from \"./EventsListGeneric\";\r\nimport { EventsTabsScreenParamsList } from \"./EventsTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type EventsListSearchResultsScreenParams = undefined;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type EventsListSearchResultsScreenProps =\r\n    // Route carrying from events tabs screen at \"Results\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<EventsTabsScreenParamsList, \"Results\">,\r\n        PagesScreenProps<EventsTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const EventsListSearchResultsScreen: FC<EventsListSearchResultsScreenProps> = ({ navigation }) => {\r\n    const { search, setSearch, results } = useEventsSearchContext();\r\n\r\n    const onClear = useCallback(() => {\r\n        setSearch(\"\");\r\n        navigation.jumpTo(\"Search\");\r\n    }, [setSearch, navigation]);\r\n\r\n    const events = useMemo(() => chain(results).orderBy(\"StartDateTimeUtc\").value(), []);\r\n\r\n    return (\r\n        <EventsListGeneric\r\n            navigation={navigation}\r\n            events={events}\r\n            cardType=\"time\"\r\n            leader={\r\n                <View style={{ paddingBottom: 30 }}>\r\n                    <Section icon=\"view-list\" title={search} subtitle={`${results?.length} results in total`} />\r\n                    <Button icon=\"chevron-left\" onPress={onClear}>\r\n                        Clear search\r\n                    </Button>\r\n                </View>\r\n            }\r\n        />\r\n    );\r\n};\r\n","import { CompositeScreenProps, useIsFocused } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport React, { FC, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Keyboard, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport { TextInput } from \"react-native-gesture-handler\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Floater } from \"../../components/Containers/Floater\";\r\nimport { Row } from \"../../components/Containers/Row\";\r\nimport { Tab } from \"../../components/Containers/Tab\";\r\nimport { PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useEventsSearchContext } from \"../../components/Searching/EventsSearchContext\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { EventsTabsScreenParamsList } from \"./EventsTabsScreen\";\r\n\r\n/**\r\n * Params handled by the screen in route.\r\n */\r\nexport type EventsSearchScreenParams = undefined;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type EventsSearchScreenProps =\r\n    // Route carrying from events tabs screen at \"Search\", own navigation via own parameter list.\r\n    CompositeScreenProps<\r\n        PagesScreenProps<EventsTabsScreenParamsList, \"Search\">,\r\n        PagesScreenProps<EventsTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const EventsSearchScreen: FC<EventsSearchScreenProps> = ({ navigation }) => {\r\n    const { t } = useTranslation(\"Events\");\r\n    const { search, setSearch, results } = useEventsSearchContext();\r\n\r\n    // Hide keyboard on navigating away from this page.\r\n    const isFocused = useIsFocused();\r\n    useEffect(() => {\r\n        if (!isFocused) Keyboard.dismiss();\r\n    }, [isFocused]);\r\n\r\n    const onDay = useCallback(() => navigation.getParent()?.setParams({ filterType: \"days\" }), [navigation]);\r\n    const onRoom = useCallback(() => navigation.getParent()?.setParams({ filterType: \"rooms\" }), [navigation]);\r\n    const onTrack = useCallback(() => navigation.getParent()?.setParams({ filterType: \"tracks\" }), [navigation]);\r\n\r\n    const theme = useTheme();\r\n    const border = useMemo<ViewStyle>(() => ({ borderBottomColor: theme.text }), [theme]);\r\n    const roundedStyle = useMemo<ViewStyle>(() => ({ backgroundColor: theme.secondary }), [theme]);\r\n    return (\r\n        <Floater>\r\n            <View style={styles.end}>\r\n                <View style={styles.searchArea}>\r\n                    <Label type=\"caption\">Enter your query</Label>\r\n                    <TextInput style={[styles.searchField, border]} value={search} onChangeText={setSearch} placeholder=\"Enter query\" />\r\n\r\n                    {!results ? null : <Button onPress={() => navigation.jumpTo(\"Results\")}>View all {results.length} results</Button>}\r\n                </View>\r\n                <Row style={styles.categories} type=\"stretch\" variant=\"spaced\">\r\n                    <Tab style={[styles.rounded, roundedStyle]} inverted icon=\"calendar-outline\" text={t(\"filter_by_day\")} onPress={onDay} />\r\n                    <Tab style={[styles.rounded, styles.rowCenter, roundedStyle]} inverted icon=\"bus-stop\" text={t(\"filter_by_track\")} onPress={onTrack} />\r\n                    <Tab style={[styles.rounded, roundedStyle]} inverted icon=\"office-building\" text={t(\"filter_by_room\")} onPress={onRoom} />\r\n                </Row>\r\n            </View>\r\n        </Floater>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    end: {\r\n        justifyContent: \"flex-end\",\r\n        flex: 1,\r\n    },\r\n    categories: {\r\n        paddingBottom: 20,\r\n        marginBottom: 30,\r\n    },\r\n    searchArea: {\r\n        height: 160,\r\n    },\r\n    searchField: {\r\n        paddingVertical: 5,\r\n        borderBottomWidth: 1,\r\n        marginVertical: 25,\r\n    },\r\n    rounded: {\r\n        margin: 10,\r\n        borderRadius: 10,\r\n    },\r\n    rowCenter: {\r\n        marginHorizontal: 8,\r\n    },\r\n});\r\n","import _ from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectFavoriteEvents } from \"../../store/eurofurence.selectors\";\r\nimport { EventsSectionedListGeneric } from \"./EventsSectionedListGeneric\";\r\n\r\nexport const PersonalScheduleList = () => {\r\n    const { t } = useTranslation(\"Events\");\r\n    const [now] = useNow();\r\n    const events = useAppSelector(selectFavoriteEvents);\r\n\r\n    const sections = useMemo(() => {\r\n        const [past, upcoming] = _.partition(events, (it) => now.isAfter(it.EndDateTimeUtc, \"minutes\"));\r\n\r\n        const upcomingSections = _.chain(upcoming)\r\n            .orderBy((it) => moment(it.StartDateTimeUtc).valueOf(), \"asc\")\r\n            .groupBy((it) => it.ConferenceDay?.Name)\r\n            .map((items, day) => ({\r\n                title: day,\r\n                data: items,\r\n            }))\r\n            .value();\r\n\r\n        if (past.length > 0) {\r\n            upcomingSections.push({\r\n                title: t(\"finished\"),\r\n                data: past,\r\n            });\r\n        }\r\n\r\n        return upcomingSections;\r\n    }, [events]);\r\n\r\n    return (\r\n        <EventsSectionedListGeneric\r\n            eventsGroups={sections}\r\n            cardType={\"time\"}\r\n            leader={\r\n                <Label type=\"h1\" variant=\"middle\" mt={30}>\r\n                    {t(\"schedule_title\")}\r\n                </Label>\r\n            }\r\n        />\r\n    );\r\n};\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { NavigatorScreenParams } from \"@react-navigation/native\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport moment from \"moment\";\r\nimport { FC, useCallback, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { createPagesNavigator, PagesScreenProps } from \"../../components/Navigators/PagesNavigator\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useEventsSearchHasResults } from \"../../components/Searching/EventsSearchContext\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { eventDaysSelectors, eventRoomsSelectors, eventTracksSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { EventDayRecord } from \"../../store/eurofurence.types\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { EventsListByDayScreen, EventsListByDayScreenParams } from \"./EventsListByDayScreen\";\r\nimport { EventsListByRoomScreen, EventsListByRoomScreenParams } from \"./EventsListByRoomScreen\";\r\nimport { EventsListByTrackScreen, EventsListByTrackScreenParams } from \"./EventsListByTrackScreen\";\r\nimport { EventsListSearchResultsScreen, EventsListSearchResultsScreenParams } from \"./EventsListSearchResultsScreen\";\r\nimport { EventsSearchScreen, EventsSearchScreenParams } from \"./EventsSearchScreen\";\r\nimport { PersonalScheduleList } from \"./PersonalScheduleList\";\r\n\r\n// TODO: Might have an distinction between days, tracks, rooms as param.\r\n\r\n/**\r\n * Available routes.\r\n */\r\nexport type EventsTabsScreenParamsList = {\r\n    Favorites: object;\r\n    Search: EventsSearchScreenParams;\r\n\r\n    Results: EventsListSearchResultsScreenParams;\r\n} & {\r\n    /**\r\n     * All names (days) want events-day parameters.\r\n     */\r\n    [name: string]: EventsListByDayScreenParams | EventsListByTrackScreenParams | EventsListByRoomScreenParams;\r\n};\r\n\r\n/**\r\n * Create an instance of the pages-navigator with the provided routes.\r\n */\r\nconst EventsTabsScreenNavigator = createPagesNavigator<EventsTabsScreenParamsList>();\r\n\r\n/**\r\n * Params handled by the screen in route. Delegated parameters for the days. TODO: Verify.\r\n */\r\nexport type EventsTabsScreenParams = NavigatorScreenParams<EventsTabsScreenParamsList> & {\r\n    filterType?: \"days\" | \"tracks\" | \"rooms\";\r\n};\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type EventsTabsScreenProps =\r\n    // Route carrying from area screen at \"Events\", navigation via own parameter list and parents.\r\n    CompositeScreenProps<\r\n        TabScreenProps<ScreenAreasParamsList, \"Events\">,\r\n        PagesScreenProps<EventsTabsScreenParamsList> & TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>\r\n    >;\r\n\r\nexport const EventsTabsScreen: FC<EventsTabsScreenProps> = ({ route }) => {\r\n    const { t } = useTranslation(\"Events\");\r\n    const formatDay = useCallback((day: EventDayRecord) => moment(day.Date).format(\"ddd\"), [t]);\r\n\r\n    // Use now with optional time travel.\r\n    const [now] = useNow();\r\n\r\n    // Use event days.\r\n    const days = useAppSelector(eventDaysSelectors.selectAll);\r\n    const tracks = useAppSelector(eventTracksSelectors.selectAll);\r\n    const rooms = useAppSelector(eventRoomsSelectors.selectAll);\r\n\r\n    // Use to display results tab.\r\n    const hasSearchResults = useEventsSearchHasResults();\r\n\r\n    // Convert given optional type to actual filter type.\r\n    const actualType = useMemo(() => {\r\n        if (hasSearchResults) return \"results\";\r\n        // TODO: @lukashaertel pls fix\r\n        return route.params?.filterType ?? \"days\";\r\n        // TODO: @lukashaertel pls fix\r\n    }, [hasSearchResults, route.params?.filterType]);\r\n\r\n    // Get the current day ID.\r\n    const currentDayId = useMemo(() => days.find((day) => moment(day.Date).isSame(now, \"day\"))?.Id, [days, now]);\r\n\r\n    // Find initial name for selected type.\r\n    const initialId = useMemo(() => {\r\n        if (actualType === \"results\") return \"Results\";\r\n        if (actualType === \"days\") return currentDayId ?? days[0]?.Id;\r\n        if (actualType === \"tracks\") return tracks[0]?.Id;\r\n        if (actualType === \"rooms\") return rooms[0]?.Id;\r\n    }, [days, currentDayId, tracks, rooms, now, actualType]);\r\n\r\n    // Compute the safe area.\r\n    const top = useSafeAreaInsets()?.top;\r\n    const pagesStyle = useMemo(() => ({ paddingTop: top }), [top]);\r\n\r\n    // Ignore rendering if data is not loaded to prevent jumping on initialization.\r\n    if (actualType === \"days\" && !days?.length) return null;\r\n    if (actualType === \"tracks\" && !tracks?.length) return null;\r\n    if (actualType === \"rooms\" && !rooms?.length) return null;\r\n\r\n    // If the screens require too much performance we should set detach to true again.\r\n    return (\r\n        <EventsTabsScreenNavigator.Navigator pagesStyle={pagesStyle} initialRouteName={initialId}>\r\n            {/*Tab for searching and filtering*/}\r\n            <EventsTabsScreenNavigator.Screen name=\"Search\" options={{ icon: \"table-search\" }} component={EventsSearchScreen} />\r\n\r\n            <EventsTabsScreenNavigator.Screen name={\"Your Schedule\"} options={{ icon: \"calendar\" }} component={PersonalScheduleList} />\r\n\r\n            {actualType !== \"results\" ? null : <EventsTabsScreenNavigator.Screen name=\"Results\" options={{ icon: \"view-list\" }} component={EventsListSearchResultsScreen} />}\r\n\r\n            {actualType !== \"days\"\r\n                ? null\r\n                : days.map((day) => (\r\n                      <EventsTabsScreenNavigator.Screen\r\n                          key={day.Id}\r\n                          name={day.Id}\r\n                          component={EventsListByDayScreen}\r\n                          options={{ title: formatDay(day), highlight: day.Name === currentDayId }}\r\n                      />\r\n                  ))}\r\n\r\n            {actualType !== \"tracks\"\r\n                ? null\r\n                : tracks.map((track) => <EventsTabsScreenNavigator.Screen key={track.Id} name={track.Id} component={EventsListByTrackScreen} options={{ title: track.Name }} />)}\r\n\r\n            {actualType !== \"rooms\"\r\n                ? null\r\n                : rooms.map((room) => (\r\n                      <EventsTabsScreenNavigator.Screen key={room.Id} name={room.Id} component={EventsListByRoomScreen} options={{ title: room.ShortName ?? room.Name }} />\r\n                  ))}\r\n        </EventsTabsScreenNavigator.Navigator>\r\n    );\r\n};\r\n","import { FC } from \"react\";\r\nimport { Image, View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { MarkdownContent } from \"../../components/Atoms/MarkdownContent\";\r\nimport { Card } from \"../../components/Containers/Card\";\r\nimport { AnnouncementDetails } from \"../../store/eurofurence.types\";\r\n\r\nexport const AnnouncementItem: FC<{ announcement: AnnouncementDetails }> = ({ announcement }) => {\r\n    return (\r\n        <Card>\r\n            <View style={{ marginBottom: 5 }}>\r\n                <Label type={\"h3\"}>{announcement.Title}</Label>\r\n                <Label type={\"caption\"}>\r\n                    {announcement.Area} - {announcement.Author}\r\n                </Label>\r\n            </View>\r\n\r\n            <MarkdownContent>{announcement.Content}</MarkdownContent>\r\n\r\n            {announcement.Image && <Image source={{ uri: announcement.Image.FullUrl }} style={{ width: \"100%\", height: \"auto\" }} />}\r\n        </Card>\r\n    );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectActiveAnnouncements } from \"../../store/eurofurence.selectors\";\r\nimport { AnnouncementItem } from \"./AnnouncementItem\";\r\n\r\nexport const AnnouncementList = () => {\r\n    const { t } = useTranslation(\"Announcements\");\r\n    const [now] = useNow();\r\n    const announcements = useAppSelector((state) => selectActiveAnnouncements(state, now));\r\n\r\n    return (\r\n        <>\r\n            <Section title={t(\"sectionTitle\")} subtitle={t(\"sectionSubtitle\")} icon={\"newspaper\"} />\r\n\r\n            {announcements.length === 0 ? <Label mb={15}>{t(\"noAnnouncements\")}</Label> : announcements.map((it) => <AnnouncementItem announcement={it} key={it.Id} />)}\r\n        </>\r\n    );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\n\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectCurrentEvents } from \"../../store/eurofurence.selectors\";\r\nimport { EventCard } from \"./EventCard\";\r\n\r\nexport const CurrentEventList = () => {\r\n    const { t } = useTranslation(\"Events\");\r\n\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const [now] = useNow();\r\n    const events = useAppSelector((state) => selectCurrentEvents(state, now));\r\n\r\n    if (events.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Section title={t(\"current_title\")} subtitle={t(\"current_subtitle\")} icon={\"clock\"} />\r\n            {events.map((event) => (\r\n                <EventCard\r\n                    key={event.Id}\r\n                    event={event}\r\n                    type={\"time\"}\r\n                    onPress={() =>\r\n                        navigation.navigate(\"Event\", {\r\n                            id: event.Id,\r\n                        })\r\n                    }\r\n                />\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\n\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectUpcomingFavoriteEvents } from \"../../store/eurofurence.selectors\";\r\nimport { EventCard } from \"./EventCard\";\r\n\r\nexport const TodayScheduleList = () => {\r\n    const { t } = useTranslation(\"Events\");\r\n\r\n    const [now] = useNow();\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const events = useAppSelector((state) => selectUpcomingFavoriteEvents(state, now));\r\n\r\n    if (events.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Section title={t(\"today_schedule_title\")} subtitle={t(\"today_schedule_subtitle\")} icon={\"book-marker\"} />\r\n            {events.map((event) => (\r\n                <EventCard\r\n                    key={event.Id}\r\n                    event={event}\r\n                    type={\"time\"}\r\n                    onPress={() =>\r\n                        navigation.navigate(\"Event\", {\r\n                            id: event.Id,\r\n                        })\r\n                    }\r\n                />\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\n\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectUpcomingEvents } from \"../../store/eurofurence.selectors\";\r\nimport { EventCard } from \"./EventCard\";\r\n\r\nexport const UpcomingEventsList = () => {\r\n    const { t } = useTranslation(\"Events\");\r\n\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const [now] = useNow();\r\n    const events = useAppSelector((state) => selectUpcomingEvents(state, now));\r\n\r\n    if (events.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Section title={t(\"upcoming_title\")} subtitle={t(\"upcoming_subtitle\")} icon={\"clock\"} />\r\n            {events.map((event) => (\r\n                <EventCard\r\n                    key={event.Id}\r\n                    event={event}\r\n                    type={\"time\"}\r\n                    onPress={() =>\r\n                        navigation.navigate(\"Event\", {\r\n                            id: event.Id,\r\n                        })\r\n                    }\r\n                />\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n","import { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ImageBackground, StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { conId } from \"../../configuration\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectCountdownTitle } from \"../../store/eurofurence.selectors\";\r\n\r\nexport type CountdownHeaderProps = {\r\n    style?: StyleProp<ViewStyle>;\r\n};\r\n\r\nexport const CountdownHeader: FC<CountdownHeaderProps> = ({ style }) => {\r\n    const { t } = useTranslation(\"Countdown\");\r\n    const [now] = useNow();\r\n\r\n    const subtitle = useAppSelector((state) => selectCountdownTitle(state, now, t));\r\n    return (\r\n        <View style={[styles.container, style]}>\r\n            <ImageBackground style={StyleSheet.absoluteFill} source={require(\"../../../assets/images/banner_2022_no_logo.png\")} resizeMode=\"cover\" />\r\n\r\n            <Section title={conId} icon=\"alarm\" subtitle={subtitle} titleColor=\"white\" subtitleColor=\"white\" titleVariant=\"shadow\" subtitleVariant=\"shadow\" />\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        height: 180,\r\n        paddingTop: 15,\r\n        paddingHorizontal: 15,\r\n        flexDirection: \"column-reverse\",\r\n    },\r\n});\r\n","import * as Device from \"expo-device\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Platform } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\n\r\nexport const DeviceSpecificWarnings = () => {\r\n    const { t } = useTranslation(\"Home\");\r\n    const [scheduledNotifications] = useState(() => Platform.OS === \"android\" || Platform.OS === \"ios\");\r\n    const [cacheImages] = useState(() => Platform.OS === \"android\" || Platform.OS === \"ios\");\r\n    const pushNotifications = useMemo(() => scheduledNotifications && Device.isDevice, [scheduledNotifications]);\r\n\r\n    if (scheduledNotifications && pushNotifications && cacheImages) {\r\n        // If we can do all things, do not return any warnings\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Section title={t(\"warnings.title\")} subtitle={t(\"warnings.subtitle\")} icon={\"information\"} />\r\n\r\n            {!scheduledNotifications && <Label mt={10}>{t(\"warnings.no_notifications\")}</Label>}\r\n            {!pushNotifications && <Label mt={10}>{t(\"warnings.no_push_notifications\")}</Label>}\r\n            {!cacheImages && <Label mt={10}>{t(\"warnings.no_image_caching\")}</Label>}\r\n        </>\r\n    );\r\n};\r\n","import React, { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { BadgeInvPad } from \"../../components/Containers/BadgeInvPad\";\r\nimport { useTheme } from \"../../context/Theme\";\r\n\r\nexport type LanguageWarningsProps = {\r\n    /**\r\n     * The padding used by the parent horizontally.\r\n     */\r\n    parentPad?: number;\r\n};\r\n\r\nexport const LanguageWarnings: FC<LanguageWarningsProps> = ({ parentPad = 0 }) => {\r\n    const { t } = useTranslation(\"Home\");\r\n    const theme = useTheme();\r\n    const notice = useMemo(() => t(\"content_untranslated\"), [t]);\r\n\r\n    if (notice === \"\") {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <BadgeInvPad padding={parentPad} badgeColor={theme.background} textColor={theme.text} textType=\"para\" icon=\"translate\">\r\n            {notice}\r\n        </BadgeInvPad>\r\n    );\r\n};\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport React, { FC } from \"react\";\r\nimport { RefreshControl, ScrollView } from \"react-native\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Floater, padFloater } from \"../../components/Containers/Floater\";\r\nimport { TabScreenProps } from \"../../components/Navigators/TabsNavigator\";\r\nimport { useSynchronizer } from \"../../components/Synchronization/SynchronizationProvider\";\r\nimport { AnnouncementList } from \"../Announcements/AnnouncementList\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { CurrentEventList } from \"../Events/CurrentEventsList\";\r\nimport { TodayScheduleList } from \"../Events/TodayScheduleList\";\r\nimport { UpcomingEventsList } from \"../Events/UpcomingEventsList\";\r\nimport { ScreenAreasParamsList } from \"../ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../ScreenStart\";\r\nimport { CountdownHeader } from \"./CountdownHeader\";\r\nimport { DeviceSpecificWarnings } from \"./DeviceSpecificWarnings\";\r\nimport { LanguageWarnings } from \"./LanguageWarnings\";\r\n\r\n/**\r\n * Params handled by the screen in route, nothing so far.\r\n */\r\nexport type ScreenHomeParams = undefined;\r\n\r\n/**\r\n * The properties to the screen as a component.\r\n */\r\nexport type ScreenHomeProps = CompositeScreenProps<TabScreenProps<ScreenAreasParamsList, \"Home\">, StackScreenProps<ScreenStartParamsList>>;\r\n\r\nexport const HomeScreen: FC<ScreenHomeProps> = () => {\r\n    const safe = useSafeAreaInsets();\r\n\r\n    const { synchronize, isSynchronizing } = useSynchronizer();\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]} refreshControl={<RefreshControl refreshing={isSynchronizing} onRefresh={synchronize} />}>\r\n            <CountdownHeader />\r\n\r\n            <Floater contentStyle={appStyles.trailer}>\r\n                <LanguageWarnings parentPad={padFloater} />\r\n                <DeviceSpecificWarnings />\r\n                <AnnouncementList />\r\n                <UpcomingEventsList />\r\n                <TodayScheduleList />\r\n                <CurrentEventList />\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import { forwardRef, ReactNode, useEffect, useImperativeHandle, useState } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport Animated, { Easing, useAnimatedStyle, useSharedValue, withTiming } from \"react-native-reanimated\";\r\n\r\n/**\r\n * Arguments to the pager.\r\n */\r\nexport type PagerProps = {\r\n    /**\r\n     * Main view style.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n\r\n    /**\r\n     * Left content.\r\n     */\r\n    left?: ReactNode;\r\n\r\n    /**\r\n     * Right content.\r\n     */\r\n    right?: ReactNode;\r\n};\r\n\r\n/**\r\n * Operations provided by the pager.\r\n */\r\nexport type PagerRef = {\r\n    /**\r\n     * Moves to the left page with animations.\r\n     */\r\n    toLeft(): void;\r\n\r\n    /**\r\n     * Moves to the right page with animations.\r\n     */\r\n    toRight(): void;\r\n\r\n    /**\r\n     * Moves to the left page immediately.\r\n     */\r\n    toLeftImmediately(): void;\r\n\r\n    /**\r\n     * Moves to the right page immediately.\r\n     */\r\n    toRightImmediately(): void;\r\n};\r\n\r\nexport const Pager = forwardRef<PagerRef, PagerProps>(({ style, left, right }, ref) => {\r\n    // Maintain internal state where the page is.\r\n    const [isRight, setIsRight] = useState(false);\r\n\r\n    // Use layout width.\r\n    const [width, setWidth] = useState(100);\r\n\r\n    // Use to flip the pages.\r\n    const offset = useSharedValue(0);\r\n\r\n    // React to desired right-ness.\r\n    useEffect(() => {\r\n        if (isRight && offset.value < 1) offset.value = withTiming(1, { duration: 234, easing: Easing.out(Easing.cubic) });\r\n        else if (!isRight && offset.value > 0) offset.value = withTiming(0, { duration: 234, easing: Easing.out(Easing.cubic) });\r\n    }, [isRight, offset]);\r\n\r\n    // Animate transformation for page flipping (half of total width).\r\n    const dynamicContainer = useAnimatedStyle(\r\n        () => ({\r\n            transform: [{ translateX: -0.5 * width * offset.value }],\r\n        }),\r\n        [width, offset]\r\n    );\r\n\r\n    // Handle to invoke internal mutations from outside if needed.\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            toLeft: () => setIsRight(false),\r\n            toRight: () => setIsRight(true),\r\n            toLeftImmediately: () => {\r\n                offset.value = 0;\r\n                setIsRight(false);\r\n            },\r\n            toRightImmediately: () => {\r\n                offset.value = 1;\r\n                setIsRight(true);\r\n            },\r\n        }),\r\n        [offset]\r\n    );\r\n\r\n    // Double width row that starts on the left. Translates the right part via status.\r\n    return (\r\n        <Animated.View style={[styles.pages, style, dynamicContainer]} onLayout={(e) => setWidth(e.nativeEvent.layout.width || width)}>\r\n            <View style={styles.equal}>{left}</View>\r\n            <View style={styles.equal}>{right}</View>\r\n        </Animated.View>\r\n    );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n    pages: {\r\n        flexDirection: \"row\",\r\n        left: 0,\r\n        width: \"200%\",\r\n        alignItems: \"flex-end\",\r\n    },\r\n    equal: {\r\n        flex: 1,\r\n    },\r\n});\r\n","import { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { FC, useEffect } from \"react\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, View, ViewStyle } from \"react-native\";\r\nimport { TextInput } from \"react-native-gesture-handler\";\r\nimport { z } from \"zod\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Row } from \"../../components/Containers/Row\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { useSentryProfiler } from \"../../sentryHelpers\";\r\nimport { usePostTokenMutation } from \"../../store/authorization.service\";\r\n\r\nconst loginSchema = z.object({\r\n    regno: z.preprocess((a) => parseInt(z.string().parse(a), 10), z.number().positive()),\r\n    username: z.string().min(1),\r\n    password: z.string().min(1),\r\n});\r\n\r\ntype LoginSchema = z.infer<typeof loginSchema>;\r\n\r\nexport type LoginFormProps = {\r\n    style?: ViewStyle;\r\n    close?: () => void;\r\n};\r\n\r\nexport const LoginForm: FC<LoginFormProps> = ({ style, close }) => {\r\n    const { t } = useTranslation(\"Settings\", { keyPrefix: \"login\" });\r\n    const theme = useTheme();\r\n    useSentryProfiler(\"LoginForm\");\r\n\r\n    const {\r\n        control,\r\n        handleSubmit,\r\n        formState: { errors },\r\n    } = useForm<LoginSchema>({\r\n        resolver: zodResolver(loginSchema),\r\n    });\r\n    const [login, result] = usePostTokenMutation();\r\n\r\n    const onSubmit = (data: LoginSchema) => {\r\n        login({\r\n            // TODO: Fix types here.\r\n            RegNo: data.regno,\r\n            Username: data.username,\r\n            Password: data.password,\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (result.isSuccess && close) {\r\n            close();\r\n        }\r\n    }, [result, close]);\r\n\r\n    return (\r\n        <View style={style}>\r\n            <Label type=\"caption\">{t(\"enter_username\")}</Label>\r\n            {errors.username?.message && (\r\n                <Label type=\"minor\" color=\"warning\">\r\n                    {errors.username?.message}\r\n                </Label>\r\n            )}\r\n            <Controller\r\n                control={control}\r\n                name={\"username\"}\r\n                rules={{\r\n                    required: true,\r\n                }}\r\n                render={({ field: { onChange, onBlur, value } }) => (\r\n                    <TextInput\r\n                        style={[styles.marginAfter, styles.input]}\r\n                        placeholder={t(\"hint_username\")}\r\n                        placeholderTextColor={theme.soften}\r\n                        onChangeText={onChange}\r\n                        onBlur={onBlur}\r\n                        value={value}\r\n                        autoCapitalize={\"none\"}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            <Label type=\"caption\">{t(\"enter_reg\")}</Label>\r\n            {errors.regno?.message && (\r\n                <Label type=\"minor\" color=\"warning\">\r\n                    {errors.regno?.message}\r\n                </Label>\r\n            )}\r\n\r\n            <Controller\r\n                control={control}\r\n                name={\"regno\"}\r\n                rules={{\r\n                    required: true,\r\n                }}\r\n                render={({ field: { onChange, onBlur, value } }) => (\r\n                    <TextInput\r\n                        style={[styles.marginAfter, styles.input]}\r\n                        placeholder={t(\"hint_reg\")}\r\n                        placeholderTextColor={theme.soften}\r\n                        onChangeText={onChange}\r\n                        onBlur={onBlur}\r\n                        value={value?.toString()}\r\n                        autoComplete={\"username\"}\r\n                        autoCapitalize={\"none\"}\r\n                        textContentType={\"username\"}\r\n                        keyboardType={\"numeric\"}\r\n                    />\r\n                )}\r\n            />\r\n            <Label type=\"caption\">{t(\"enter_password\")}</Label>\r\n            {errors.password?.message && (\r\n                <Label type=\"minor\" color=\"warning\">\r\n                    {errors.password?.message}\r\n                </Label>\r\n            )}\r\n\r\n            <Controller\r\n                control={control}\r\n                name={\"password\"}\r\n                rules={{\r\n                    required: true,\r\n                }}\r\n                render={({ field: { onChange, onBlur, value, ...field } }) => (\r\n                    <TextInput\r\n                        {...field}\r\n                        style={[styles.marginAfter, styles.input]}\r\n                        selectTextOnFocus\r\n                        placeholder={t(\"hint_password\")}\r\n                        placeholderTextColor={theme.soften}\r\n                        onChangeText={onChange}\r\n                        onBlur={onBlur}\r\n                        value={value}\r\n                        autoComplete={\"password\"}\r\n                        secureTextEntry\r\n                        autoCapitalize={\"none\"}\r\n                        textContentType={\"password\"}\r\n                        contextMenuHidden={false}\r\n                    />\r\n                )}\r\n            />\r\n            {result.error && (\r\n                <Label type=\"minor\" color=\"warning\">\r\n                    {t(\"login_error\")}\r\n                </Label>\r\n            )}\r\n            {result.isLoading && <Label>{t(\"logging_in\")}</Label>}\r\n            <Row style={styles.marginBefore}>\r\n                {close && (\r\n                    <Button style={styles.rowLeft} outline icon=\"chevron-left\" onPress={close}>\r\n                        {t(\"back_button\")}\r\n                    </Button>\r\n                )}\r\n                <Button style={styles.rowRight} outline={false} icon=\"login\" onPress={handleSubmit(onSubmit)}>\r\n                    {t(\"login_button\")}\r\n                </Button>\r\n            </Row>\r\n            <Label mt={15} variant=\"narrow\">\r\n                {t(\"login_hint\")}\r\n            </Label>\r\n        </View>\r\n    );\r\n};\r\n\r\nexport const PagerLogin: FC<{ close: () => void }> = ({ close }) => {\r\n    return (\r\n        <View style={styles.container}>\r\n            <LoginForm close={close} />\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        padding: 30,\r\n    },\r\n    marginAfter: {\r\n        marginBottom: 16,\r\n    },\r\n    input: {\r\n        width: \"100%\",\r\n        borderBottomColor: \"black\",\r\n        borderBottomWidth: 1,\r\n        paddingVertical: 8,\r\n    },\r\n    marginBefore: {\r\n        marginTop: 16,\r\n    },\r\n    rowLeft: {\r\n        flex: 1,\r\n        marginRight: 8,\r\n    },\r\n    rowRight: {\r\n        flex: 1,\r\n        marginLeft: 8,\r\n    },\r\n});\r\n","import { chunk } from \"lodash\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { StyleProp, StyleSheet, View, ViewStyle } from \"react-native\";\r\n\r\nimport { Col } from \"./Col\";\r\nimport { Row } from \"./Row\";\r\n\r\n/**\r\n * Arguments to the grid.\r\n */\r\nexport type GridProps = {\r\n    /**\r\n     * The style passed to the root column.\r\n     */\r\n    style?: StyleProp<ViewStyle>;\r\n    /**\r\n     * The number of columns to distribute as.\r\n     */\r\n    cols?: number;\r\n};\r\n\r\nexport const Grid: FC<GridProps> = ({ style, cols = 2, children }) => {\r\n    // Get an array of children, padded for necessary chunks.\r\n    const childrenArray = useMemo(() => {\r\n        const result = Array.isArray(children) ? [...children] : [children];\r\n        while (result.length % cols !== 0) result.push(null);\r\n        return result;\r\n    }, [children]);\r\n\r\n    return (\r\n        <Col style={style} type=\"stretch\">\r\n            {chunk(childrenArray, cols).map((row, y) => (\r\n                <Row key={y} style={styles.distributed} type=\"stretch\">\r\n                    {row.map((item, y) => (\r\n                        <View key={y} style={styles.distributed}>\r\n                            {item}\r\n                        </View>\r\n                    ))}\r\n                </Row>\r\n            ))}\r\n        </Col>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    distributed: {\r\n        flex: 1,\r\n    },\r\n});\r\n","import { FC, useEffect, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { useGetCommunicationsQuery } from \"../../store/eurofurence.service\";\r\n\r\ntype PrivateMessageLinkerProps = {\r\n    open?: boolean;\r\n    onOpenMessages?: () => void;\r\n};\r\n\r\n/**\r\n * Creates a link to the private messages screen\r\n * @constructor\r\n */\r\nexport const PrivateMessageLinker: FC<PrivateMessageLinkerProps> = ({ onOpenMessages, open }) => {\r\n    const prevOpen = useRef(open);\r\n    const { t } = useTranslation(\"Menu\");\r\n    const { unread, refetch } = useGetCommunicationsQuery(undefined, {\r\n        selectFromResult: (query) => ({\r\n            ...query,\r\n            unread: query.data?.filter((it) => it.ReadDateTimeUtc === null),\r\n        }),\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (open === true && prevOpen.current !== open) {\r\n            console.debug(\"Fetching new private messages\");\r\n            refetch();\r\n        }\r\n        prevOpen.current = open;\r\n        console.debug(\"Tab open has changed status\", open);\r\n    }, [open]);\r\n\r\n    return (\r\n        <View style={{ padding: 30 }}>\r\n            <Label variant={unread?.length ? \"bold\" : undefined}>{t(\"messages\", { count: unread?.length ?? 0 })}</Label>\r\n            <Button style={styles.marginBefore} icon={unread?.length ? \"email-multiple-outline\" : \"email-open-multiple-outline\"} onPress={onOpenMessages}>\r\n                {t(\"open_messages\")}\r\n            </Button>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    marginAfter: {\r\n        marginBottom: 16,\r\n    },\r\n    marginBefore: {\r\n        marginTop: 16,\r\n    },\r\n    rowLeft: {\r\n        flex: 1,\r\n        marginRight: 8,\r\n    },\r\n    rowRight: {\r\n        flex: 1,\r\n        marginLeft: 8,\r\n    },\r\n});\r\n","import { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Col } from \"../../components/Containers/Col\";\r\nimport { Grid } from \"../../components/Containers/Grid\";\r\nimport { Tab } from \"../../components/Containers/Tab\";\r\nimport { useTabs } from \"../../components/Containers/Tabs\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { selectBrowseableMaps } from \"../../store/eurofurence.selectors\";\r\nimport { RecordId } from \"../../store/eurofurence.types\";\r\nimport { PrivateMessageLinker } from \"../PrivateMessages/PrivateMessageLinker\";\r\n\r\n/**\r\n * Props to the pager.\r\n */\r\nexport type PagerMenuProps = {\r\n    onMessages?: () => void;\r\n    onLogin?: () => void;\r\n    onInfo?: () => void;\r\n    onCatchEmAll?: () => void;\r\n    onServices?: () => void;\r\n    onAbout?: () => void;\r\n    onSettings?: () => void;\r\n    onMap?: (id: RecordId) => void;\r\n};\r\n\r\nexport const PagerPrimary: FC<PagerMenuProps> = ({ onMessages, onLogin, onInfo, onCatchEmAll, onServices, onAbout, onSettings, onMap, children }) => {\r\n    const { t } = useTranslation(\"Menu\");\r\n    const loggedIn = useAppSelector((state) => state.authorization.isLoggedIn);\r\n    const maps = useAppSelector(selectBrowseableMaps);\r\n    const tabs = useTabs();\r\n\r\n    return (\r\n        <Col type=\"stretch\">\r\n            {loggedIn ? (\r\n                <PrivateMessageLinker onOpenMessages={onMessages} open={tabs.isOpen} />\r\n            ) : (\r\n                <View style={{ padding: 30 }}>\r\n                    <Label style={styles.marginBefore} type=\"caption\">\r\n                        {t(\"not_logged_in\")}\r\n                    </Label>\r\n                    <Button style={styles.marginBefore} icon=\"login\" onPress={onLogin}>\r\n                        {t(\"logged_in_now\")}\r\n                    </Button>\r\n                </View>\r\n            )}\r\n            <Grid cols={3} style={{ alignSelf: \"stretch\" }}>\r\n                <Tab icon=\"information-outline\" text={t(\"info\")} onPress={onInfo} />\r\n                <Tab icon=\"paw\" text={t(\"catch_em\")} onPress={onCatchEmAll} />\r\n                <Tab icon=\"book-outline\" text={t(\"services\")} onPress={onServices} />\r\n                <Tab icon=\"card-account-details-outline\" text={t(\"about\")} onPress={onAbout} />\r\n                <Tab icon=\"cog\" text={t(\"settings\")} onPress={onSettings} />\r\n                {children}\r\n            </Grid>\r\n            <Col style={{ padding: 30, alignItems: \"stretch\" }}>\r\n                {maps.map((it) => (\r\n                    <Button key={it.Id} style={{ marginVertical: 10 }} icon={\"map\"} onPress={() => onMap && onMap(it.Id)}>\r\n                        {it.Description}\r\n                    </Button>\r\n                ))}\r\n            </Col>\r\n        </Col>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    marginAfter: {\r\n        marginBottom: 16,\r\n    },\r\n    marginBefore: {\r\n        marginTop: 16,\r\n    },\r\n    rowLeft: {\r\n        flex: 1,\r\n        marginRight: 8,\r\n    },\r\n    rowRight: {\r\n        flex: 1,\r\n        marginLeft: 8,\r\n    },\r\n});\r\n","import { FC, RefObject, useMemo, useRef } from \"react\";\r\nimport { Linking } from \"react-native\";\r\n\r\nimport { Pager, PagerRef } from \"../../components/Containers/Pager\";\r\nimport { Tab } from \"../../components/Containers/Tab\";\r\nimport { TabsRef } from \"../../components/Containers/Tabs\";\r\nimport { useAdditionalServices } from \"../../hooks/useAdditionalServices\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\nimport { useFursuitGames } from \"../../hooks/useFursuitGames\";\r\nimport { RecordId } from \"../../store/eurofurence.types\";\r\nimport { PagerLogin } from \"./PagerLogin\";\r\nimport { PagerPrimary } from \"./PagerPrimary\";\r\n\r\nexport type MainMenuProps = {\r\n    tabs: RefObject<TabsRef>;\r\n};\r\n\r\nexport const MainMenu: FC<MainMenuProps> = ({ tabs }) => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const pager = useRef<PagerRef>(null);\r\n    const openFursuitGames = useFursuitGames();\r\n    const openAdditionalServices = useAdditionalServices();\r\n    const on = useMemo(\r\n        () => ({\r\n            login: () => pager.current?.toRight(),\r\n            loginBack: () => pager.current?.toLeft(),\r\n            messages: () => {\r\n                navigation.navigate(\"PrivateMessageList\");\r\n                return tabs.current?.close();\r\n            },\r\n            info: () => {\r\n                navigation.navigate(\"KnowledgeGroups\", {});\r\n                tabs.current?.close();\r\n            },\r\n            catchEmAll: () => {\r\n                openFursuitGames();\r\n                tabs.current?.close();\r\n            },\r\n            services: () => {\r\n                openAdditionalServices();\r\n                return tabs.current?.close();\r\n            },\r\n            settings: () => {\r\n                navigation.navigate(\"Settings\");\r\n                tabs.current?.close();\r\n            },\r\n            about: () => {\r\n                navigation.navigate(\"About\");\r\n                tabs.current?.close();\r\n            },\r\n            map: (target: RecordId) => {\r\n                navigation.navigate(\"Map\", { id: target });\r\n                tabs.current?.close();\r\n            },\r\n        }),\r\n        [tabs, pager, openFursuitGames, openAdditionalServices]\r\n    );\r\n\r\n    return (\r\n        <Pager\r\n            ref={pager}\r\n            left={\r\n                <PagerPrimary\r\n                    onMessages={on.messages}\r\n                    onLogin={on.login}\r\n                    onInfo={on.info}\r\n                    onCatchEmAll={on.catchEmAll}\r\n                    onServices={on.services}\r\n                    onSettings={on.settings}\r\n                    onAbout={on.about}\r\n                    onMap={on.map}\r\n                >\r\n                    <Tab icon={\"twitter\"} text={\"Twitter\"} onPress={() => Linking.openURL(\"https://twitter.com/eurofurence\")} />\r\n                </PagerPrimary>\r\n            }\r\n            right={<PagerLogin close={on.loginBack} />}\r\n        />\r\n    );\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { Linking } from \"react-native\";\r\n\r\nimport { appBase } from \"../configuration\";\r\nimport { useAppSelector } from \"../store\";\r\n\r\nexport const useFursuitGames = () => {\r\n    const token = useAppSelector((state) => state.authorization.token);\r\n    return useCallback(() => {\r\n        if (token === undefined) {\r\n            alert(\"You are not logged in.\");\r\n            return;\r\n        }\r\n        Linking.openURL(`${appBase}/companion/#/login?embedded=false&returnPath=/collect&token=${token}`).catch(console.error);\r\n    }, [token]);\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { Linking } from \"react-native\";\r\n\r\nimport { appBase } from \"../configuration\";\r\nimport { useAppSelector } from \"../store\";\r\n\r\nexport const useAdditionalServices = () => {\r\n    const token = useAppSelector((state) => state.authorization.token);\r\n\r\n    return useCallback(() => {\r\n        if (token === undefined) {\r\n            alert(\"You are not logged in.\");\r\n            return;\r\n        }\r\n        Linking.openURL(`${appBase}/companion/#/login?embedded=false&returnPath=/&token=${token}`).catch(console.error);\r\n    }, [token]);\r\n};\r\n","import { CompositeScreenProps } from \"@react-navigation/core\";\r\nimport { NavigatorScreenParams } from \"@react-navigation/native\";\r\nimport { StackScreenProps } from \"@react-navigation/stack\";\r\nimport React, { FC, RefObject, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, View } from \"react-native\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { TabsRef } from \"../components/Containers/Tabs\";\r\nimport { createTabNavigator, TabScreenProps } from \"../components/Navigators/TabsNavigator\";\r\nimport { DealersTabsScreen, DealersTabsScreenParams } from \"./Dealers/DealersTabsScreen\";\r\nimport { EventsTabsScreen, EventsTabsScreenParams } from \"./Events/EventsTabsScreen\";\r\nimport { HomeScreen, ScreenHomeParams } from \"./Home/HomeScreen\";\r\nimport { MainMenu } from \"./MainMenu/MainMenu\";\r\nimport { ScreenStartParamsList } from \"./ScreenStart\";\r\n\r\n/**\r\n * Available routes.\r\n */\r\nexport type ScreenAreasParamsList = {\r\n    /**\r\n     * Area home screen, should show announcements and personalized content.\r\n     */\r\n    Home: ScreenHomeParams;\r\n\r\n    /**\r\n     * Events list.\r\n     */\r\n    Events: EventsTabsScreenParams;\r\n\r\n    /**\r\n     * Dealers list.\r\n     */\r\n    Dealers: DealersTabsScreenParams;\r\n};\r\n\r\n/**\r\n * Create an instance of the tabs-navigator with the provided routes.\r\n */\r\nexport const AreasNavigator = createTabNavigator<ScreenAreasParamsList>();\r\n\r\n/**\r\n * Params handled by the screen in route. Delegated parameters for the areas.\r\n */\r\nexport type ScreenAreasParams = NavigatorScreenParams<ScreenAreasParamsList>;\r\n\r\n/**\r\n * The properties to the screen as a component. Delegated parameters for the areas. TODO: Verify.\r\n */\r\nexport type ScreenAreasProps =\r\n    // Route carrying from start screen at \"Areas\", navigation via own parameter list and parent.\r\n    CompositeScreenProps<StackScreenProps<ScreenStartParamsList, \"Areas\">, TabScreenProps<ScreenAreasParamsList> & StackScreenProps<ScreenStartParamsList>>;\r\n\r\nexport const ScreenAreas: FC<ScreenAreasProps> = React.memo(() => {\r\n    const { t } = useTranslation(\"Menu\");\r\n\r\n    // Compute safe inset at the bottom and convert to style.\r\n    const bottom = useSafeAreaInsets()?.bottom;\r\n    const tabsStyle = useMemo(() => ({ paddingBottom: Math.max(bottom, 30) }), [bottom]);\r\n\r\n    return (\r\n        <View style={StyleSheet.absoluteFill}>\r\n            <AreasNavigator.Navigator tabsStyle={tabsStyle} textMore={t(\"more\")} textLess={t(\"less\")} more={(tabs: RefObject<TabsRef>) => <MainMenu tabs={tabs} />}>\r\n                <AreasNavigator.Screen name=\"Home\" options={{ title: t(\"home\"), icon: \"home\" }} component={HomeScreen} />\r\n                <AreasNavigator.Screen name=\"Events\" options={{ title: t(\"events\"), icon: \"calendar\" }} component={EventsTabsScreen} />\r\n                <AreasNavigator.Screen name=\"Dealers\" options={{ title: t(\"dealers\"), icon: \"cart-outline\" }} component={DealersTabsScreen} />\r\n            </AreasNavigator.Navigator>\r\n        </View>\r\n    );\r\n});\r\n","import moment from \"moment\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Row } from \"../../components/Containers/Row\";\r\nimport { useSynchronizer } from \"../../components/Synchronization/SynchronizationProvider\";\r\nimport { useAppSelector } from \"../../store\";\r\n\r\nexport const CacheStats = () => {\r\n    const { t } = useTranslation(\"Settings\");\r\n    const sync = useSynchronizer();\r\n    const cache = useAppSelector((state) => state.eurofurenceCache);\r\n    return (\r\n        <View testID={\"CacheStats\"}>\r\n            <Section title={t(\"cache.title\")} subtitle={t(\"cache.subtitle\", { time: moment(cache.lastSynchronised).format(\"lll\") })} />\r\n\r\n            <Label mb={5}>{t(\"cache.cache_state\", { state: cache.state })}</Label>\r\n\r\n            <Label>{t(\"cache.cache_item\", { count: cache.events.ids.length, type: \"event\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.eventRooms.ids.length, type: \"room\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.eventDays.ids.length, type: \"day\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.eventTracks.ids.length, type: \"track\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.knowledgeGroups.ids.length, type: \"knowledge group\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.knowledgeEntries.ids.length, type: \"knowledge entry\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.dealers.ids.length, type: \"dealer\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.maps.ids.length, type: \"map\" })}</Label>\r\n            <Label>{t(\"cache.cache_item\", { count: cache.images.ids.length, type: \"image\" })}</Label>\r\n\r\n            <Row style={styles.container}>\r\n                <Button onPress={sync.synchronize} icon={\"sync\"} style={styles.button}>\r\n                    {t(\"cache.synchronize\")}\r\n                </Button>\r\n                <Button icon=\"trash-can-outline\" style={styles.button} onPress={() => alert(t(\"cache.reset_alert\"))} onLongPress={sync.clear}>\r\n                    {t(\"cache.reset\")}\r\n                </Button>\r\n            </Row>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        marginVertical: 10,\r\n    },\r\n    button: {\r\n        flex: 1,\r\n        marginHorizontal: 5,\r\n    },\r\n});\r\n","import { useCallback } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, Vibration, View } from \"react-native\";\r\n\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store\";\r\nimport { useCreateSyncRequestMutation, useSendPrivateMessageMutation } from \"../../store/authorization.service\";\r\nimport { logout } from \"../../store/authorization.slice\";\r\n\r\nexport const DevButtons = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { t } = useTranslation(\"Settings\", { keyPrefix: \"dev_buttons\" });\r\n    const [createSync, syncResult] = useCreateSyncRequestMutation();\r\n    const [sendMessage, messageResult] = useSendPrivateMessageMutation();\r\n    const me = useAppSelector((state) => state.authorization.uid);\r\n\r\n    const onSendMessage = useCallback(() => {\r\n        if (me === undefined) {\r\n            alert(t(\"no_auth_alert\"));\r\n            return;\r\n        }\r\n\r\n        sendMessage({\r\n            RecipientUid: me,\r\n            AuthorName: `tester`,\r\n            Subject: t(\"test_message_subject\"),\r\n            Message: t(\"test_message_content\"),\r\n        });\r\n\r\n        alert(`Sent a message to ${me}`);\r\n    }, [me]);\r\n    const onLogout = useCallback(() => {\r\n        dispatch(logout());\r\n    }, []);\r\n    return (\r\n        <View>\r\n            <Section title={t(\"title\")} subtitle={t(\"subtitle\")} />\r\n\r\n            <Button\r\n                style={styles.button}\r\n                icon=\"alert\"\r\n                onPress={() => alert(t(\"sync_alert_error\"))}\r\n                onLongPress={() => {\r\n                    console.log(\"Forcing  FCM sync devices\");\r\n                    Vibration.vibrate(400);\r\n                    createSync(undefined);\r\n                    alert(t(\"sync_alert_done\"));\r\n                }}\r\n            >\r\n                {t(\"sync\", { status: syncResult.status })}\r\n            </Button>\r\n\r\n            <Button\r\n                style={styles.button}\r\n                icon=\"message-alert\"\r\n                onPress={() => {\r\n                    onSendMessage();\r\n                }}\r\n            >\r\n                {t(\"send_private_message\", { status: messageResult.status })}\r\n            </Button>\r\n\r\n            {/* TODO: We should have a proper button for this. */}\r\n            <Button\r\n                style={styles.button}\r\n                onPress={() => {\r\n                    onLogout();\r\n                }}\r\n            >\r\n                Logout\r\n            </Button>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    button: {\r\n        marginVertical: 5,\r\n    },\r\n});\r\n","import moment from \"moment\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { useAppSelector } from \"../../store\";\r\n\r\nexport const RemoteMessages = () => {\r\n    const { t } = useTranslation(\"Settings\", { keyPrefix: \"remote_messages\" });\r\n    const messages = useAppSelector((state) => state.background.fcmMessages);\r\n\r\n    return (\r\n        <View>\r\n            <Section title={t(\"title\")} subtitle={t(\"subtitle\")} icon=\"message-flash\" />\r\n\r\n            {messages.length === 0 && <Label mb={15}>{t(\"no_messages\")}</Label>}\r\n\r\n            {messages.map((message) => (\r\n                <Label mb={15} key={message.dateReceived}>{`${moment(message.dateReceived).format(\"llll\")} - ${JSON.stringify(message.content)}`}</Label>\r\n            ))}\r\n        </View>\r\n    );\r\n};\r\n","import { isDevice } from \"expo-device\";\r\nimport { getAllScheduledNotificationsAsync, NotificationRequest } from \"expo-notifications\";\r\nimport moment from \"moment\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { withPlatform } from \"../../hoc/withPlatform\";\r\n\r\n/**\r\n * Shows all scheduled notifications\r\n * @constructor\r\n */\r\nexport const ScheduledNotifications = () => {\r\n    const { t } = useTranslation(\"Settings\", { keyPrefix: \"notifications\" });\r\n    const [notifications, setNotifications] = useState<NotificationRequest[]>([]);\r\n\r\n    useEffect(() => {\r\n        if (!isDevice) {\r\n            return;\r\n        }\r\n        getAllScheduledNotificationsAsync().then((n) => setNotifications(n));\r\n    }, []);\r\n\r\n    return (\r\n        <View>\r\n            <Section title={t(\"title\")} subtitle={t(\"subtitle\")} icon=\"notification-clear-all\" />\r\n            {!notifications.length && <Label mb={15}>{t(\"no_notifications\")}</Label>}\r\n\r\n            {notifications.map((item) => (\r\n                <Label key={item.identifier} mb={15}>\r\n                    {/* @ts-expect-error Value does not really exist yet */}\r\n                    {t(\"notification_item\", { identifier: item.identifier, time: moment(item.trigger?.value).format(\"llll\") })}\r\n                </Label>\r\n            ))}\r\n        </View>\r\n    );\r\n};\r\n\r\nexport const PlatformScheduledNotifications = withPlatform(ScheduledNotifications, [\"android\", \"ios\"]);\r\n","import moment from \"moment\";\r\nimport { useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Col } from \"../../components/Containers/Col\";\r\nimport { Row } from \"../../components/Containers/Row\";\r\nimport { conName } from \"../../configuration\";\r\nimport { useNow } from \"../../hooks/useNow\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store\";\r\nimport { eventDaysSelectors } from \"../../store/eurofurence.selectors\";\r\nimport { enableTimeTravel, ONE_HOUR, ONE_MINUTE, resetTravel, travelBackward, travelForward, travelToDate } from \"../../store/timetravel.slice\";\r\n\r\n/**\r\n * A self-contained component to adjust time travel settings. Useful for development.\r\n */\r\nexport const TimeTravel = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { t } = useTranslation(\"TimeTravel\");\r\n    const [now] = useNow();\r\n    const { amount, enabled } = useAppSelector((state) => state.timetravel);\r\n    const days = useAppSelector(eventDaysSelectors.selectAll);\r\n    const [weekBefore, weekAfter] = useMemo(\r\n        () =>\r\n            !days.length\r\n                ? [null, null]\r\n                : [\r\n                      moment(days[0].Date).subtract(1, \"week\").toISOString(),\r\n                      moment(days[days.length - 1].Date)\r\n                          .add(1, \"week\")\r\n                          .toISOString(),\r\n                  ],\r\n        [days]\r\n    );\r\n\r\n    return (\r\n        <View testID={\"TimeTravel\"}>\r\n            <Section title={t(\"title\")} icon={\"airplane\"} subtitle={t(\"subtitle\")} />\r\n            <Label mb={5}>{t(\"originalTime\", { time: moment().format(\"llll\") })}</Label>\r\n            <Label mb={5}>{t(\"currentTime\", { time: now.format(\"llll\") })}</Label>\r\n            <Label mb={5}>{t(\"difference\", { diff: moment.duration(amount, \"millisecond\").humanize() })}</Label>\r\n            <Row style={styles.row}>\r\n                <Button style={styles.button} outline={enabled} onPress={() => dispatch(enableTimeTravel(!enabled))}>\r\n                    {enabled ? t(\"disable\") : t(\"enable\")}\r\n                </Button>\r\n                <Button style={styles.button} onPress={() => dispatch(resetTravel())}>\r\n                    {t(\"reset\")}\r\n                </Button>\r\n            </Row>\r\n            <Row style={styles.row}>\r\n                <Button style={styles.button} icon=\"chevron-left\" onPress={() => dispatch(travelBackward(ONE_HOUR))}>\r\n                    1h\r\n                </Button>\r\n                <Button style={styles.button} icon=\"chevron-left\" onPress={() => dispatch(travelBackward(ONE_MINUTE))}>\r\n                    1m\r\n                </Button>\r\n                <Button style={styles.button} iconRight=\"chevron-right\" onPress={() => dispatch(travelForward(ONE_MINUTE))}>\r\n                    1m\r\n                </Button>\r\n                <Button style={styles.button} iconRight=\"chevron-right\" onPress={() => dispatch(travelForward(ONE_HOUR))}>\r\n                    1h\r\n                </Button>\r\n            </Row>\r\n            <Col style={styles.row} type=\"stretch\">\r\n                {!weekBefore ? null : (\r\n                    <Button style={styles.button} icon=\"calendar-arrow-left\" onPress={() => dispatch(travelToDate(weekBefore))}>\r\n                        {t(\"week_before\", { conName })}\r\n                    </Button>\r\n                )}\r\n                {!days\r\n                    ? null\r\n                    : days.map((day) => (\r\n                          <Button key={day.Id} style={styles.button} icon=\"calendar-cursor\" onPress={() => dispatch(travelToDate(moment(day.Date).toISOString()))}>\r\n                              {day.Name}\r\n                          </Button>\r\n                      ))}\r\n                {!weekAfter ? null : (\r\n                    <Button style={styles.button} icon=\"calendar-arrow-right\" onPress={() => dispatch(travelToDate(weekAfter))}>\r\n                        {t(\"week_after\", { conName })}\r\n                    </Button>\r\n                )}\r\n            </Col>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    button: {\r\n        flex: 1,\r\n        margin: 5,\r\n        flexGrow: 1,\r\n    },\r\n    row: {\r\n        marginTop: 15,\r\n    },\r\n});\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport * as Localization from \"expo-localization\";\r\nimport i18next from \"i18next\";\r\nimport { noop, partial } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport { match, P } from \"ts-pattern\";\r\n\r\n// Polyfill for Plural Rules\r\nimport \"intl-pluralrules\";\r\n\r\n// Translation files\r\nimport da from \"./translations.da.json\";\r\nimport de from \"./translations.de.json\";\r\nimport en from \"./translations.en.json\";\r\nimport it from \"./translations.it.json\";\r\nimport nl from \"./translations.nl.json\";\r\nimport pl from \"./translations.pl.json\";\r\n\r\n// Moment Locale\r\nimport \"moment/locale/pl\";\r\nimport \"moment/locale/it\";\r\nimport \"moment/locale/da\";\r\nimport \"moment/locale/de\";\r\nimport \"moment/locale/en-gb\";\r\nimport \"moment/locale/nl\";\r\n\r\n/**\r\n * The translations we provide.\r\n */\r\nexport type Translations = \"en\" | \"nl\" | \"pl\" | \"it\" | \"da\" | \"de\";\r\n\r\n/**\r\n * Set the locale in a managed way.\r\n *\r\n * Provided translations resolve. English is set to en-gb and all other values are always en-gb\r\n */\r\nexport const setMomentLocale = (language: Translations | string) =>\r\n    match(language)\r\n        .with(\"it\", \"nl\", \"da\", \"de\", \"pl\", (it) => moment.locale(it))\r\n        .with(\"en\", () => moment.locale(\"en-gb\"))\r\n        .with(P.string, () => moment.locale(\"en-gb\"))\r\n        .exhaustive();\r\n\r\nsetMomentLocale(Localization.locale);\r\n\r\nconst logger = partial(console.log, \"i18next\");\r\n\r\nconst I18NEXT_LANGAGUE_KEY = \"i18next\";\r\n\r\n/**\r\n * Initialized promise to the i18next translate function.\r\n */\r\nexport const i18t = i18next\r\n    .use(initReactI18next)\r\n    .use({\r\n        type: \"languageDetector\",\r\n        async: true,\r\n        init: noop,\r\n        detect: async (callback: (language: string) => void) => {\r\n            // Get fallback and selected from localization and storage.\r\n            const fallback = Localization.locale.split(\"-\")[0];\r\n            const persisted = await AsyncStorage.getItem(I18NEXT_LANGAGUE_KEY);\r\n\r\n            // Log what was detected and stored.\r\n            logger(`Detecting languages, saved: ${persisted}, fallback ${fallback}`);\r\n\r\n            // Set moment locale with applied reasonable defaults, run callback with actual.\r\n            setMomentLocale(persisted ?? fallback);\r\n            return callback(persisted ?? fallback);\r\n        },\r\n        cacheUserLanguage: async (lng: string) =>\r\n            AsyncStorage.setItem(I18NEXT_LANGAGUE_KEY, lng)\r\n                .then(() => logger(\"Saving langauge for next time\", lng))\r\n                .catch((e) => logger(\"Failed to save language\", lng, e)),\r\n    })\r\n    .init({\r\n        fallbackLng: \"en\",\r\n        initImmediate: true,\r\n        defaultNS: \"Home\",\r\n        resources: {\r\n            en,\r\n            nl,\r\n            de,\r\n            it,\r\n            pl,\r\n            da,\r\n        },\r\n        react: {\r\n            useSuspense: false,\r\n        },\r\n        parseMissingKeyHandler: (key) => {\r\n            console.warn(\"react-i18next\", \"Key not found.\", key);\r\n            return key;\r\n        },\r\n    });\r\n\r\n/**\r\n * Re-export i18next.\r\n */\r\nexport default i18next;\r\n","import { Picker } from \"@react-native-picker/picker\";\r\nimport Checkbox from \"expo-checkbox\";\r\nimport { capitalize, noop, orderBy } from \"lodash\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Alert, View } from \"react-native\";\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\r\n\r\nimport { Label } from \"../../components/Atoms/Label\";\r\nimport { Section } from \"../../components/Atoms/Section\";\r\nimport { Button } from \"../../components/Containers/Button\";\r\nimport { Col } from \"../../components/Containers/Col\";\r\nimport { conName } from \"../../configuration\";\r\nimport { useTheme } from \"../../context/Theme\";\r\nimport { setMomentLocale, Translations } from \"../../i18n\";\r\nimport { captureException } from \"../../sentryHelpers\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store\";\r\nimport { logout } from \"../../store/authorization.slice\";\r\nimport { setAnalytics, toggleDevMenu } from \"../../store/settings.slice\";\r\nimport { LoginForm } from \"../MainMenu/PagerLogin\";\r\n\r\ntype Language = {\r\n    code: Translations;\r\n    name: string;\r\n};\r\n\r\nconst languages = orderBy(\r\n    [\r\n        { code: \"en\", name: \" English\" },\r\n        { code: \"de\", name: \" Deutsch\" },\r\n        { code: \"nl\", name: \" Nederlands\" },\r\n        { code: \"it\", name: \" Italiano\" },\r\n        { code: \"pl\", name: \" Polski\" },\r\n        { code: \"da\", name: \" Dansk\" },\r\n    ] as Language[],\r\n    (value) => value.code,\r\n    \"asc\"\r\n);\r\n\r\nconst LoginSettings = () => {\r\n    const { t } = useTranslation(\"Settings\", { keyPrefix: \"login\" });\r\n    const auth = useAppSelector((state) => state.authorization);\r\n    const dispatch = useAppDispatch();\r\n\r\n    if (!auth.isLoggedIn) {\r\n        return (\r\n            <>\r\n                <Label variant={\"bold\"}>{t(\"login\")}</Label>\r\n                <LoginForm />\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Label variant={\"bold\"}>{t(\"logged_in_as\", { username: capitalize(auth.username) })}</Label>\r\n            <Label variant={\"narrow\"}>{t(\"login_description\", { conName })}</Label>\r\n            <Button icon=\"logout\" onPress={() => dispatch(logout())} style={{ marginTop: 15 }}>\r\n                {t(\"logout\")}\r\n            </Button>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const UserSettings = () => {\r\n    const { t, i18n } = useTranslation(\"Settings\");\r\n    const theme = useTheme();\r\n    const dispatch = useAppDispatch();\r\n    const analyticsEnabled = useAppSelector((state) => state.settingsSlice.analytics.enabled);\r\n\r\n    return (\r\n        <View>\r\n            <Section title={t(\"settingsSection\")} icon={\"cog\"} />\r\n            <SettingItem>\r\n                <TouchableOpacity\r\n                    style={{ flexDirection: \"row\", alignItems: \"center\" }}\r\n                    onPress={() => dispatch(setAnalytics(!analyticsEnabled))}\r\n                    onLongPress={() =>\r\n                        Alert.alert(t(\"developer_settings_alert.title\"), t(\"developer_settings_alert.body\"), [\r\n                            {\r\n                                text: t(\"developer_settings_alert.cancel\"),\r\n                                onPress: noop,\r\n                                style: \"cancel\",\r\n                            },\r\n                            {\r\n                                text: t(\"developer_settings_alert.disable\"),\r\n                                onPress: () => dispatch(toggleDevMenu(false)),\r\n                                style: \"default\",\r\n                            },\r\n                            {\r\n                                text: t(\"developer_settings_alert.enable\"),\r\n                                onPress: () => dispatch(toggleDevMenu(true)),\r\n                                style: \"destructive\",\r\n                            },\r\n                        ])\r\n                    }\r\n                    delayLongPress={1000}\r\n                >\r\n                    <Col style={{ flex: 1 }}>\r\n                        <Label variant={\"bold\"}>{t(\"allowAnalytics\")}</Label>\r\n                        <Label variant={\"narrow\"}>{t(\"allowAnalyticsSubtitle\")}</Label>\r\n                    </Col>\r\n\r\n                    <Checkbox value={analyticsEnabled} />\r\n                </TouchableOpacity>\r\n            </SettingItem>\r\n            <SettingItem>\r\n                <Label variant={\"bold\"}>{t(\"changeLanguage\")}</Label>\r\n                <Label variant={\"narrow\"}>{t(\"currentLanguage\")}</Label>\r\n                <Picker<string>\r\n                    selectedValue={i18n.language}\r\n                    style={{ color: theme.text }}\r\n                    prompt={t(\"changeLanguage\")}\r\n                    onValueChange={(it: string) => {\r\n                        i18n.changeLanguage(it).catch(captureException);\r\n                        setMomentLocale(it);\r\n                    }}\r\n                >\r\n                    {languages.map((it) => (\r\n                        <Picker.Item label={it.name} value={it.code} key={it.code} />\r\n                    ))}\r\n                </Picker>\r\n            </SettingItem>\r\n            <SettingItem>\r\n                <LoginSettings />\r\n            </SettingItem>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst SettingItem: FC = ({ children }) => <View style={{ marginVertical: 10 }}>{children}</View>;\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { Floater } from \"../../components/Containers/Floater\";\r\nimport { Header } from \"../../components/Containers/Header\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { appStyles } from \"../AppStyles\";\r\nimport { CacheStats } from \"./CacheStats\";\r\nimport { DevButtons } from \"./DevButtons\";\r\nimport { RemoteMessages } from \"./RemoteMessages\";\r\nimport { PlatformScheduledNotifications } from \"./ScheduledNotifications\";\r\nimport { TimeTravel } from \"./TimeTravel\";\r\nimport { UserSettings } from \"./UserSettings\";\r\n\r\nexport const SettingsScreen = () => {\r\n    const { t } = useTranslation(\"Settings\");\r\n    const safe = useSafeAreaInsets();\r\n    const showDevMenu = useAppSelector((state): boolean => state.settingsSlice.showDevMenu ?? false);\r\n\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]} stickyHeaderIndices={[0]} stickyHeaderHiddenOnScroll>\r\n            <Header>{t(\"header\")}</Header>\r\n            <Floater contentStyle={appStyles.trailer}>\r\n                <UserSettings />\r\n\r\n                {showDevMenu && (\r\n                    <>\r\n                        <CacheStats />\r\n                        <TimeTravel />\r\n                        <PlatformScheduledNotifications />\r\n                        <RemoteMessages />\r\n                        <DevButtons />\r\n                    </>\r\n                )}\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import { createStackNavigator } from \"@react-navigation/stack\";\r\nimport { StatusBar } from \"expo-status-bar\";\r\nimport React, { FC } from \"react\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\nimport { useTheme, useThemeType } from \"../context/Theme\";\r\nimport { CommunicationRecord, RecordId } from \"../store/eurofurence.types\";\r\nimport { AboutScreen } from \"./About\";\r\nimport { ScreenEmptyParams } from \"./Common/ScreenEmpty\";\r\nimport { DealerScreen, DealerScreenParams } from \"./Dealers/DealerScreen\";\r\nimport { EventScreen } from \"./Events/EventScreen\";\r\nimport { FeedbackScreen } from \"./Events/FeedbackScreen\";\r\nimport { KnowledgeEntryScreen } from \"./Knowledge/KnowledgeEntryScreen\";\r\nimport { KnowledgeGroupsScreen } from \"./Knowledge/KnowledgeGroupsScreen\";\r\nimport { MapScreen } from \"./Maps/MapScreen\";\r\nimport { PrivateMessageItemScreen } from \"./PrivateMessages/PrivateMessageItemScreen\";\r\nimport { PrivateMessageListScreen } from \"./PrivateMessages/PrivateMessageListScreen\";\r\nimport { ScreenAreas, ScreenAreasParams } from \"./ScreenAreas\";\r\nimport { SettingsScreen } from \"./Settings/SettingsScreen\";\r\n\r\n/**\r\n * Available routes.\r\n */\r\nexport type ScreenStartParamsList = {\r\n    /**\r\n     * Primary areas.\r\n     */\r\n    Areas: ScreenAreasParams;\r\n\r\n    /**\r\n     * Detail screen for events.\r\n     */\r\n    Event: {\r\n        id: string;\r\n    };\r\n\r\n    EventFeedback: {\r\n        id: string;\r\n    };\r\n\r\n    /**\r\n     * Detail screen for dealer.\r\n     */\r\n    Dealer: DealerScreenParams;\r\n    Settings: ScreenEmptyParams;\r\n    PrivateMessageList: ScreenEmptyParams;\r\n    PrivateMessageItem: {\r\n        id: RecordId;\r\n        message: CommunicationRecord;\r\n    };\r\n    KnowledgeGroups: object;\r\n    KnowledgeEntry: {\r\n        id: RecordId;\r\n    };\r\n    Map: {\r\n        id: RecordId;\r\n        entryId?: RecordId;\r\n        linkId?: number;\r\n    };\r\n    About: undefined;\r\n};\r\n\r\nconst ScreenStartNavigator = createStackNavigator<ScreenStartParamsList>();\r\n\r\n/**\r\n * The properties to the screen as a component. This does not have navigator properties, as it\r\n * is the node initially providing the navigation container.\r\n */\r\nexport type ScreenStartProps = object;\r\n\r\nexport const ScreenStart: FC<ScreenStartProps> = React.memo(() => {\r\n    // Get the theme type for status bar configuration.\r\n    const theme = useTheme();\r\n    const themeType = useThemeType();\r\n\r\n    return (\r\n        <View style={StyleSheet.absoluteFill}>\r\n            <StatusBar backgroundColor={theme.background} style={themeType === \"light\" ? \"dark\" : \"light\"} />\r\n            <ScreenStartNavigator.Navigator screenOptions={{ headerShown: false, cardStyle: { backgroundColor: theme.surface } }}>\r\n                <ScreenStartNavigator.Screen name=\"Areas\" component={ScreenAreas} />\r\n                <ScreenStartNavigator.Screen name=\"Event\" component={EventScreen} />\r\n                <ScreenStartNavigator.Screen name=\"Dealer\" component={DealerScreen} />\r\n                <ScreenStartNavigator.Screen name=\"Settings\" component={SettingsScreen} />\r\n                <ScreenStartNavigator.Screen name=\"PrivateMessageList\" component={PrivateMessageListScreen} />\r\n                <ScreenStartNavigator.Screen name=\"PrivateMessageItem\" component={PrivateMessageItemScreen} />\r\n                <ScreenStartNavigator.Screen name=\"KnowledgeGroups\" component={KnowledgeGroupsScreen} />\r\n                <ScreenStartNavigator.Screen name=\"KnowledgeEntry\" component={KnowledgeEntryScreen} />\r\n                <ScreenStartNavigator.Screen name=\"Map\" component={MapScreen} />\r\n                <ScreenStartNavigator.Screen name=\"About\" component={AboutScreen} />\r\n                <ScreenStartNavigator.Screen name=\"EventFeedback\" component={FeedbackScreen} />\r\n            </ScreenStartNavigator.Navigator>\r\n        </View>\r\n    );\r\n});\r\n","import Constants from \"expo-constants\";\r\nimport * as Analytics from \"expo-firebase-analytics\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { PlatformSentry, captureException } from \"../../sentryHelpers\";\r\nimport { useAppSelector } from \"../../store\";\r\n\r\nexport const AnalyticsManager = () => {\r\n    const user = useAppSelector((state) => state.authorization);\r\n    const enabled = useAppSelector((state) => state.settingsSlice.analytics.enabled);\r\n\r\n    useEffect(() => {\r\n        Analytics.setAnalyticsCollectionEnabled(enabled).catch(captureException);\r\n    }, [enabled]);\r\n\r\n    useEffect(() => {\r\n        PlatformSentry.setUser(\r\n            user\r\n                ? {\r\n                      id: user.uid,\r\n                      username: user.username,\r\n                  }\r\n                : null\r\n        );\r\n        PlatformSentry.setTag(\"appVersionCode\", Constants.manifest?.android?.versionCode);\r\n\r\n        Analytics.setUserId(user?.uid ?? null).catch(captureException);\r\n        Analytics.setUserProperty(\"username\", user?.username ?? null).catch(captureException);\r\n    }, [user]);\r\n\r\n    return null;\r\n};\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useEffect } from \"react\";\r\nimport { AppState } from \"react-native\";\r\n\r\nimport { withPlatform } from \"../../hoc/withPlatform\";\r\nimport { captureNotificationException } from \"../../sentryHelpers\";\r\nimport { useSynchronizer } from \"../Synchronization/SynchronizationProvider\";\r\n\r\nconst STORAGE_TAG_NAME = \"background_sync_requested\";\r\n\r\n/**\r\n * Requests synchronization at the next possible time. Can be used in non-react\r\n * locations.\r\n */\r\nexport const requestSyncFromBackground = () => AsyncStorage.setItem(STORAGE_TAG_NAME, \"true\");\r\n\r\n/**\r\n * On initialization, checks if a sync was requested from a non-react\r\n * location, such as background tasks.\r\n * @constructor\r\n */\r\nexport const BackgroundSyncManager = () => {\r\n    // Use synchronizer for performing data refresh.\r\n    const { synchronize } = useSynchronizer();\r\n\r\n    // Connect to app state events, check on active.\r\n    useEffect(() => {\r\n        const changed = AppState.addEventListener(\"change\", (appState) => {\r\n            // Not in foreground, skip.\r\n            if (appState !== \"active\") return;\r\n\r\n            // Handle background sync requests.\r\n            (async () => {\r\n                // Get from async storage, the background task will write this as\r\n                // true when a sync request is sent.\r\n                const data = await AsyncStorage.getItem(STORAGE_TAG_NAME);\r\n\r\n                // If was not true, return false, otherwise synchronize, reset, and return true.\r\n                if (data !== \"true\") {\r\n                    return false;\r\n                } else {\r\n                    synchronize();\r\n                    await AsyncStorage.removeItem(STORAGE_TAG_NAME);\r\n                    return true;\r\n                }\r\n            })().then(\r\n                (r) => console.log(\"Sync request checked, requested:\", r),\r\n                (e) => captureNotificationException(\"Sync request could not be checked\", e)\r\n            );\r\n        });\r\n\r\n        return () => {\r\n            // Remove app state subscription.\r\n            changed.remove();\r\n        };\r\n    }, []);\r\n\r\n    return null;\r\n};\r\n\r\nexport const PlatformBackgroundSyncManager = withPlatform(BackgroundSyncManager, [\"android\", \"ios\"]);\r\n","import { FirebaseRemoteMessage, NotificationTrigger, PushNotificationTrigger } from \"expo-notifications\";\r\n\r\n/**\r\n * Notification type message trigger coming in as an FCM remote message.\r\n */\r\nexport type FirebaseMessageTrigger = PushNotificationTrigger & { remoteMessage: FirebaseRemoteMessage };\r\n/**\r\n * FCM remote message with a notification payload.\r\n */\r\nexport type FirebaseNotificationTrigger = FirebaseMessageTrigger & { remoteMessage: { notification: Exclude<FirebaseRemoteMessage[\"notification\"], null> } };\r\n\r\n/**\r\n * FCM remote message with a data payload.\r\n */\r\nexport type FirebaseDataTrigger = FirebaseMessageTrigger & { remoteMessage: { data: Exclude<FirebaseRemoteMessage[\"data\"], null> } };\r\n\r\n/**\r\n * Asserts object is a trigger.\r\n * @param object The object to assert.\r\n */\r\nexport const isTrigger = (object: any): object is NotificationTrigger => typeof object?.type === \"string\";\r\n\r\n/**\r\n * Asserts remote message is notification, checks that type is push and\r\n * that trigger.remoteMessage.notification is a non-null object.\r\n * @param trigger The trigger to assert.\r\n */\r\nexport const isTriggerWithNotification = (trigger: NotificationTrigger): trigger is FirebaseNotificationTrigger =>\r\n    // Is push trigger.\r\n    trigger.type === \"push\" &&\r\n    // Is for android.\r\n    \"remoteMessage\" in trigger &&\r\n    // Has non-null notification.\r\n    typeof trigger.remoteMessage.notification === \"object\" &&\r\n    trigger.remoteMessage.notification !== null;\r\n\r\n/**\r\n * Asserts remote message is data, checks that type is push and\r\n * that trigger.remoteMessage.data is a non-null object.\r\n * @param trigger The trigger to assert.\r\n */\r\nexport const isTriggerWithData = (trigger: NotificationTrigger): trigger is FirebaseDataTrigger =>\r\n    // Is push trigger.\r\n    trigger.type === \"push\" &&\r\n    // Is for android.\r\n    \"remoteMessage\" in trigger &&\r\n    // Has non-null data.\r\n    typeof trigger.remoteMessage.data === \"object\" &&\r\n    trigger.remoteMessage.data !== null;\r\n","import { addNotificationReceivedListener, Notification, removeNotificationSubscription, scheduleNotificationAsync } from \"expo-notifications\";\r\nimport moment from \"moment\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { conId } from \"../../configuration\";\r\nimport { withPlatform } from \"../../hoc/withPlatform\";\r\nimport { captureNotificationException } from \"../../sentryHelpers\";\r\nimport { useAppDispatch } from \"../../store\";\r\nimport { logFCMMessage } from \"../../store/background.slice\";\r\nimport { FirebaseNotificationTrigger, isTrigger, isTriggerWithData, isTriggerWithNotification } from \"../../types/NotificationTrigger\";\r\nimport { useSynchronizer } from \"../Synchronization/SynchronizationProvider\";\r\nimport { NotificationChannels } from \"./NotificationChannel\";\r\n\r\nconst scheduleNotificationFromTrigger = (source: FirebaseNotificationTrigger, channelId: NotificationChannels = \"default\") =>\r\n    scheduleNotificationAsync({\r\n        identifier: source.remoteMessage.messageId ?? undefined,\r\n        content: {\r\n            title: source.remoteMessage.notification.title ?? undefined,\r\n            body: source.remoteMessage.notification.body ?? undefined,\r\n            data: source.remoteMessage.data,\r\n        },\r\n        trigger: {\r\n            channelId,\r\n        },\r\n    });\r\n\r\n/**\r\n * Manages the foreground part of notification handling, as well as handling sync requests\r\n * originating from a background notification.\r\n * @constructor\r\n */\r\nexport const NotificationReceivedManager = () => {\r\n    // Use dispatch to handle logging of notifications.\r\n    const dispatch = useAppDispatch();\r\n\r\n    // Use synchronizer for performing data refresh.\r\n    const { synchronize } = useSynchronizer();\r\n\r\n    // Setup notification received handler.\r\n    useEffect(() => {\r\n        const receive = addNotificationReceivedListener(({ request: { content, trigger, identifier } }: Notification) => {\r\n            // Prevent reentrant error when scheduling a notification locally from a remote message.\r\n            if (!isTrigger(trigger)) {\r\n                console.log(\"Skipping empty message from remote\");\r\n                return;\r\n            }\r\n\r\n            // Track immediately when the message came in.\r\n            const dateReceived = moment().toISOString();\r\n\r\n            // Always log receiving of the message.\r\n            console.log(`Received at ${dateReceived}:`, trigger);\r\n\r\n            // Always dispatch a state update tracking the message.\r\n            dispatch(logFCMMessage({ dateReceived, content, trigger, identifier }));\r\n\r\n            // Check if data trigger. Otherwise, not actionable.\r\n            if (isTriggerWithData(trigger)) {\r\n                // Get CID and event type.\r\n                const cid = trigger.remoteMessage.data.CID;\r\n                const event = trigger.remoteMessage.data.Event;\r\n\r\n                // Skip if not for this convention.\r\n                if (cid !== conId) return;\r\n\r\n                // Handle for sync, announcement, and notification.\r\n                if (event === \"Sync\") {\r\n                    // Is sync, do synchronization silently.\r\n                    synchronize(false);\r\n\r\n                    // Log sync.\r\n                    console.log(\"Synchronized for remote Sync request\");\r\n                } else if (event === \"Announcement\" && isTriggerWithNotification(trigger)) {\r\n                    // Schedule it.\r\n                    scheduleNotificationFromTrigger(trigger, \"announcements\").then(\r\n                        () => console.log(\"Announcement scheduled\"),\r\n                        (e) => captureNotificationException(\"Unable to schedule announcement\", e)\r\n                    );\r\n                } else if (event === \"Notification\" && isTriggerWithNotification(trigger)) {\r\n                    // Schedule it.\r\n                    scheduleNotificationFromTrigger(trigger, \"private_messages\").then(\r\n                        () => console.log(\"Personal message scheduled\"),\r\n                        (e) => captureNotificationException(\"Unable to schedule personal message\", e)\r\n                    );\r\n                }\r\n            }\r\n        });\r\n\r\n        // Return removal of subscription.\r\n        return () => {\r\n            removeNotificationSubscription(receive);\r\n        };\r\n    }, []);\r\n\r\n    return null;\r\n};\r\n\r\nexport const PlatformNotificationReceivedManager = withPlatform(NotificationReceivedManager, [\"android\", \"ios\"]);\r\n","import { useLastNotificationResponse } from \"expo-notifications\";\r\nimport moment from \"moment\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { conId } from \"../../configuration\";\r\nimport { withPlatform } from \"../../hoc/withPlatform\";\r\nimport { useAppNavigation } from \"../../hooks/useAppNavigation\";\r\n\r\n/**\r\n * Manages the foreground part notification response handling.\r\n * @constructor\r\n */\r\nexport const NotificationRespondedManager = () => {\r\n    const navigation = useAppNavigation(\"Areas\");\r\n    const response = useLastNotificationResponse();\r\n\r\n    // Setup handler for notification response.\r\n    useEffect(() => {\r\n        // Track when the response was observed.\r\n        const dateResponded = moment().toISOString();\r\n\r\n        // Always log receiving of the message.\r\n        console.log(`Response observed at ${dateResponded}:`, response);\r\n\r\n        // Get the data object. Resolve CID, type, and related ID.\r\n        const data = response?.notification?.request?.content?.data;\r\n        const cid = data?.CID;\r\n        const event = data?.Event;\r\n        const relatedId = data?.RelatedId;\r\n\r\n        // Check ID match.\r\n        if (cid !== conId) return;\r\n\r\n        // Event is for an announcement.\r\n        if (event === \"Announcement\") {\r\n            // Log navigation.\r\n            console.log(`Navigating to announcement ${relatedId}`);\r\n\r\n            // Go to home screen. TODO: Opening the item not implemented.\r\n            return navigation.navigate(\"Areas\", { screen: \"Home\" });\r\n        }\r\n\r\n        // Event is for a personal message.\r\n        if (event === \"Notification\") {\r\n            // Log navigation.\r\n            console.log(`Navigating to private message ${relatedId}`);\r\n\r\n            // Go to private messages. TODO: Opening the item not implemented.\r\n            return navigation.navigate(\"PrivateMessageList\");\r\n        }\r\n    }, [navigation, response]);\r\n\r\n    return null;\r\n};\r\n\r\nexport const PlatformNotificationRespondedManager = withPlatform(NotificationRespondedManager, [\"android\", \"ios\"]);\r\n","import * as Device from \"expo-device\";\r\nimport * as Notifications from \"expo-notifications\";\r\nimport { useEffect } from \"react\";\r\nimport { Platform } from \"react-native\";\r\n\r\nimport { conId } from \"../../configuration\";\r\nimport { withPlatform } from \"../../hoc/withPlatform\";\r\nimport { captureNotificationException } from \"../../sentryHelpers\";\r\nimport { useAppSelector } from \"../../store\";\r\nimport { usePostDeviceRegistrationMutation, usePostSubscribeToTopicMutation } from \"../../store/authorization.service\";\r\n\r\n/**\r\n * List of topics for this device.\r\n */\r\nconst TOPICS = [`${conId}-${Platform.OS}`, `${conId}-expo`, `${conId}`];\r\n\r\n/**\r\n * Makes sure we can request a token. We must be on a device and have permissions. If\r\n * permissions are not  given and can be asked for, try to get permission.\r\n */\r\nconst prepareToken = async () => {\r\n    // Not a device, useless.\r\n    if (!Device.isDevice) return false;\r\n\r\n    // Permission either given or cannot be asked for again, return here with appropriate status.\r\n    const initial = await Notifications.getPermissionsAsync();\r\n    if (initial.granted) return true;\r\n    if (!initial.canAskAgain) return false;\r\n\r\n    // Request again. Return if granted now.\r\n    const request = await Notifications.requestPermissionsAsync();\r\n    return request.granted;\r\n};\r\n\r\n/**\r\n * Retrieves the appropriate device token.\r\n */\r\nconst retrieveToken = async () => {\r\n    // Get the *device* token. We are using native FCM, therefore we need the device token.\r\n    const response = await Notifications.getDevicePushTokenAsync();\r\n    return response.data;\r\n};\r\n\r\n/**\r\n * Manages the foreground part of notification handling, as well as handling sync requests\r\n * originating from a background notification.\r\n * @constructor\r\n */\r\nexport const TokenManager = () => {\r\n    // Use token state to trigger effect updates when login state changed.\r\n    const authToken = useAppSelector((state) => state.authorization.token);\r\n\r\n    // Use device registration and subscription.\r\n    const [registerDevice] = usePostDeviceRegistrationMutation();\r\n    const [subscribeToTopic] = usePostSubscribeToTopicMutation();\r\n\r\n    // Connect device itself via it's token to the backend and the topics. This\r\n    // effect specifies token as a dependency, as a change of the token results\r\n    // in different behavior of the remote method.\r\n    useEffect(() => {\r\n        (async () => {\r\n            // Prepare it. If not available, do not continue.\r\n            const ok = await prepareToken();\r\n            if (!ok) return false;\r\n\r\n            // Acquire the proper token.\r\n            const token = await retrieveToken();\r\n\r\n            console.log(\"FCM TOKEN:\", token);\r\n\r\n            // Register token as device with all topics.\r\n            await registerDevice({\r\n                DeviceId: token,\r\n                Topics: TOPICS,\r\n            });\r\n\r\n            // Register token individually for FCM compat.\r\n            for (const topic of TOPICS) {\r\n                await subscribeToTopic({\r\n                    DeviceId: token,\r\n                    Topic: topic,\r\n                });\r\n            }\r\n\r\n            // Return actionable true.\r\n            return true;\r\n        })().then(\r\n            (r) => console.log(\"Registration and subscription, performed:\", r),\r\n            (e) => captureNotificationException(\"Could not register and subscribe\", e)\r\n        );\r\n    }, [authToken /* Remote methods depend on token implicitly. */]);\r\n\r\n    return null;\r\n};\r\n\r\nexport const PlatformTokenManager = withPlatform(TokenManager, [\"android\", \"ios\"]);\r\n","import { LinkingOptions, NavigationContainer, NavigationContainerRef } from \"@react-navigation/native\";\r\nimport { NavigationState } from \"@react-navigation/routers\";\r\nimport * as Linking from \"expo-linking\";\r\nimport { FC, useCallback, useMemo, useRef } from \"react\";\r\n\r\nimport { DealersTabsScreenParamsList } from \"../app/Dealers/DealersTabsScreen\";\r\nimport { EventsTabsScreenParamsList } from \"../app/Events/EventsTabsScreen\";\r\nimport { ScreenAreasParamsList } from \"../app/ScreenAreas\";\r\nimport { ScreenStartParamsList } from \"../app/ScreenStart\";\r\nimport { conId } from \"../configuration\";\r\nimport { useAnalytics } from \"../hooks/useAnalytics\";\r\nimport { useNavigationStatePersistence } from \"../hooks/useNavigationStatePersistence\";\r\nimport { PlatformSentry } from \"../sentryHelpers\";\r\nimport { useAppSelector } from \"../store\";\r\nimport { eventDaysSelectors, eventRoomsSelectors, eventTracksSelectors } from \"../store/eurofurence.selectors\";\r\nimport { RecordId } from \"../store/eurofurence.types\";\r\n\r\nexport const sentryRoutingInstrumentation = \"ReactNavigationInstrumentation\" in PlatformSentry ? new PlatformSentry.ReactNavigationInstrumentation() : undefined;\r\n\r\ntype LinkingConfig<ParamsList> = {\r\n    initialRouteName?: keyof ParamsList;\r\n    screens: Record<keyof ParamsList, string | LinkingConfig<any>>;\r\n    path?: string;\r\n    exact?: boolean;\r\n    parse?: Record<string, (value: string) => any>;\r\n    stringify?: Record<string, (value: any) => string>;\r\n};\r\n\r\n/**\r\n * Configure deep linking\r\n */\r\nconst linkingFrom = (days: RecordId[], tracks: RecordId[], rooms: RecordId[]): LinkingOptions<ScreenStartParamsList> => {\r\n    // Dynamically create dynamic parts.\r\n    const eventsLinking: LinkingConfig<EventsTabsScreenParamsList> = {\r\n        initialRouteName: \"Events\",\r\n        screens: {\r\n            Favorites: \"Areas/Events/Favorites\",\r\n            Results: \"Areas/Events/Results\",\r\n            Search: \"Areas/Events/Search\",\r\n\r\n            ...Object.fromEntries(days.map((id) => [id, `Areas/Events/Days/${id}`])),\r\n            ...Object.fromEntries(tracks.map((id) => [id, `Areas/Events/Tracks/${id}`])),\r\n            ...Object.fromEntries(rooms.map((id) => [id, `Areas/Events/Rooms/${id}`])),\r\n        },\r\n    };\r\n\r\n    const dealersLinking: LinkingConfig<DealersTabsScreenParamsList> = {\r\n        initialRouteName: \"All\",\r\n        screens: {\r\n            All: \"Areas/Dealers\",\r\n            Thu: \"Areas/Dealers/Thu\",\r\n            Fri: \"Areas/Dealers/Fri\",\r\n            Sat: \"Areas/Dealers/Sat\",\r\n        },\r\n    };\r\n\r\n    const areasLinking: LinkingConfig<ScreenAreasParamsList> = {\r\n        initialRouteName: \"Home\",\r\n        screens: {\r\n            Home: \"Areas/Home\",\r\n            Events: eventsLinking,\r\n            Dealers: dealersLinking,\r\n        },\r\n    };\r\n\r\n    // TODO: Use configuration constants here.\r\n    // Return the composed linking object.\r\n    return {\r\n        prefixes: [Linking.createURL(`/`), Linking.createURL(`/${conId}/Web/`), `https://app.eurofurence.org`],\r\n        config: {\r\n            initialRouteName: \"Areas\",\r\n            screens: {\r\n                Areas: areasLinking,\r\n                Event: \"Events/:id\",\r\n                Dealer: \"Dealers/:id\",\r\n                KnowledgeGroups: \"Knowledge\",\r\n                KnowledgeEntry: \"Knowledge/:id\",\r\n                Settings: \"Settings\",\r\n                Map: \"Map/:id\",\r\n                About: \"About\",\r\n            },\r\n        },\r\n    };\r\n};\r\n\r\nexport const NavigationProvider: FC = ({ children }) => {\r\n    const navigation = useRef<NavigationContainerRef<any> | null>(null);\r\n    // Get navigation state from persistence.\r\n    const [isReady, initialState, onStateChange] = useNavigationStatePersistence();\r\n    const logEvent = useAnalytics();\r\n\r\n    const logAnalytics = useCallback(\r\n        (state: NavigationState | undefined) => {\r\n            if (!state) return null;\r\n            const route: { name: string; params?: object; key: string } = state.routes[state.index] as any;\r\n\r\n            logEvent(\"screen_view\", {\r\n                screen_name: route.name,\r\n                ...route.params,\r\n            });\r\n        },\r\n        [logEvent]\r\n    );\r\n\r\n    const days = useAppSelector(eventDaysSelectors.selectIds);\r\n    const tracks = useAppSelector(eventTracksSelectors.selectIds);\r\n    const rooms = useAppSelector(eventRoomsSelectors.selectIds);\r\n\r\n    const linking = useMemo(() => linkingFrom(days, tracks, rooms), [days, tracks, rooms]);\r\n\r\n    if (!isReady) {\r\n        return null;\r\n    }\r\n    return (\r\n        <NavigationContainer\r\n            ref={navigation}\r\n            linking={linking}\r\n            initialState={initialState}\r\n            onReady={() => {\r\n                sentryRoutingInstrumentation?.registerNavigationContainer(navigation.current);\r\n            }}\r\n            onStateChange={(state) => {\r\n                onStateChange(state);\r\n                logAnalytics(state);\r\n            }}\r\n        >\r\n            {children}\r\n        </NavigationContainer>\r\n    );\r\n};\r\n","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { InitialState, NavigationState } from \"@react-navigation/routers\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { Linking, Platform } from \"react-native\";\r\n\r\n/**\r\n * Creates a hook for initial state loading and saving.\r\n * @param persistenceKey\r\n * @return Returns if ready, the initial state, and the state changed callback.\r\n */\r\nexport const useNavigationStatePersistence = (persistenceKey = \"NAVIGATION_STATE\"): [boolean, InitialState | undefined, (state: NavigationState | undefined) => void] => {\r\n    const [isReady, setIsReady] = useState<boolean>(false);\r\n    const [initialState, setInitialState] = useState<InitialState>();\r\n\r\n    const onStateChange = useCallback((state: NavigationState | undefined) => AsyncStorage.setItem(persistenceKey, JSON.stringify(state)), [persistenceKey]);\r\n\r\n    useEffect(() => {\r\n        // Already ready, skip.\r\n        if (isReady) return;\r\n\r\n        // Run initialization from store.\r\n        (async () => {\r\n            // Get initial URL and stored value.\r\n            const [initialUrl, savedStateString] = await Promise.all([Linking.getInitialURL(), AsyncStorage.getItem(persistenceKey)]);\r\n\r\n            // If web or initial URL is given, skip restoring.\r\n            if (Platform.OS === \"web\" || initialUrl !== null) return;\r\n\r\n            // If given, assign it as parsed from JSON.\r\n            if (typeof savedStateString === \"string\") {\r\n                setInitialState(JSON.parse(savedStateString));\r\n            }\r\n        })()\r\n            .catch(console.error)\r\n            .finally(() => setIsReady(true));\r\n    }, [isReady]);\r\n\r\n    // Return the values. Assert initial state, as it should only be used when it is to be used.\r\n    return [isReady, initialState, onStateChange];\r\n};\r\n","import * as Analytics from \"expo-firebase-analytics\";\r\nimport { useMemo } from \"react\";\r\n\r\nimport { useAppSelector } from \"../store\";\r\n\r\ntype LogEvent = (name: string, params: Record<string, any>) => Promise<void>;\r\n\r\nexport const useAnalytics = () => {\r\n    const enabled = useAppSelector((state) => state.settingsSlice.analytics.enabled);\r\n\r\n    return useMemo((): LogEvent => {\r\n        return enabled ? (name, properties) => Analytics.logEvent(name, properties) : () => Promise.resolve();\r\n    }, [enabled]);\r\n};\r\n","import { BottomSheetModalProvider } from \"@gorhom/bottom-sheet\";\r\n\r\nimport { ScreenStart } from \"./app/ScreenStart\";\r\nimport { AnalyticsManager } from \"./components/Managers/AnalyticsManager\";\r\nimport { PlatformBackgroundSyncManager } from \"./components/Managers/BackgroundSyncManager\";\r\nimport { PlatformNotificationReceivedManager } from \"./components/Managers/NotificationReceivedManager\";\r\nimport { PlatformNotificationRespondedManager } from \"./components/Managers/NotificationRespondedManager\";\r\nimport { PlatformTokenManager } from \"./components/Managers/TokenManager\";\r\nimport { EventsSearchProvider } from \"./components/Searching/EventsSearchContext\";\r\nimport { SynchronizationProvider } from \"./components/Synchronization/SynchronizationProvider\";\r\nimport { NavigationProvider } from \"./context/NavigationProvider\";\r\n\r\n/**\r\n * Base App. Handles all ui related layout stuff. Context providers go in index.tsx. Actual UI content should be in screens or components\r\n */\r\nexport default function App() {\r\n    return (\r\n        <BottomSheetModalProvider>\r\n            <SynchronizationProvider>\r\n                <EventsSearchProvider>\r\n                    <NavigationProvider>\r\n                        <ScreenStart />\r\n\r\n                        {/* Handle device token acquisition. */}\r\n                        <PlatformTokenManager />\r\n\r\n                        {/* Handle handling notifications in foreground. */}\r\n                        <PlatformNotificationReceivedManager />\r\n                        <PlatformNotificationRespondedManager />\r\n\r\n                        {/* Handle notifications in background. */}\r\n                        <PlatformBackgroundSyncManager />\r\n\r\n                        {/* Set up analytics. */}\r\n                        <AnalyticsManager />\r\n                    </NavigationProvider>\r\n                </EventsSearchProvider>\r\n            </SynchronizationProvider>\r\n        </BottomSheetModalProvider>\r\n    );\r\n}\r\n","import { FC } from \"react\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\r\n\r\nimport { appStyles } from \"../../app/AppStyles\";\r\nimport { Label } from \"../Atoms/Label\";\r\nimport { Button } from \"../Containers/Button\";\r\nimport { Floater } from \"../Containers/Floater\";\r\nimport { useSynchronizer } from \"../Synchronization/SynchronizationProvider\";\r\n\r\nexport type AppErrorContentProps = {\r\n    error?: any;\r\n};\r\nexport const AppErrorContent: FC<AppErrorContentProps> = ({ error }) => {\r\n    const safe = useSafeAreaInsets();\r\n    const sync = useSynchronizer();\r\n    console.log(error);\r\n    return (\r\n        <ScrollView style={[appStyles.abs, safe]}>\r\n            <Floater contentStyle={appStyles.trailer}>\r\n                <Label type=\"h1\" mt={40}>\r\n                    Sorry, something went wrong\r\n                </Label>\r\n\r\n                <Label type=\"para\" mt={20} mb={20}>\r\n                    Please let us know that there's something going wrong. You can try clearing the cache, this will however also remove your preferences.\r\n                </Label>\r\n                <Button icon=\"trash-can-outline\" onPress={sync.clear}>\r\n                    Clear the cache\r\n                </Button>\r\n                <Label type=\"h2\" mt={20} mb={20}>\r\n                    The following error caused the crash\r\n                </Label>\r\n                <Label type=\"para\" color=\"warning\">\r\n                    {`Message: ${error.message} ${error.componentStack}`}\r\n                </Label>\r\n            </Floater>\r\n        </ScrollView>\r\n    );\r\n};\r\n","import React, { ReactNode } from \"react\";\r\n\r\nimport { PlatformSentry } from \"../../sentryHelpers\";\r\nimport { AppErrorContent } from \"./AppErrorContent\";\r\n\r\nexport class AppErrorBoundary extends React.PureComponent<{ children: ReactNode }, { hasError: boolean; error: Error | null }> {\r\n    constructor(props: { children: ReactNode }) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error: Error) {\r\n        return { hasError: true, error };\r\n    }\r\n\r\n    componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n        PlatformSentry.captureException(error);\r\n\r\n        console.error(error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <AppErrorContent error={this.state.error} />;\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n","import { registerTaskAsync } from \"expo-notifications\";\r\nimport { defineTask, TaskManagerTaskBody } from \"expo-task-manager\";\r\nimport { Platform } from \"react-native\";\r\n\r\nimport { conId } from \"../../configuration\";\r\nimport { captureEvent, captureNotificationException } from \"../../sentryHelpers\";\r\nimport { requestSyncFromBackground } from \"./BackgroundSyncManager\";\r\n\r\n// Import globally at index, this code runs the method on import.\r\n\r\n/**\r\n * Name of the background task handling notifications when not in foreground.\r\n */\r\nconst BG_NOTIFICATIONS_NAME = \"background_notifications\";\r\n\r\n// Define task for notification handling.\r\ndefineTask(BG_NOTIFICATIONS_NAME, ({ data, error, executionInfo }: TaskManagerTaskBody<{ notification?: any }>) => {\r\n    // Skip method if error was given to be handled.\r\n    if (error) {\r\n        captureEvent(error);\r\n        return;\r\n    }\r\n\r\n    // Log that a notification was received.\r\n    console.log(\"Received data in background\", data, \"App state\", executionInfo.appState);\r\n\r\n    // Get event data.\r\n    const cid = data?.notification?.data?.CID;\r\n    const event = data?.notification?.data?.Event;\r\n\r\n    // Skip if not for this convention.\r\n    if (cid !== conId) return;\r\n\r\n    // Handle for Sync events only.\r\n    if (event === \"Sync\") {\r\n        // Is sync, request synchronization.\r\n        requestSyncFromBackground().then(\r\n            () => console.log(\"Sync marked requested\"),\r\n            (e) => captureNotificationException(\"Could not mark sync as requested\", e)\r\n        );\r\n    }\r\n});\r\n\r\n// Connect to notification on supported platforms.\r\nif (Platform.OS === \"android\" || Platform.OS === \"ios\")\r\n    registerTaskAsync(BG_NOTIFICATIONS_NAME).then(\r\n        () => console.log(\"Successfully connected for background notifications\"),\r\n        (e) => captureNotificationException(\"Unable to connect for background notifications\", e)\r\n    );\r\nelse console.log(\"Skipping registration of sync generator, unsupported on web.\");\r\n","import * as Notifications from \"expo-notifications\";\r\nimport { setNotificationChannelAsync } from \"expo-notifications\";\r\n\r\nimport { captureNotificationException } from \"../../sentryHelpers\";\r\n\r\n// Import globally at index, this code runs the method on import.\r\n\r\nexport type NotificationChannels = \"default\" | \"event_reminders\" | \"announcements\" | \"private_messages\";\r\n// Setup default channel.\r\nsetNotificationChannelAsync(\"default\", {\r\n    name: \"Miscellaneous\",\r\n    importance: Notifications.AndroidImportance.MIN,\r\n    lightColor: \"#006459\",\r\n}).then(\r\n    () => console.log(\"Assigned default notification channel\"),\r\n    (e) => captureNotificationException(\"Failed to assign notification channel:\", e)\r\n);\r\n\r\nsetNotificationChannelAsync(\"event_reminders\", {\r\n    name: \"Event Reminders\",\r\n    importance: Notifications.AndroidImportance.HIGH,\r\n    lightColor: \"#006459\",\r\n}).then(\r\n    () => console.log(\"Assigned Event Reminders notification channel\"),\r\n    (e) => captureNotificationException(\"Failed to assign notification channel:\", e)\r\n);\r\n\r\nsetNotificationChannelAsync(\"announcements\", {\r\n    name: \"Announcements\",\r\n    importance: Notifications.AndroidImportance.DEFAULT,\r\n    lightColor: \"#006459\",\r\n}).then(\r\n    () => console.log(\"Assigned Announcements notification channel\"),\r\n    (e) => captureNotificationException(\"Failed to assign notification channel:\", e)\r\n);\r\n\r\nsetNotificationChannelAsync(\"private_messages\", {\r\n    name: \"Private Messages\",\r\n    importance: Notifications.AndroidImportance.DEFAULT,\r\n    lightColor: \"#006459\",\r\n}).then(\r\n    () => console.log(\"Assigned Private Messages notification channel\"),\r\n    (e) => captureNotificationException(\"Failed to assign notification channel:\", e)\r\n);\r\n","import { setNotificationHandler } from \"expo-notifications\";\r\n\r\nimport { captureNotificationException } from \"../../sentryHelpers\";\r\n\r\n// Import globally at index, this code runs the method on import.\r\n\r\n// Set general notification handling strategy.\r\nsetNotificationHandler({\r\n    handleNotification: ({ request: { content } }) => {\r\n        // Mark handling notification.\r\n        console.log(\"Handling notification\", content);\r\n\r\n        // Show if it's a notification trigger.\r\n        return Promise.resolve({\r\n            shouldShowAlert: typeof content?.title === \"string\" || typeof content?.body === \"string\",\r\n            shouldPlaySound: false,\r\n            shouldSetBadge: false,\r\n        });\r\n    },\r\n    handleSuccess: (id) => {\r\n        // Log success.\r\n        console.log(`Handled notification successfully, assigned ID: ${id}`);\r\n    },\r\n    handleError: (id, error) => {\r\n        // Log error.\r\n        captureNotificationException(`Handling notification failed, assigned ID: ${id}`, error);\r\n    },\r\n});\r\n","import { registerRootComponent } from \"expo\";\r\nimport { FC } from \"react\";\r\nimport { StyleSheet } from \"react-native\";\r\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\r\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\r\nimport { Provider as StoreProvider } from \"react-redux\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport * as Sentry from \"sentry-expo\";\r\n\r\nimport App from \"./App\";\r\nimport { AppErrorBoundary } from \"./components/Utilities/AppErrorBoundary\";\r\nimport { LoadingContextProvider } from \"./context/LoadingContext\";\r\nimport { sentryRoutingInstrumentation } from \"./context/NavigationProvider\";\r\nimport { PlatformSentry } from \"./sentryHelpers\";\r\nimport { persistor, store } from \"./store\";\r\n\r\nimport \"react-native-reanimated\";\r\n\r\n// Import background notification connector and handler setup.\r\nimport \"./components/Managers/BackgroundSyncGenerator\";\r\nimport \"./components/Managers/NotificationChannel\";\r\nimport \"./components/Managers/NotificationHandler\";\r\n\r\nSentry.init({\r\n    dsn: \"https://f3baa5424fef43dfa5e2e881b37c13de@o1343479.ingest.sentry.io/6647748\",\r\n    enableInExpoDevelopment: false,\r\n    debug: false, // If `true`, Sentry will try to print out useful debugging information if something goes wrong with sending the event. Set it to `false` in production\r\n    tracesSampleRate: 1,\r\n    integrations:\r\n        \"ReactNativeTracing\" in PlatformSentry\r\n            ? [\r\n                  new PlatformSentry.ReactNativeTracing({\r\n                      traceFetch: true,\r\n                      enableAppStartTracking: true,\r\n                      enableNativeFramesTracking: true,\r\n                      traceXHR: true,\r\n                      enableStallTracking: true,\r\n                      tracingOrigins: [\"localhost\", \"app.eurofurence.org\", /^\\//],\r\n                      routingInstrumentation: sentryRoutingInstrumentation,\r\n                  }),\r\n              ]\r\n            : [],\r\n});\r\n\r\nconst Index: FC = () => {\r\n    return (\r\n        <GestureHandlerRootView style={[StyleSheet.absoluteFill, styles.container]}>\r\n            <SafeAreaProvider>\r\n                <StoreProvider store={store}>\r\n                    <AppErrorBoundary>\r\n                        <PersistGate persistor={persistor}>\r\n                            <LoadingContextProvider>\r\n                                <App />\r\n                            </LoadingContextProvider>\r\n                        </PersistGate>\r\n                    </AppErrorBoundary>\r\n                </StoreProvider>\r\n            </SafeAreaProvider>\r\n        </GestureHandlerRootView>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        overflow: \"hidden\",\r\n    },\r\n});\r\n\r\nconst WrappedIndex = Index;\r\n\r\nconst RootComponent = () => <WrappedIndex />;\r\nregisterRootComponent(RootComponent);\r\n"],"sourceRoot":""}